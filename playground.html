

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Playground &mdash; Elpi 1.15.2 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Elpi
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">API:</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="elpi/index.html#http://">elpi</a></li>
<li class="toctree-l1"><a class="reference external" href="elpi-option-legacy-parser/index.html#http://">elpi-option-legacy-parser</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Elpi</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Playground</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/playground.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="playground">
<h1>Playground<a class="headerlink" href="#playground" title="Permalink to this headline">¶</a></h1>
<p>This page is used to test hooks in order to run <code class="docutils literal notranslate"><span class="pre">elpi</span></code> on code snippets and inject its output within <code class="docutils literal notranslate"><span class="pre">sphinx</span></code> documentation sources.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>Before running the hooks, make sure to have <code class="docutils literal notranslate"><span class="pre">elpi</span></code> built locally:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">eval $(opam env)</span>
<span class="go">make build</span>
</pre></div>
</div>
<p>It doesn’t hurt to check that <code class="docutils literal notranslate"><span class="pre">dune</span></code> runs the locally built <code class="docutils literal notranslate"><span class="pre">elpi</span></code> correctly:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">dune exec elpi -- -h</span>
</pre></div>
</div>
</div>
<div class="section" id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h2>
<p>Elpi code blocks to be evaluated and which output is to be injected from <code class="docutils literal notranslate"><span class="pre">docs/base</span></code> to <code class="docutils literal notranslate"><span class="pre">docs/source</span></code> are conventionally denoted in <code class="docutils literal notranslate"><span class="pre">reStructuredText</span></code> as <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">elpi::</span> <span class="pre">FILE</span></code>.</p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span>type app term -&gt; term -&gt; term.
type lam (term -&gt; term) -&gt; term.
type arr ty -&gt; ty -&gt; ty.
type nat ty.
type bool ty.
mode (term i o).
term (app HD ARG) TGT :- term HD (arr SRC TGT), term ARG SRC.
term (lam F) (arr SRC TGT) :- pi x\ term x SRC =&gt; term (F x) TGT.
term (uvar as X) T :- declare_constraint (term X T) [X].

len [] 0.
len [_|XS] N :- len XS M, N is M + 1.

constraint term {
  rule
     \ (term (uvar K LX) _) (term (uvar K LY) _)
     | (len LX N, len LY M, not(N = M))
   &lt;=&gt; (print &quot;wrong arity&quot; K, false).

  rule (GX ?- term (uvar K LX) TX)
     \ (GY ?- term (uvar K LY) TY)
     | (print &quot;compat&quot; GX &quot;|-&quot; K LX TX &quot;,&quot; GY &quot;|-&quot; K LY TY, 
        compatible GX LX GY LY CTXCONSTR)
   &lt;=&gt; (print &quot;NEW&quot; CTXCONSTR TX &quot;=&quot; TY, CTXCONSTR, TX = TY).

}

compatible _ [] _ [] [] :- !.
compatible GX [X|XS] GY [Y|YS] [TX = TY | K] :-
 (GX =&gt; term X TX),
 (GY =&gt; term Y TY),
 !,
 compatible GX XS GY YS K.
compatible _ _ _ _ [false].

main :-
  (term (lam x\ lam y\ app (app (F x y) x) y) T1_, 
   term (lam y\ lam x\ app (app (F x y) y) x) T2_),
  print &quot;1&quot;,
  (term (lam x \ X x) (arr A_ nat),
   term (lam x \ X x) (arr bool B_)),
  print &quot;2&quot;,
  not(term (lam x \ Y x) (arr C nat), term (lam x \ Y x) (arr bool C)),
  not(term (lam x \ Z x) (arr nat nat), term (lam x \ Z x) (arr bool D_)).

</pre></div></td></tr></table></div>
</div>
<p>The injection engine:</p>
<ul class="simple">
<li><p>Retrieves all <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">elpi::</span></code> directives</p></li>
<li><p>Changes them into <code class="docutils literal notranslate"><span class="pre">literalinclude</span></code> in the generated source with relevant options</p></li>
<li><p>Runs <code class="docutils literal notranslate"><span class="pre">dune</span> <span class="pre">exec</span> <span class="pre">elpi</span> <span class="pre">--</span> <span class="pre">-test</span> <span class="pre">FILE</span></code> on the <code class="docutils literal notranslate"><span class="pre">FILE</span></code> containing the <code class="docutils literal notranslate"><span class="pre">elpi</span></code> snippet, test or example.</p></li>
<li><p>Captures its output (<code class="docutils literal notranslate"><span class="pre">stdout</span></code>)</p></li>
<li><p>Creates a <code class="docutils literal notranslate"><span class="pre">code-block::</span> <span class="pre">console</span></code> just after it to inject the captured console output</p></li>
<li><p>Captures its output (<code class="docutils literal notranslate"><span class="pre">stderr</span></code>)</p></li>
<li><p>Creates a <code class="docutils literal notranslate"><span class="pre">code-block::</span> <span class="pre">console</span></code> just after it to inject the captured console erros</p></li>
<li><p>In case of an assertion option for the <code class="docutils literal notranslate"><span class="pre">elpi</span></code> directive, the output is injected only if matched</p></li>
</ul>
<p>Result should look as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.004</span>
<span class="go">File &quot;/home/jwintz/Development/elpi/tests/sources/chr.elpi&quot;, line 7, column 60, character 133: Warning: constant term has no declared type.</span>
<span class="go">File &quot;/home/jwintz/Development/elpi/tests/sources/chr.elpi&quot;, line 11, column 8, character 319: Warning: constant len has no declared type. Did you mean std.length ?</span>
<span class="go">File &quot;/home/jwintz/Development/elpi/tests/sources/chr.elpi&quot;, line 28, column 28, character 761: Warning: constant compatible has no declared type.</span>

<span class="go">Typechecking time: 0.154</span>
<span class="go">compat [term c1 (uvar frozen--501 []), term c0 (uvar frozen--502 [])] |- frozen--494 [</span>
<span class="go"> c1, c0] arr (uvar frozen--495 [c0, c1]) (arr (uvar frozen--496 [c0, c1]) (uvar frozen--497 [])) , [</span>
<span class="go"> term c3 (uvar frozen--499 []), term c2 (uvar frozen--498 [])] |- frozen--494 [</span>
<span class="go"> c2, c3] arr (uvar frozen--498 []) (arr (uvar frozen--499 []) (uvar frozen--500 []))</span>
<span class="go">NEW [X0 = X1, X2 = X3] arr (X4 c0 c1) (arr (X5 c0 c1) X6) = arr X1 (arr X3 X7)</span>
<span class="go">1</span>
<span class="go">compat [term c0 bool] |- frozen--507 [c0] uvar frozen--508 [] , [term c1 (uvar frozen--509 [])] |- frozen--507 [c1] nat</span>
<span class="go">NEW [bool = X8] X9 = nat</span>
<span class="go">2</span>
<span class="go">compat [term c0 bool] |- frozen--514 [c0] uvar frozen--515 [] , [term c1 (uvar frozen--515 [])] |- frozen--514 [c1] nat</span>
<span class="go">NEW [bool = X10] X10 = nat</span>
<span class="go">compat [term c0 bool] |- frozen--520 [c0] uvar frozen--521 [] , [term c1 nat] |- frozen--520 [c1] nat</span>
<span class="go">NEW [bool = nat] X11 = nat</span>

<span class="go">Success:</span>

<span class="go">Time: 0.001</span>

<span class="go">Constraints:</span>
<span class="go"> {c0} : term c0 bool ?- term (X12 c0) nat  /* suspended on X12 */ {c0 c1} : term c1 X13, term c0 X13 ?- term (X14 c1 c0) (arr X13 (arr X13 X6))  /* suspended on X14 */</span>

<span class="go">State:</span>
</pre></div>
</div>
</div>
<div class="section" id="regexp-matching">
<h2>Regexp Matching<a class="headerlink" href="#regexp-matching" title="Permalink to this headline">¶</a></h2>
<p>This <code class="docutils literal notranslate"><span class="pre">elpi</span></code> directive should pass validation:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">.. elpi:: ./a.elpi</span>
<span class="go">   :assert: V = s \(.*\)</span>
</pre></div>
</div>
<p><strong>./a.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">type</span><span class="w"> </span><span class="nf">s</span><span class="w"> </span><span class="kt">num</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">num</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">zero</span><span class="w"> </span><span class="kt">num</span>.<span class="w"></span>
<span class="kd">pred</span><span class="w"> </span><span class="nf">ack</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">num</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">num</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">num</span>.<span class="w"></span>
ack<span class="w"> </span>zero<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">N</span><span class="o">).</span><span class="w"></span>
ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span>zero<span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">M2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">M</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M2</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">)</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span><span class="w"></span>
ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">M2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">M</span><span class="kd">,</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">N2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">N</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N2</span><span class="w"> </span><span class="nv">V2</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M2</span><span class="w"> </span><span class="nv">V2</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span><span class="w"></span>
main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ack<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">)))</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">)</span><span class="w"> </span><span class="nv">V</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;V =&quot;</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">V = s (s (s (s (s (s (s (s (s (s (s (s (s zero))))))))))))</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.072</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p>This one should fail validation, only a message stating the regexp matching error will be printed:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">.. elpi:: ./a.elpi</span>
<span class="go">   :assert: /(?!)/</span>
</pre></div>
</div>
<p><strong>./a.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">type</span><span class="w"> </span><span class="nf">s</span><span class="w"> </span><span class="kt">num</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">num</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">zero</span><span class="w"> </span><span class="kt">num</span>.<span class="w"></span>
<span class="kd">pred</span><span class="w"> </span><span class="nf">ack</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">num</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">num</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">num</span>.<span class="w"></span>
ack<span class="w"> </span>zero<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">N</span><span class="o">).</span><span class="w"></span>
ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span>zero<span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">M2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">M</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M2</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">)</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span><span class="w"></span>
ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">M2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">M</span><span class="kd">,</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">N2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">N</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N2</span><span class="w"> </span><span class="nv">V2</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M2</span><span class="w"> </span><span class="nv">V2</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span><span class="w"></span>
main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ack<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">)))</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">)</span><span class="w"> </span><span class="nv">V</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;V =&quot;</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight" style="background-color: rgb(248, 148, 148);"><pre>Injection failure: result did not pass regexp check (/(?!)/)</pre></div></div></div>
<div class="section" id="test-bed">
<h2>Test Bed<a class="headerlink" href="#test-bed" title="Permalink to this headline">¶</a></h2>
<p><strong>../../tests/sources/accumulate_twice1.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">pred</span><span class="w"> </span><span class="nf">doomed</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>.<span class="w"></span>
<span class="kd">accumulate</span><span class="w"> </span>accumulated<span class="o">.</span><span class="w"></span>
<span class="kd">accumulate</span><span class="w"> </span>accumulated<span class="o">.</span><span class="w"></span>
main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>doomed<span class="w"> </span><span class="mi">100</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.001</span>

<span class="go">Compilation time: 0.001</span>

<span class="go">Typechecking time: 0.071</span>
</pre></div>
</div>
<p><strong>../../tests/sources/accumulate_twice2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">pred</span><span class="w"> </span><span class="nf">doomed</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>.<span class="w"></span>
<span class="kd">accumulate</span><span class="w"> </span>accumulated<span class="o">.</span><span class="w"></span>
<span class="kd">namespace</span><span class="w"> </span>other<span class="w"> </span>{ <span class="kd">accumulate</span><span class="w"> </span>accumulated<span class="o">.</span><span class="w"> </span>}
main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>doomed<span class="w"> </span><span class="mi">100</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>other.doomed<span class="w"> </span><span class="mi">100</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/accumulate_twice2.elpi&quot;, line 4, column 0, character 87:</span>
<span class="go"> Warning: constant other.doomed has no declared type.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.001</span>

<span class="go">Compilation time: 0.001</span>

<span class="go">Typechecking time: 0.080</span>
</pre></div>
</div>
<p><strong>../../tests/sources/accumulated.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span>doomed<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>fail<span class="o">.</span><span class="w"></span>
doomed<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="kd">,</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">-</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"> </span>doomed<span class="w"> </span><span class="nv">M</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/accumulated.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning: constant doomed has no declared type.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.070</span>
</pre></div>
</div>
<p><strong>../../tests/sources/ackermann.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% ack (s zero) (s zero) V.              yields V = s(s(s(zero)))   = 3</span>
<span class="c">% ack (s (s zero)) (s (s zero)) V.      yields V = s(s...(s zero)) = 7</span>
<span class="c">% ack (s (s (s zero))) (s zero) V.      yields V = s(s...(s zero)) = 13</span>
<span class="c">% ack (s (s (s zero))) (s (s zero)) V.  yields V = ....            = 29</span>
<span class="c">% ack (s (s (s (s zero)))) (s zero) V.  yields  nothing</span>

<span class="c">% ack   +int    +int  -int</span>
<span class="c">% ack(0, N, V) :- !, V is N + 1.</span>
<span class="c">% ack(M, 0, V) :- !, M2 is M - 1, ack(M2, 1, V).</span>
<span class="c">% ack(M, N, V) :- M2 is M - 1, N2 is N - 1, ack(M, N2, V2), ack(M2, V2, V).</span>


ack<span class="w"> </span>zero<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">N</span><span class="o">).</span><span class="w"></span>

ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span>zero<span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">M2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">M</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M2</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">)</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span><span class="w"></span>

ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">M2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">M</span><span class="kd">,</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">N2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">N</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N2</span><span class="w"> </span><span class="nv">V2</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M2</span><span class="w"> </span><span class="nv">V2</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ack<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">)))</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">)</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/ackermann.elpi&quot;, line 13, column 0, character 530:</span>
<span class="go"> Warning: constant zero has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/ackermann.elpi&quot;, line 13, column 0, character 530:</span>
<span class="go"> Warning:</span>
<span class="go"> constant s has no declared type. Did you mean std.set.private.set std.set.private.empty std.set.private.node std.set.private.height std.set.private.create std.set.private.bal std.set.private.add std.set.private.mem std.set.private.remove-min-binding std.set.private.min-binding std.set.private.merge std.set.private.remove std.set.private.cardinal std.set.private.elements std.set.make std.set.mem std.set.add std.set.remove std.set.cardinal std.set.elements std.spy std.spy! std.split-at std.spy-do! rex.split random.self_init std.string.concat std.string.map std.string.map.empty std.string.map.mem std.string.map.add std.string.map.remove std.string.map.find std.string.map.bindings std.string.set std.string.set.empty std.string.set.mem std.string.set.add std.string.set.remove std.string.set.union std.string.set.inter std.string.set.diff std.string.set.equal std.string.set.subset std.string.set.elements std.string.set.cardinal std.int.set std.int.set.empty std.int.set.mem std.int.set.add std.int.set.remove std.int.set.union std.int.set.inter std.int.set.diff std.int.set.equal std.int.set.subset std.int.set.elements std.int.set.cardinal std.loc.set std.loc.set.empty std.loc.set.mem std.loc.set.add std.loc.set.remove std.loc.set.union std.loc.set.inter std.loc.set.diff std.loc.set.equal std.loc.set.subset std.loc.set.elements std.loc.set.cardinal std.set std.set gc.set gc.stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/ackermann.elpi&quot;, line 13, column 0, character 530:</span>
<span class="go"> Warning: constant ack has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/ackermann.elpi&quot;, line 19, column 0, character 676:</span>
<span class="go"> Warning: V is linear: name it _V (discard) or V_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.076</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/asclause.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span>hard<span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="nv">P</span><span class="o">.</span><span class="w"></span>


simple<span class="w"> </span>(<span class="mi">1</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="nv">P</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>simple<span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"> </span>hard<span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>x<span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/asclause.elpi&quot;, line 5, column 0, character 36:</span>
<span class="go"> Warning: constant simple has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/asclause.elpi&quot;, line 2, column 0, character 1:</span>
<span class="go"> Warning: constant lam has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/asclause.elpi&quot;, line 2, column 0, character 1:</span>
<span class="go"> Warning: constant hard has no declared type.</span>
<span class="go">1</span>
<span class="go">lam c0 \ c0</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.076</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/beta.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span><span class="nv">y\</span><span class="w"> </span>f<span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>a<span class="w"> </span>b<span class="w"> </span><span class="kd">=</span><span class="w"> </span>f<span class="w"> </span>a<span class="w"> </span>b<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/beta.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning:</span>
<span class="go"> constant f has no declared type. Did you mean std.map.private.find std.map.find std.fatal-error std.fatal-error-w-data std.fold std.fold2 std.fold-map std.forall std.forall-ok std.forall2 std.filter std.flatten std.flip std.findall loc.fields std.string.map.find std.int.map.find std.loc.map.find gc.full ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/beta.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning:</span>
<span class="go"> constant b has no declared type. Did you mean std.set.private.bal std.map.private.bal std.map.private.bindings std.map.bindings std.string.map.bindings std.int.map.bindings std.loc.map.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/beta.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning:</span>
<span class="go"> constant a has no declared type. Did you mean std.set.private.add std.set.add std.map.private.add std.map.add std.assert! std.assert-ok! std.append std.appendR std.any-&gt;string std.string.map.add std.int.map.add std.loc.map.add std.string.set.add std.int.set.add std.loc.set.add ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.076</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/block.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">namespace</span><span class="w"> </span>xxx<span class="w"> </span>{
<span class="w"> </span>foo<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Fatal error: File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/block.elpi&quot;, line 1, column 0, character 0:matching } is missing</span>
</pre></div>
</div>
<p><strong>../../tests/sources/chr.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span>type app term -&gt; term -&gt; term.
type lam (term -&gt; term) -&gt; term.
type arr ty -&gt; ty -&gt; ty.
type nat ty.
type bool ty.
mode (term i o).
term (app HD ARG) TGT :- term HD (arr SRC TGT), term ARG SRC.
term (lam F) (arr SRC TGT) :- pi x\ term x SRC =&gt; term (F x) TGT.
term (uvar as X) T :- declare_constraint (term X T) [X].

len [] 0.
len [_|XS] N :- len XS M, N is M + 1.

constraint term {
  rule
     \ (term (uvar K LX) _) (term (uvar K LY) _)
     | (len LX N, len LY M, not(N = M))
   &lt;=&gt; (print &quot;wrong arity&quot; K, false).

  rule (GX ?- term (uvar K LX) TX)
     \ (GY ?- term (uvar K LY) TY)
     | (print &quot;compat&quot; GX &quot;|-&quot; K LX TX &quot;,&quot; GY &quot;|-&quot; K LY TY, 
        compatible GX LX GY LY CTXCONSTR)
   &lt;=&gt; (print &quot;NEW&quot; CTXCONSTR TX &quot;=&quot; TY, CTXCONSTR, TX = TY).

}

compatible _ [] _ [] [] :- !.
compatible GX [X|XS] GY [Y|YS] [TX = TY | K] :-
 (GX =&gt; term X TX),
 (GY =&gt; term Y TY),
 !,
 compatible GX XS GY YS K.
compatible _ _ _ _ [false].

main :-
  (term (lam x\ lam y\ app (app (F x y) x) y) T1_, 
   term (lam y\ lam x\ app (app (F x y) y) x) T2_),
  print &quot;1&quot;,
  (term (lam x \ X x) (arr A_ nat),
   term (lam x \ X x) (arr bool B_)),
  print &quot;2&quot;,
  not(term (lam x \ Y x) (arr C nat), term (lam x \ Y x) (arr bool C)),
  not(term (lam x \ Z x) (arr nat nat), term (lam x \ Z x) (arr bool D_)).

</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/chr.elpi&quot;, line 7, column 0, character 133:</span>
<span class="go"> Warning: constant term has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/chr.elpi&quot;, line 11, column 0, character 319:</span>
<span class="go"> Warning: constant len has no declared type. Did you mean std.length ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/chr.elpi&quot;, line 28, column 0, character 761:</span>
<span class="go"> Warning: constant compatible has no declared type.</span>
<span class="go">compat [term c1 (uvar frozen--501 []), term c0 (uvar frozen--502 [])] |- frozen--494 [</span>
<span class="go"> c1, c0] arr (uvar frozen--495 [c0, c1]) (arr (uvar frozen--496 [c0, c1]) (uvar frozen--497 [])) ,</span>
<span class="go"> [term c3 (uvar frozen--499 []), term c2 (uvar frozen--498 [])] |- frozen--494 [</span>
<span class="go"> c2, c3] arr (uvar frozen--498 []) (arr (uvar frozen--499 []) (uvar frozen--500 []))</span>
<span class="go">NEW [X0 = X1, X2 = X3] arr (X4 c0 c1) (arr (X5 c0 c1) X6) = arr X1 (arr X3 X7)</span>
<span class="go">1</span>
<span class="go">compat [term c0 bool] |- frozen--507 [c0] uvar frozen--508 [] , [term c1 (uvar frozen--509 [])] |-</span>
<span class="go"> frozen--507 [c1] nat</span>
<span class="go">NEW [bool = X8] X9 = nat</span>
<span class="go">2</span>
<span class="go">compat [term c0 bool] |- frozen--514 [c0] uvar frozen--515 [] , [term c1 (uvar frozen--515 [])] |-</span>
<span class="go"> frozen--514 [c1] nat</span>
<span class="go">NEW [bool = X10] X10 = nat</span>
<span class="go">compat [term c0 bool] |- frozen--520 [c0] uvar frozen--521 [] , [term c1 nat] |- frozen--520 [c1] nat</span>
<span class="go">NEW [bool = nat] X11 = nat</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.081</span>

<span class="go">Success:</span>

<span class="go">Time: 0.001</span>

<span class="go">Constraints:</span>
<span class="go"> {c0} : term c0 bool ?- term (X12 c0) nat  /* suspended on X12 */</span>
<span class="go"> {c0 c1} : term c1 X13, term c0 X13 ?- term (X14 c1 c0) (arr X13 (arr X13 X6))  /* suspended on X14 */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/chrGCD.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span>mode<span class="w"> </span>(gcd<span class="w"> </span>i<span class="w"> </span>i<span class="o">).</span><span class="w"></span>
<span class="kd">kind</span><span class="w"> </span><span class="nf">group</span><span class="w"> </span><span class="kt">type</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">group-1</span><span class="w"> </span><span class="kt">group</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">group-2</span><span class="w"> </span><span class="kt">group</span>.<span class="w"></span>

gcd<span class="w"> </span><span class="nv">A</span><span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>declare_constraint<span class="w"> </span>(gcd<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">B</span><span class="kd">]</span><span class="o">.</span><span class="w"></span>

<span class="c">% assert result is OK</span>
gcd<span class="w"> </span><span class="mi">11</span><span class="w"> </span>group-1<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;group 1 solved&quot;</span><span class="o">.</span><span class="w"></span>
gcd<span class="w"> </span><span class="mi">7</span><span class="w"> </span>group-2<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;group 2 solved&quot;</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>gcd<span class="w"> </span><span class="mi">99</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>gcd<span class="w"> </span><span class="mi">66</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>gcd<span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span>gcd<span class="w"> </span><span class="mi">22</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>gcd<span class="w"> </span><span class="mi">77</span><span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"></span>
<span class="w">        </span><span class="c">% we then force a resumption to check only GCDs are there</span>
<span class="w">        </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>group-1<span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>group-2<span class="o">.</span><span class="w"></span>

<span class="kd">constraint</span><span class="w"> </span><span class="nf">gcd </span>{<span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(gcd<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(gcd<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span>(<span class="nv">A</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">B</span><span class="o">).</span><span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(gcd<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(gcd<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span>(<span class="nv">A</span><span class="w"> </span><span class="kd">&lt;</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span><span class="kd">-</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>gcd<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">X</span><span class="o">).</span><span class="w"></span>
}<span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/chrGCD.elpi&quot;, line 6, column 0, character 74:</span>
<span class="go"> Warning: constant gcd has no declared type.</span>
<span class="go">group 1 solved</span>
<span class="go">group 2 solved</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.070</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/chrLEQ.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span>mode<span class="w"> </span>(leq<span class="w"> </span>i<span class="w"> </span>i<span class="o">).</span><span class="w"></span>
leq<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w">  </span>declare_constraint<span class="w"> </span>(leq<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">A</span><span class="kd">,</span><span class="nv">B</span><span class="kd">]</span><span class="o">.</span><span class="w"></span>
leq<span class="w"> </span><span class="nv">A</span><span class="w">         </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w">  </span>declare_constraint<span class="w"> </span>(leq<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">B</span><span class="kd">]</span><span class="o">.</span><span class="w"></span>
leq<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="w">         </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w">  </span>declare_constraint<span class="w"> </span>(leq<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">A</span><span class="kd">]</span><span class="o">.</span><span class="w"></span>

mode<span class="w"> </span>(ltn<span class="w"> </span>i<span class="w"> </span>i<span class="o">).</span><span class="w"></span>
ltn<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w">  </span>declare_constraint<span class="w"> </span>(ltn<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">A</span><span class="kd">,</span><span class="nv">B</span><span class="kd">]</span><span class="o">.</span><span class="w"></span>
ltn<span class="w"> </span><span class="nv">A</span><span class="w">         </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w">  </span>declare_constraint<span class="w"> </span>(ltn<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">B</span><span class="kd">]</span><span class="o">.</span><span class="w"></span>
ltn<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="w">         </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w">  </span>declare_constraint<span class="w"> </span>(ltn<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">A</span><span class="kd">]</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>leq<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"> </span>leq<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="kd">,</span><span class="w"> </span>not<span class="w"> </span>(ltn<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>ltn<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"> </span>not(<span class="nv">A</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">C</span><span class="o">).</span><span class="w"></span>

<span class="kd">constraint</span><span class="w"> </span><span class="nf">leq ltn </span>{<span class="w"></span>
<span class="w">  </span><span class="c">% incompat (FIRST!!)</span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>false<span class="o">.</span><span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>false<span class="o">.</span><span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>false<span class="o">.</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="c">% refl</span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="o">).</span><span class="w"></span>

<span class="w">  </span><span class="c">% atisym</span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(<span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X</span><span class="o">).</span><span class="w"></span>

<span class="w">  </span><span class="c">% trans</span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Z</span><span class="o">).</span><span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Z</span><span class="o">).</span><span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Z</span><span class="o">).</span><span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Z</span><span class="o">).</span><span class="w"></span>

<span class="w">  </span><span class="c">% idempotence</span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">).</span><span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">).</span><span class="w"></span>

}<span class="w"></span>

<span class="c">% vim:set ft=lprolog:</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/chrLEQ.elpi&quot;, line 7, column 0, character 238:</span>
<span class="go"> Warning: constant ltn has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/chrLEQ.elpi&quot;, line 2, column 0, character 16:</span>
<span class="go"> Warning: constant leq has no declared type.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.083</span>

<span class="go">Success:</span>

<span class="go">Time: 0.001</span>

<span class="go">Constraints:</span>
<span class="go"> ltn X0 X1  /* suspended on X0, X1 */ leq X0 X1  /* suspended on X0, X1 */</span>
<span class="go"> leq X2 X1  /* suspended on X2, X1 */ ltn X0 X2  /* suspended on X0, X2 */</span>
<span class="go"> leq X0 X2  /* suspended on X0, X2 */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/chr_nokey.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">type</span><span class="w"> </span><span class="nf">test</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.<span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>declare_constraint<span class="w"> </span>(test<span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">],</span><span class="w"> </span>declare_constraint<span class="w"> </span>(test<span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">]</span><span class="o">.</span><span class="w"></span>

<span class="kd">constraint</span><span class="w"> </span><span class="nf">test </span>{<span class="w"></span>

<span class="w"> </span><span class="k k-Mode">:name</span><span class="w"> </span><span class="s2">&quot;fst&quot;</span><span class="w"></span>
<span class="w"> </span><span class="kd">rule</span><span class="w"> </span>(test<span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(test<span class="w"> </span><span class="mi">2</span><span class="o">).</span><span class="w"></span>

<span class="w"> </span><span class="kd">rule</span><span class="w"> </span>(test<span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>fail<span class="o">.</span><span class="w"></span>

}<span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.065</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>
<span class="go"> test 1  /* suspended on X0 */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/chr_nokey2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>declare_constraint<span class="w"> </span>foo<span class="w"> </span><span class="kd">[],</span><span class="w"> </span>declare_constraint<span class="w"> </span>(bar<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[],</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

<span class="kd">constraint</span><span class="w"> </span><span class="nf">foo bar </span>{<span class="w"> </span><span class="kd">rule</span><span class="w"> </span>foo<span class="w"> </span>(bar<span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>false<span class="o">.</span><span class="w"> </span><span class="kd">rule</span><span class="w"> </span>(bar<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>true<span class="o">).</span><span class="w"> </span>}<span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/chr_nokey2.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning: constant foo has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/chr_nokey2.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning: constant bar has no declared type.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.072</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>
<span class="go"> bar true  /* suspended on  */ foo  /* suspended on  */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/chr_not_clique.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">constraint</span><span class="w"> </span><span class="nf">a </span>{<span class="w"></span>

<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>b<span class="o">.</span><span class="w"></span>

}<span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Fatal error: CHR rule File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/chr_not_clique.elpi&quot;, line 3, column 3, character 19:: matches b which is not a constraint on which it is applied. Check the list of predicates after the &quot;constraint&quot; keyword.</span>
</pre></div>
</div>
<p><strong>../../tests/sources/chr_sem.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>declare_constraint<span class="w"> </span>a<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">],</span><span class="w"></span>
<span class="w">        </span>declare_constraint<span class="w"> </span>b<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">],</span><span class="w"></span>
<span class="w">        </span>declare_constraint<span class="w"> </span>b<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">],</span><span class="w"></span>
<span class="w">        </span>declare_constraint<span class="w"> </span>d<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">]</span><span class="o">.</span><span class="w"></span>

<span class="kd">constraint</span><span class="w"> </span><span class="nf">a b c d </span>{<span class="w"></span>
<span class="w"> </span><span class="kd">rule</span><span class="w"> </span>a<span class="w"> </span>(d<span class="o">)</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>b<span class="w"> </span>b<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(print<span class="w"> </span>c<span class="kd">,</span><span class="w"> </span>declare_constraint<span class="w"> </span>c<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">]</span><span class="o">).</span><span class="w"></span>
<span class="w"> </span><span class="kd">rule</span><span class="w"> </span>c<span class="w"> </span>c<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>fail<span class="o">.</span><span class="w"></span>

}<span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/chr_sem.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning:</span>
<span class="go"> constant d has no declared type. Did you mean std.debug-print std.drop std.drop-last std.do! std.do-ok! std.string.set.diff std.int.set.diff std.loc.set.diff ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/chr_sem.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning:</span>
<span class="go"> constant b has no declared type. Did you mean std.set.private.bal std.map.private.bal std.map.private.bindings std.map.bindings std.string.map.bindings std.int.map.bindings std.loc.map.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/chr_sem.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning:</span>
<span class="go"> constant a has no declared type. Did you mean std.set.private.add std.set.add std.map.private.add std.map.add std.assert! std.assert-ok! std.append std.appendR std.any-&gt;string std.string.map.add std.int.map.add std.loc.map.add std.string.set.add std.int.set.add std.loc.set.add ?</span>
<span class="go">c</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.072</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>
<span class="go"> c  /* suspended on X0 */ d  /* suspended on X0 */ a  /* suspended on X0 */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/conj2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>test1<span class="kd">,</span><span class="w"> </span>test2<span class="o">.</span><span class="w"></span>

test1<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>true<span class="w"> </span><span class="kd">&amp;</span><span class="w"> </span>true<span class="w"> </span><span class="kd">&amp;</span><span class="w"> </span>true<span class="o">.</span><span class="w"></span>
test2<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span>true<span class="w"> </span><span class="kd">&amp;</span><span class="w"> </span>true<span class="kd">,</span><span class="w"> </span>false<span class="kd">],</span><span class="w"> </span>std.length<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/conj2.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning: constant test2 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/conj2.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning: constant test1 has no declared type.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.074</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/ctx_loading.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">constraint</span><span class="w"> </span><span class="nf">a b c d1 d2 d3 d11 d22 d33 </span>{<span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d1<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span>(print<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>declare_constraint<span class="w"> </span><span class="o">(</span>d11<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">]</span><span class="o">).</span><span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d2<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span>(print<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>declare_constraint<span class="w"> </span><span class="o">(</span>d22<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">]</span><span class="o">).</span><span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d3<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span>(print<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>declare_constraint<span class="w"> </span><span class="o">(</span>d33<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">]</span><span class="o">).</span><span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d1<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d11<span class="w"> </span><span class="nv">X</span><span class="o">).</span><span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d2<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d22<span class="w"> </span><span class="nv">X</span><span class="o">).</span><span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d3<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d33<span class="w"> </span><span class="nv">X</span><span class="o">).</span><span class="w"></span>
}<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">p</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">a</span><span class="w"> </span><span class="kt">prop</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">b</span><span class="w"> </span><span class="kt">prop</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">c</span><span class="w"> </span><span class="kt">prop</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">d1, d2, d3, d11, d22, d33</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.<span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>p<span class="w"> </span>b<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>p<span class="w"> </span>a<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>p<span class="w"> </span><span class="nv">W</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">W</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>a<span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="kd">[</span>p<span class="w"> </span>a<span class="kd">,</span><span class="w"> </span>p<span class="w"> </span>b<span class="kd">]</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>p<span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>a<span class="kd">,</span><span class="w"> </span>
<span class="w">  </span>(p<span class="w"> </span>a<span class="kd">,</span><span class="w"> </span>p<span class="w"> </span>b<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>p<span class="w"> </span><span class="nv">Z</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>a<span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="kd">[</span>a<span class="kd">,</span><span class="w"> </span>b<span class="kd">,</span><span class="w"> </span>c<span class="kd">]</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w">   </span>declare_constraint<span class="w"> </span>(d1<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">],</span><span class="w"></span>
<span class="w">  </span>c<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>b<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>a<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>declare_constraint<span class="w"> </span>(d2<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">],</span><span class="w"></span>
<span class="w">  </span>(a<span class="kd">,</span><span class="w"> </span>b<span class="kd">,</span><span class="w"> </span>c<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w">   </span>declare_constraint<span class="w"> </span>(d3<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">],</span><span class="w"></span>
<span class="w">  </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>a<span class="o">.</span><span class="w"></span>
<span class="w">	</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[a, b, c]</span>
<span class="go">[a, b, c]</span>
<span class="go">[a, b, c]</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.067</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/cut.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">/* To test: query q X. The only answer should be X = ok. */</span><span class="w"></span>
q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>a<span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>
q<span class="w"> </span>ok<span class="o">.</span><span class="w"></span>

a<span class="w"> </span>ko<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>b<span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>c<span class="w"> </span><span class="nv">Y</span><span class="o">.</span><span class="w"></span>
a<span class="w"> </span>two<span class="o">.</span><span class="w"></span>

b<span class="w"> </span>three<span class="o">.</span><span class="w"></span>
b<span class="w"> </span>four<span class="o">.</span><span class="w"></span>

c<span class="w"> </span>four<span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut.elpi&quot;, line 6, column 0, character 100:</span>
<span class="go"> Warning: constant two has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut.elpi&quot;, line 8, column 0, character 108:</span>
<span class="go"> Warning: constant three has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut.elpi&quot;, line 2, column 0, character 60:</span>
<span class="go"> Warning: constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut.elpi&quot;, line 5, column 0, character 79:</span>
<span class="go"> Warning: constant ko has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut.elpi&quot;, line 9, column 0, character 117:</span>
<span class="go"> Warning: constant four has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut.elpi&quot;, line 5, column 0, character 79:</span>
<span class="go"> Warning:</span>
<span class="go"> constant c has no declared type. Did you mean std.set.private.create std.set.private.cardinal std.set.cardinal std.map.private.create std.string.concat std.string.set.cardinal std.int.set.cardinal std.loc.set.cardinal trace.counter gc.compact ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut.elpi&quot;, line 5, column 0, character 79:</span>
<span class="go"> Warning:</span>
<span class="go"> constant b has no declared type. Did you mean std.set.private.bal std.map.private.bal std.map.private.bindings std.map.bindings std.string.map.bindings std.int.map.bindings std.loc.map.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut.elpi&quot;, line 2, column 0, character 60:</span>
<span class="go"> Warning:</span>
<span class="go"> constant a has no declared type. Did you mean std.set.private.add std.set.add std.map.private.add std.map.add std.assert! std.assert-ok! std.append std.appendR std.any-&gt;string std.string.map.add std.int.map.add std.loc.map.add std.string.set.add std.int.set.add std.loc.set.add ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.090</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/cut2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">/* To test run q X; the only expected result is X=ok.</span>
<span class="w">   </span><span class="nv">This</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span>different<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>brain-damaged<span class="w"> </span>semantics<span class="w"> </span>of<span class="w"> </span><span class="nv">Teyjus</span><span class="w"></span>
<span class="w">   </span>and<span class="w"> </span>consistent<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>implicit<span class="w"> </span>declaration<span class="w"></span>
<span class="w">   </span><span class="kd">;</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span><span class="w"></span>
<span class="w">   </span><span class="kd">;</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">B</span><span class="w"></span>
<span class="kd">*/</span><span class="w"></span>
q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>c<span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>x<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>e<span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>
q<span class="w"> </span>ok<span class="o">.</span><span class="w"></span>

c<span class="w"> </span>one<span class="o">.</span><span class="w"></span>
c<span class="w"> </span>two<span class="o">.</span><span class="w"></span>

x<span class="w"> </span>two<span class="w"> </span>ko1<span class="o">.</span><span class="w"></span>

e<span class="w"> </span>ko2<span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut2.elpi&quot;, line 7, column 0, character 198:</span>
<span class="go"> Warning: constant x has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut2.elpi&quot;, line 11, column 0, character 240:</span>
<span class="go"> Warning: constant two has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut2.elpi&quot;, line 7, column 0, character 198:</span>
<span class="go"> Warning: constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut2.elpi&quot;, line 10, column 0, character 233:</span>
<span class="go"> Warning: constant one has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut2.elpi&quot;, line 15, column 0, character 260:</span>
<span class="go"> Warning: constant ko2 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut2.elpi&quot;, line 13, column 0, character 248:</span>
<span class="go"> Warning: constant ko1 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut2.elpi&quot;, line 7, column 0, character 198:</span>
<span class="go"> Warning:</span>
<span class="go"> constant e has no declared type. Did you mean std.set.private.empty std.set.private.elements std.set.elements std.map.private.empty std.exists std.exists2 std.string.map.empty std.int.map.empty std.loc.map.empty std.string.set.empty std.string.set.equal std.string.set.elements std.int.set.empty std.int.set.equal std.int.set.elements std.loc.set.empty std.loc.set.equal std.loc.set.elements ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut2.elpi&quot;, line 7, column 0, character 198:</span>
<span class="go"> Warning:</span>
<span class="go"> constant c has no declared type. Did you mean std.set.private.create std.set.private.cardinal std.set.cardinal std.map.private.create std.string.concat std.string.set.cardinal std.int.set.cardinal std.loc.set.cardinal trace.counter gc.compact ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.090</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/cut3.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% Test with q X; should yield X=ok</span>

q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>a<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>b<span class="kd">,</span><span class="w"> </span>c<span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

a<span class="w"> </span>ko<span class="o">.</span><span class="w"></span>
a<span class="w"> </span>ok<span class="o">.</span><span class="w"></span>

b<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
b<span class="o">.</span><span class="w"></span>

c<span class="w"> </span>ok<span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut3.elpi&quot;, line 3, column 0, character 36:</span>
<span class="go"> Warning: constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut3.elpi&quot;, line 5, column 0, character 57:</span>
<span class="go"> Warning: constant ko has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut3.elpi&quot;, line 3, column 0, character 36:</span>
<span class="go"> Warning:</span>
<span class="go"> constant c has no declared type. Did you mean std.set.private.create std.set.private.cardinal std.set.cardinal std.map.private.create std.string.concat std.string.set.cardinal std.int.set.cardinal std.loc.set.cardinal trace.counter gc.compact ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut3.elpi&quot;, line 3, column 0, character 36:</span>
<span class="go"> Warning:</span>
<span class="go"> constant b has no declared type. Did you mean std.set.private.bal std.map.private.bal std.map.private.bindings std.map.bindings std.string.map.bindings std.int.map.bindings std.loc.map.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut3.elpi&quot;, line 3, column 0, character 36:</span>
<span class="go"> Warning:</span>
<span class="go"> constant a has no declared type. Did you mean std.set.private.add std.set.add std.map.private.add std.map.add std.assert! std.assert-ok! std.append std.appendR std.any-&gt;string std.string.map.add std.int.map.add std.loc.map.add std.string.set.add std.int.set.add std.loc.set.add ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.081</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/cut4.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% Test: main. Should not fail.</span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.067</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/cut5.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">/* To test: query q X. The only answer should be X = ok. */</span><span class="w"></span>
q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>a<span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>
q<span class="w"> </span>ok<span class="o">.</span><span class="w"></span>

a<span class="w"> </span>ko<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>b<span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>d<span class="w"> </span><span class="nv">Z</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>c<span class="w"> </span><span class="nv">Z</span><span class="o">.</span><span class="w"></span>
a<span class="w"> </span>two<span class="o">.</span><span class="w"></span>

b<span class="w"> </span>three<span class="o">.</span><span class="w"></span>
b<span class="w"> </span>four<span class="o">.</span><span class="w"></span>

c<span class="w"> </span>four<span class="o">.</span><span class="w"></span>

d<span class="w"> </span>three<span class="o">.</span><span class="w"></span>
d<span class="w"> </span>four<span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut5.elpi&quot;, line 6, column 0, character 108:</span>
<span class="go"> Warning: constant two has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut5.elpi&quot;, line 8, column 0, character 116:</span>
<span class="go"> Warning: constant three has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut5.elpi&quot;, line 2, column 0, character 60:</span>
<span class="go"> Warning: constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut5.elpi&quot;, line 5, column 0, character 79:</span>
<span class="go"> Warning: constant ko has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut5.elpi&quot;, line 9, column 0, character 125:</span>
<span class="go"> Warning: constant four has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut5.elpi&quot;, line 5, column 0, character 79:</span>
<span class="go"> Warning:</span>
<span class="go"> constant d has no declared type. Did you mean std.debug-print std.drop std.drop-last std.do! std.do-ok! std.string.set.diff std.int.set.diff std.loc.set.diff ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut5.elpi&quot;, line 5, column 0, character 79:</span>
<span class="go"> Warning:</span>
<span class="go"> constant c has no declared type. Did you mean std.set.private.create std.set.private.cardinal std.set.cardinal std.map.private.create std.string.concat std.string.set.cardinal std.int.set.cardinal std.loc.set.cardinal trace.counter gc.compact ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut5.elpi&quot;, line 5, column 0, character 79:</span>
<span class="go"> Warning:</span>
<span class="go"> constant b has no declared type. Did you mean std.set.private.bal std.map.private.bal std.map.private.bindings std.map.bindings std.string.map.bindings std.int.map.bindings std.loc.map.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut5.elpi&quot;, line 2, column 0, character 60:</span>
<span class="go"> Warning:</span>
<span class="go"> constant a has no declared type. Did you mean std.set.private.add std.set.add std.map.private.add std.map.add std.assert! std.assert-ok! std.append std.appendR std.any-&gt;string std.string.map.add std.int.map.add std.loc.map.add std.string.set.add std.int.set.add std.loc.set.add ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut5.elpi&quot;, line 5, column 0, character 79:</span>
<span class="go"> Warning: Y is linear: name it _Y (discard) or Y_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.097</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/cut6.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% q X should yield X=ok</span>

q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>a<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>b<span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

a<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>c<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>

c<span class="w"> </span>ok<span class="o">.</span><span class="w"></span>
c<span class="w"> </span>ko<span class="o">.</span><span class="w"></span>

b<span class="w"> </span>ko<span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut6.elpi&quot;, line 3, column 0, character 25:</span>
<span class="go"> Warning: constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut6.elpi&quot;, line 9, column 0, character 75:</span>
<span class="go"> Warning: constant ko has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut6.elpi&quot;, line 6, column 0, character 53:</span>
<span class="go"> Warning:</span>
<span class="go"> constant c has no declared type. Did you mean std.set.private.create std.set.private.cardinal std.set.cardinal std.map.private.create std.string.concat std.string.set.cardinal std.int.set.cardinal std.loc.set.cardinal trace.counter gc.compact ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut6.elpi&quot;, line 4, column 0, character 40:</span>
<span class="go"> Warning:</span>
<span class="go"> constant b has no declared type. Did you mean std.set.private.bal std.map.private.bal std.map.private.bindings std.map.bindings std.string.map.bindings std.int.map.bindings std.loc.map.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/cut6.elpi&quot;, line 3, column 0, character 25:</span>
<span class="go"> Warning:</span>
<span class="go"> constant a has no declared type. Did you mean std.set.private.add std.set.add std.map.private.add std.map.add std.assert! std.assert-ok! std.append std.appendR std.any-&gt;string std.string.map.add std.int.map.add std.loc.map.add std.string.set.add std.int.set.add std.loc.set.add ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.097</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/deep_indexing.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% select should only find 2 clauses (the last 2) since indexing at level 3 drops the others</span>
<span class="c">% ./elpi -test tests/sources/deep_indexing.elpi -no-tc -trace-on -trace-at run 1 300 -trace-only select</span>

<span class="kd">kind</span><span class="w"> </span><span class="nf">term</span><span class="w"> </span><span class="kt">type</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">g</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>

<span class="k k-Mode">:index</span><span class="w">(</span><span class="mi">3</span>)<span class="w"></span>
<span class="kd">pred</span><span class="w"> </span><span class="nf">find</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">term</span>.<span class="w"></span>
find<span class="w"> </span>g<span class="o">.</span><span class="w"></span>
find<span class="w"> </span>(f<span class="w"> </span>g<span class="o">).</span><span class="w"></span>
find<span class="w"> </span>(f<span class="w"> </span><span class="o">(</span>f<span class="w"> </span>g<span class="o">)).</span><span class="w"></span>
find<span class="w"> </span>(f<span class="w"> </span><span class="o">(</span>f<span class="w"> </span><span class="o">(</span>f<span class="w"> </span>g<span class="o">))).</span><span class="w"></span>
find<span class="w"> </span>(f<span class="w"> </span><span class="o">(</span>f<span class="w"> </span><span class="o">(</span>f<span class="w"> </span><span class="o">(</span>f<span class="w"> </span>g<span class="o">)))).</span><span class="w"></span>


main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>find<span class="w"> </span>(f<span class="w"> </span><span class="o">(</span>f<span class="w"> </span><span class="o">(</span>f<span class="w"> </span>g<span class="o">))).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.067</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/discard.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>foo<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">_</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="nv">_</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="mi">4</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="nv">_</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="nv">_</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">_</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="nv">_Foo</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>bar<span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span><span class="nv">_Foo</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>x<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/discard.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning: constant foo has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/discard.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning: constant bar has no declared type.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.069</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/elpi_only_llam.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>p<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>p<span class="w"> </span>(f<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>f<span class="w"> </span>x<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/elpi_only_llam.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning: constant x has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/elpi_only_llam.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning:</span>
<span class="go"> constant p has no declared type. Did you mean std.set.private.set std.set.private.empty std.set.private.node std.set.private.height std.set.private.create std.set.private.bal std.set.private.add std.set.private.mem std.set.private.remove-min-binding std.set.private.min-binding std.set.private.merge std.set.private.remove std.set.private.cardinal std.set.private.elements std.map.private.map std.map.private.empty std.map.private.node std.map.private.height std.map.private.create std.map.private.bal std.map.private.add std.map.private.find std.map.private.remove-min-binding std.map.private.min-binding std.map.private.merge std.map.private.remove std.map.private.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/elpi_only_llam.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning:</span>
<span class="go"> constant f has no declared type. Did you mean std.map.private.find std.map.find std.fatal-error std.fatal-error-w-data std.fold std.fold2 std.fold-map std.forall std.forall-ok std.forall2 std.filter std.flatten std.flip std.findall loc.fields std.string.map.find std.int.map.find std.loc.map.find gc.full ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.072</span>
<span class="go">Fatal error: Unification problem outside the pattern fragment. ((Data.Term.App (f, (Data.Term.Const x), [])) == (Data.Term.AppUVar (</span>
<span class="go">   { Data.Term.contents = please extend this printer; uid_private = 41116 },</span>
<span class="go">   0,</span>
<span class="go">   [(Data.Term.UVar (</span>
<span class="go">       { Data.Term.contents = please extend this printer; uid_private = 41115</span>
<span class="go">         },</span>
<span class="go">       0, 0))</span>
<span class="go">     ]</span>
<span class="go">   ))) Pass -delay-problems-outside-pattern-fragment (elpi command line utility) or set delay_outside_fragment to true (Elpi_API) in order to delay (deprecated, for Teyjus compatibility).</span>
</pre></div>
</div>
<p><strong>../../tests/sources/end_comment.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="o">.</span><span class="w"></span>
<span class="c">% foo </span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.062</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/eta.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span>kind tm type.
type c (tm -&gt; A) -&gt; tm.
macro @ctx A :- c (_\ A). % to have depth &gt; 0 in unif

% to test the indexing
k1 (x\ g x).
k2 g.

%mode (foo i i).
pred foo i:(X -&gt; X), i:(X -&gt; X -&gt; X).
foo X (x1 \ (x2 \ X x2)) :- (print X).
%% Fails, but should output `y`

main :-
  pi f y\
    % 4 branches in unif
    @ctx (x\ f x) = @ctx f,
    @ctx f = @ctx (x\ f x),
    @ctx (x\ f y x) = @ctx (f y),
    @ctx (f y) = @ctx (x\ f y x),

    % put some uvar around
    @ctx (f (X y)) = @ctx (x\ f y x), print X,
    @ctx (x\ f y x) = @ctx (f (Y y)), print Y,

    % index + adepth=2 &lt;&gt; bdepth=0
    k1 g,
    k2 (x\ g x),
    
    % regression #135
    foo y (x1 \ (x2 \ y x2))
.
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta.elpi&quot;, line 7, column 0, character 129:</span>
<span class="go"> Warning: constant k2 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta.elpi&quot;, line 6, column 0, character 116:</span>
<span class="go"> Warning: constant k1 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta.elpi&quot;, line 6, column 0, character 116:</span>
<span class="go"> Warning: constant g has no declared type. Did you mean gc.get ?</span>
<span class="go">c2 \ c2</span>
<span class="go">c2 \ c2</span>
<span class="go">c1</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.072</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/eta_as.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span>pred as_1 i:any.
pred as_2 i:any.
pred as_3 i:any.

pred uvar_1 i:any.
pred uvar_2 i:any.
pred uvar_3 i:any.
pred uvar_4 i:A.
pred uvar_5 i:A.
pred uvar_6 i:A.

pred test-as.
pred test-uvar.
pred test-var.
pred test-declare-constraint.

uvar_1 (bar (uvar K Args)) :- std.assert! (var K) &quot;uvar_1 bar X, not a var&quot;, print K Args.
uvar_2 (bar X) :- std.assert! (var X K Args) &quot;uvar_2 bar X, not a var&quot;, print K Args.
uvar_3 (uvar K) :- std.assert! (var K) &quot;uvar_3 X, not a var&quot;, print K.
uvar_4 (uvar K Args) :- std.assert! (var K) &quot;uvar_4 X, not a var&quot;, std.assert! (distinct_names Args) &quot;uvar_4 not in pattern&quot;.
uvar_5 (uvar K Args) :- std.assert! (var K) &quot;uvar_5 X, not a var&quot;, distinct_names Args.

uvar_6 X :- fail.
uvar_6 (uvar as X) :- print X.

as_1 (bar (uvar as K)) :- std.assert! (var K) &quot;bar (uvar as_1 X), not a var&quot;, print K.
as_2 (uvar as K) :- std.assert! (var K) &quot;uvar as_2 X, not a var&quot;, print K.
as_3 (uvar as K) :- std.assert! (var K) &quot;uvar as_3 X, not a var&quot;, print K.

pred unif_1 o:A.
pred unif_2 o:A.

unif_1 (x\ X x).
unif_2 (x\ y\ X x y).


tests-uvar :-
  print &quot;--------- uvar_1&quot;,
  not(uvar_1 (bar (x \ u))),
  print &quot;--------- uvar_2&quot;,
  (pi x \ (uvar_2 (bar (X x)))),
  print &quot;--------- uvar_3&quot;,
  not (uvar_3 (x \ X0)),
  print &quot;--------- uvar_3 bis&quot;,
  uvar_3 (x \ y\ X01 x y),
  print &quot;--------- uvar_4&quot;,
  uvar_4 X1,
  print &quot;--------- uvar_4 bis&quot;,
  not(uvar_4 (x \ X2)),
  print &quot;--------- uvar_4 ter&quot;,
  uvar_4 (x \ X3 x),
  print &quot;--------- uvar_4 quater&quot;,
  (pi u\ uvar_4 (x \ X4 u x)),
  print &quot;--------- uvar_5&quot;,
  not (uvar_5 (x \ X5 u x)),
  print &quot;--------- uvar_6&quot;,
  uvar_6 (x \ X6 x), var X6.

tests-as :-
  print &quot;---------- as_1&quot;,
  not(as_1 (x \ bar u)), % fails because (bar (uvar as K) x ==!== bar u)
  print &quot;---------- as_1 bis&quot;,
  not(as_1 (x \ bar u x)), % fails because u is not flexible (input mode)
  print &quot;---------- as_1 ter&quot;,
     (as_1 (x \ bar (X2 x) x)), % works but X2 is pruned
       (pi a\ var (X2 a) _ []), % assert pruning of X2
  print &quot;---------- as_2&quot;,
     (as_2 (x \ X1 x)) , % works
       (pi a\ var (X1 a) _ [a]), % assert X1 was not pruned
  print &quot;---------- as_3&quot;,
  not (as_3 (x \ X0)).

test-unif :-
    print &quot;---------- unif_1&quot;,
    unif_1 X,
    print &quot;---------- unif_1 bis&quot;,
    unif_1 (x\ X1 x),
    print &quot;---------- unif_1 ter&quot;,
    unif_1 (x\ y\ X2 x y),
    print &quot;---------- unif_2&quot;,
    unif_2 X3,
    print &quot;---------- unif_2 bis&quot;,
    unif_2 (x\ X4 x),
    print &quot;---------- unif_2 ter&quot;,
    unif_2 (x\ y\ X5 x y),
    print &quot;---------- unif_zero&quot;,
    (x\ X6 x) = X6.

test-var :-
    print &quot;---------- var 1&quot;,
   pi x \ (var (y \ X x y)),
    print &quot;---------- var 2&quot;,
   pi x \ (var (y \ X c y)), 
    print &quot;---------- var 3&quot;,
   pi x z \ (var (y \ X x y)).

test-declare-constraint :-
  declare_constraint false [x\ X x],
  not(X = 1).

main :- tests-uvar, tests-as, test-unif, test-var, test-declare-constraint.
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 37, column 0, character 1064:</span>
<span class="go"> Warning:</span>
<span class="go"> constant u has no declared type. Did you mean std.unsafe-cast std.unzip std.string.set.union std.int.set.union std.loc.set.union ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 37, column 0, character 1064:</span>
<span class="go"> Warning: constant tests-uvar has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 59, column 0, character 1639:</span>
<span class="go"> Warning: constant tests-as has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 73, column 0, character 2170:</span>
<span class="go"> Warning: constant test-unif has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 89, column 0, character 2567:</span>
<span class="go"> Warning:</span>
<span class="go"> constant c has no declared type. Did you mean std.set.private.create std.set.private.cardinal std.set.cardinal std.map.private.create std.string.concat std.string.set.cardinal std.int.set.cardinal std.loc.set.cardinal trace.counter gc.compact ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 17, column 0, character 237:</span>
<span class="go"> Warning: constant bar has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 59, column 0, character 1639:</span>
<span class="go"> Error: (bar u) has type any but is applied to c3</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 97, column 0, character 2760:</span>
<span class="go"> Error: 1 has type int but is used with type (X24 c1 -&gt; X25)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 97, column 0, character 2760:</span>
<span class="go"> Error: 1 has type int but is used with type (X26 c1 -&gt; X27)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 23, column 0, character 700:</span>
<span class="go"> Warning: X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 33, column 0, character 1023:</span>
<span class="go"> Warning: X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 34, column 0, character 1040:</span>
<span class="go"> Warning: X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 37, column 0, character 1064:</span>
<span class="go"> Warning: X5 is linear: name it _X5 (discard) or X5_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 37, column 0, character 1064:</span>
<span class="go"> Warning: X4 is linear: name it _X4 (discard) or X4_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 37, column 0, character 1064:</span>
<span class="go"> Warning: X3 is linear: name it _X3 (discard) or X3_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 37, column 0, character 1064:</span>
<span class="go"> Warning: X2 is linear: name it _X2 (discard) or X2_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 37, column 0, character 1064:</span>
<span class="go"> Warning: X1 is linear: name it _X1 (discard) or X1_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 37, column 0, character 1064:</span>
<span class="go"> Warning: X01 is linear: name it _X01 (discard) or X01_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 37, column 0, character 1064:</span>
<span class="go"> Warning: X0 is linear: name it _X0 (discard) or X0_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 37, column 0, character 1064:</span>
<span class="go"> Warning: X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 59, column 0, character 1639:</span>
<span class="go"> Warning: X0 is linear: name it _X0 (discard) or X0_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 73, column 0, character 2170:</span>
<span class="go"> Warning: X5 is linear: name it _X5 (discard) or X5_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 73, column 0, character 2170:</span>
<span class="go"> Warning: X4 is linear: name it _X4 (discard) or X4_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 73, column 0, character 2170:</span>
<span class="go"> Warning: X3 is linear: name it _X3 (discard) or X3_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 73, column 0, character 2170:</span>
<span class="go"> Warning: X2 is linear: name it _X2 (discard) or X2_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 73, column 0, character 2170:</span>
<span class="go"> Warning: X1 is linear: name it _X1 (discard) or X1_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 73, column 0, character 2170:</span>
<span class="go"> Warning: X is linear: name it _X (discard) or X_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.001</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.091</span>
<span class="go">Type error. To ignore it, pass -no-tc.</span>
</pre></div>
</div>
<p><strong>../../tests/sources/even-odd.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">kind</span><span class="w"> </span><span class="nf">nat</span><span class="w"> </span><span class="kt">type</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">zero</span><span class="w"> </span><span class="kt">nat</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">succ</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">nat</span>.<span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">odd</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">nat</span>.<span class="w"></span>
<span class="kd">pred</span><span class="w"> </span><span class="nf">even</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">nat</span>.<span class="w"></span>
<span class="kd">pred</span><span class="w"> </span><span class="nf">double</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">nat</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">nat</span>.<span class="w"></span>

even<span class="w"> </span>zero<span class="o">.</span><span class="w"></span>
odd<span class="w"> </span>(succ<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>even<span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>
even<span class="w"> </span>(succ<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>odd<span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>
even<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>var<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>declare_constraint<span class="w"> </span>(even<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">]</span><span class="o">.</span><span class="w"></span>
odd<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>var<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>declare_constraint<span class="w"> </span>(odd<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">]</span><span class="o">.</span><span class="w"></span>

double<span class="w"> </span>zero<span class="w"> </span>zero<span class="o">.</span><span class="w"></span>
double<span class="w"> </span>(succ<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(succ<span class="w"> </span><span class="o">(</span>succ<span class="w"> </span><span class="nv">Y</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>double<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">.</span><span class="w"></span>
double<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>var<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>declare_constraint<span class="w"> </span>(double<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">]</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>odd<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>not(<span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>zero<span class="o">)</span><span class="kd">,</span><span class="w"> </span>not(double<span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="nv">X</span><span class="o">).</span><span class="w"></span>

<span class="kd">constraint</span><span class="w"> </span><span class="nf">even odd double </span>{<span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(even<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(odd<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>fail<span class="o">.</span><span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(double<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(even<span class="w"> </span><span class="nv">Y</span><span class="o">).</span><span class="w"></span>
}<span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/even-odd.elpi&quot;, line 19, column 0, character 395:</span>
<span class="go"> Warning: Z is linear: name it _Z (discard) or Z_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.063</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>
<span class="go"> odd X0  /* suspended on X0 */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/findall.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">pred</span><span class="w"> </span><span class="nf">p</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>.<span class="w"></span>
p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>

test1<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>std.findall<span class="w"> </span>(p<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span>p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"> </span>p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="kd">,</span><span class="w"> </span>p<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="kd">]</span><span class="o">.</span><span class="w"></span>
test2<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>std.findall<span class="w"> </span>(p<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"> </span>p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="kd">,</span><span class="w"> </span>p<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="kd">],</span><span class="w"> </span>not(var<span class="w"> </span><span class="nv">X</span><span class="o">).</span><span class="w"></span>
test3<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">q</span>\<span class="w"></span>
<span class="w">    </span>q<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"></span>
<span class="w">    </span>q<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"></span>
<span class="w">    </span>q<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"></span>
<span class="w">      </span>(std.findall<span class="w"> </span><span class="o">(</span>q<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="kd">,</span><span class="w"> </span>q<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="kd">,</span><span class="w"> </span>q<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="kd">],</span><span class="w"> </span>not<span class="w"> </span><span class="o">(</span>var<span class="w"> </span><span class="nv">X</span><span class="o">)).</span><span class="w"></span>


test4<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">q</span>\<span class="w"></span>
<span class="w">    </span>q<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"></span>
<span class="w">    </span>q<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"></span>
<span class="w">      </span>(std.findall<span class="w"> </span><span class="o">(</span>q<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span>q<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>q<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">Y</span><span class="kd">],</span><span class="w"> </span>not<span class="o">(</span>same_var<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)).</span><span class="w"></span>
<span class="c">% this is super tricky but hard to implement differently.</span>
<span class="c">% q _ _ -&gt; q A^1 B^1</span>
<span class="c">% q A^1 B^1 == q 1 X0 --restrict--&gt; X0 := X1,  A1 := _\X1</span>
<span class="c">% when we backtrack the &quot;restriction&quot; on X0 is lost</span>

test5<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">q</span>\<span class="w"></span>
<span class="w">    </span>q<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"></span>
<span class="w">    </span>q<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"></span>
<span class="w">      </span>(std.findall<span class="w"> </span><span class="o">(</span>q<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">Z</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span>q<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>q<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">Y</span><span class="kd">],</span><span class="w"> </span>same_var<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">).</span><span class="w"></span>
<span class="c">% this works because there is no restriction</span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>test1<span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"></span>
<span class="w">        </span>test2<span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="mi">2</span><span class="kd">,</span><span class="w"></span>
<span class="w">        </span>test3<span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="mi">3</span><span class="kd">,</span><span class="w"></span>
<span class="w">        </span>test4<span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="mi">4</span><span class="kd">,</span><span class="w"></span>
<span class="w">        </span>test5<span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="mi">5</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/findall.elpi&quot;, line 26, column 0, character 577:</span>
<span class="go"> Warning: constant test5 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/findall.elpi&quot;, line 16, column 0, character 281:</span>
<span class="go"> Warning: constant test4 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/findall.elpi&quot;, line 8, column 0, character 159:</span>
<span class="go"> Warning: constant test3 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/findall.elpi&quot;, line 7, column 0, character 95:</span>
<span class="go"> Warning: constant test2 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/findall.elpi&quot;, line 6, column 0, character 43:</span>
<span class="go"> Warning: constant test1 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/findall.elpi&quot;, line 6, column 0, character 43:</span>
<span class="go"> Warning: B is linear: name it _B (discard) or B_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/findall.elpi&quot;, line 6, column 0, character 43:</span>
<span class="go"> Warning: A is linear: name it _A (discard) or A_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/findall.elpi&quot;, line 26, column 0, character 577:</span>
<span class="go"> Warning: Z is linear: name it _Z (discard) or Z_ (fresh variable)</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">4</span>
<span class="go">5</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.084</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/fragment_exit.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span>q<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">d</span>\<span class="w"> </span>r<span class="w"> </span><span class="nv">Y</span><span class="o">.</span><span class="w"></span>

r<span class="w"> </span><span class="nv">_</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">c</span>\<span class="w"> </span>q<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>c<span class="w"> </span>x<span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/fragment_exit.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning:</span>
<span class="go"> constant r has no declared type. Did you mean std.set.private.remove-min-binding std.set.private.remove std.set.remove std.map.private.remove-min-binding std.map.private.remove std.map.remove std.rev rex.replace std.string.map.remove std.int.map.remove std.loc.map.remove std.string.set.remove std.int.set.remove std.loc.set.remove ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/fragment_exit.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning: constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/fragment_exit.elpi&quot;, line 5, column 0, character 25:</span>
<span class="go"> Warning: X is linear: name it _X (discard) or X_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.079</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/fragment_exit2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span>ignore<span class="w"> </span><span class="nv">_</span><span class="o">.</span><span class="w"></span>
main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">c</span>\<span class="w"> </span><span class="nv">Y</span><span class="w"> </span>c<span class="w"> </span><span class="kd">=</span><span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>c<span class="w"> </span>x<span class="o">)</span><span class="kd">,</span><span class="w"> </span>ignore<span class="w"> </span>(<span class="nv">Y</span><span class="w"> </span>c<span class="w"> </span>d<span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/fragment_exit2.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning: constant ignore has no declared type. Did you mean std.ignore-failure! ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/fragment_exit2.elpi&quot;, line 2, column 0, character 10:</span>
<span class="go"> Warning:</span>
<span class="go"> constant d has no declared type. Did you mean std.debug-print std.drop std.drop-last std.do! std.do-ok! std.string.set.diff std.int.set.diff std.loc.set.diff ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/fragment_exit2.elpi&quot;, line 2, column 0, character 10:</span>
<span class="go"> Warning: X is linear: name it _X (discard) or X_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.071</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/fragment_exit3.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span>ignore<span class="w"> </span><span class="nv">_</span><span class="o">.</span><span class="w"></span>
main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">c</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">Y</span>\<span class="w"> </span><span class="nv">X</span><span class="w"> </span>c<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>ignore<span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="o">(</span>f<span class="w"> </span>d<span class="o">)).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/fragment_exit3.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning: constant ignore has no declared type. Did you mean std.ignore-failure! ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/fragment_exit3.elpi&quot;, line 2, column 0, character 10:</span>
<span class="go"> Warning:</span>
<span class="go"> constant f has no declared type. Did you mean std.map.private.find std.map.find std.fatal-error std.fatal-error-w-data std.fold std.fold2 std.fold-map std.forall std.forall-ok std.forall2 std.filter std.flatten std.flip std.findall loc.fields std.string.map.find std.int.map.find std.loc.map.find gc.full ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/fragment_exit3.elpi&quot;, line 2, column 0, character 10:</span>
<span class="go"> Warning:</span>
<span class="go"> constant d has no declared type. Did you mean std.debug-print std.drop std.drop-last std.do! std.do-ok! std.string.set.diff std.int.set.diff std.loc.set.diff ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.077</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/general_case.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span>app<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"> </span>
c<span class="o">.</span><span class="w"></span>
ignore<span class="w"> </span><span class="nv">_</span><span class="o">.</span><span class="w"></span>
foo<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">d</span>\<span class="w"> </span>ignore<span class="w"> </span><span class="nv">P</span><span class="o">.</span><span class="w"></span>
main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>app<span class="w"> </span>(<span class="nv">x\</span>x<span class="o">)</span><span class="w"> </span>c<span class="kd">,</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(<span class="nv">y\</span>y<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span>c<span class="kd">,</span><span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">d</span>\<span class="w"> </span><span class="nv">F</span><span class="w"> </span>c<span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">        </span>foo<span class="w"> </span>(<span class="nv">G</span><span class="w"> </span>c<span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/general_case.elpi&quot;, line 3, column 0, character 20:</span>
<span class="go"> Warning: constant ignore has no declared type. Did you mean std.ignore-failure! ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/general_case.elpi&quot;, line 4, column 0, character 30:</span>
<span class="go"> Warning: constant foo has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/general_case.elpi&quot;, line 2, column 0, character 17:</span>
<span class="go"> Warning:</span>
<span class="go"> constant c has no declared type. Did you mean std.set.private.create std.set.private.cardinal std.set.cardinal std.map.private.create std.string.concat std.string.set.cardinal std.int.set.cardinal std.loc.set.cardinal trace.counter gc.compact ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/general_case.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning: constant app has no declared type. Did you mean std.append std.appendR ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/general_case.elpi&quot;, line 5, column 0, character 55:</span>
<span class="go"> Warning: G is linear: name it _G (discard) or G_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.079</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/general_case2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span>p<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>c<span class="w"> </span>x<span class="o">).</span><span class="w"></span>

q<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>c<span class="w"> </span>x<span class="o">).</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>p<span class="w"> </span>(<span class="nv">y\</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">z</span>\<span class="w"> </span>q<span class="w"> </span>y<span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/general_case2.elpi&quot;, line 3, column 0, character 20:</span>
<span class="go"> Warning: constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/general_case2.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning:</span>
<span class="go"> constant p has no declared type. Did you mean std.set.private.set std.set.private.empty std.set.private.node std.set.private.height std.set.private.create std.set.private.bal std.set.private.add std.set.private.mem std.set.private.remove-min-binding std.set.private.min-binding std.set.private.merge std.set.private.remove std.set.private.cardinal std.set.private.elements std.map.private.map std.map.private.empty std.map.private.node std.map.private.height std.map.private.create std.map.private.bal std.map.private.add std.map.private.find std.map.private.remove-min-binding std.map.private.min-binding std.map.private.merge std.map.private.remove std.map.private.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/general_case2.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning:</span>
<span class="go"> constant c has no declared type. Did you mean std.set.private.create std.set.private.cardinal std.set.cardinal std.map.private.create std.string.concat std.string.set.cardinal std.int.set.cardinal std.loc.set.cardinal trace.counter gc.compact ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.072</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/general_case3.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">c</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">X</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">d</span>\<span class="w"> </span><span class="o">(</span><span class="nv">X</span><span class="w"> </span>d<span class="w"> </span><span class="kd">=</span><span class="w"> </span>f<span class="w"> </span>c<span class="w"> </span>d<span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span>c<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X</span><span class="o">))</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">c\</span><span class="w"> </span><span class="nv">d\</span><span class="w"> </span>f<span class="w"> </span>c<span class="w"> </span>d<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/general_case3.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning:</span>
<span class="go"> constant f has no declared type. Did you mean std.map.private.find std.map.find std.fatal-error std.fatal-error-w-data std.fold std.fold2 std.fold-map std.forall std.forall-ok std.forall2 std.filter std.flatten std.flip std.findall loc.fields std.string.map.find std.int.map.find std.loc.map.find gc.full ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.067</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/hc_interp.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">/*</span>
<span class="w"> </span><span class="kd">*</span><span class="w"> </span><span class="nv">An</span><span class="w"> </span>interpreter<span class="w"> </span>for<span class="w"> </span>the<span class="w"> </span>logic<span class="w"> </span>of<span class="w"> </span><span class="nv">Horn</span><span class="w"> </span>clauses<span class="o">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span>code<span class="w"> </span>illustrates<span class="w"> </span>
<span class="w"> </span><span class="kd">*</span><span class="w"> </span>the<span class="w"> </span>usefulness<span class="w"> </span>of<span class="w"> </span>beta<span class="w"> </span>reduction<span class="w"> </span>in<span class="w"> </span>realizing<span class="w"> </span>substitution<span class="o">.</span><span class="w"> </span><span class="nv">Also</span><span class="w"> </span>note<span class="w"></span>
<span class="w"> </span><span class="kd">*</span><span class="w"> </span>the<span class="w"> </span>use<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>logic<span class="w"> </span>variable<span class="w"> </span>in<span class="w"> </span>the<span class="w"> </span>third<span class="w"> </span>clause<span class="w"> </span>for<span class="w"> </span>try_clause<span class="o">.</span><span class="w"></span>
<span class="w"> </span><span class="kd">*/</span><span class="w"></span>

<span class="c">%module  hc_interp.</span>

<span class="c">%accumulate lists.</span>

<span class="c">%reduce (app (lam F) T) R :- pi x\ copy x T =&gt; copy (F x) (R&#39; x), R = R&#39; x.</span>

copy<span class="w"> </span>(and<span class="w"> </span><span class="nv">B1</span><span class="w"> </span><span class="nv">C1</span><span class="o">)</span><span class="w"> </span>(and<span class="w"> </span><span class="nv">B2</span><span class="w"> </span><span class="nv">C2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">B1</span><span class="w"> </span><span class="nv">B2</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">C1</span><span class="w"> </span><span class="nv">C2</span><span class="o">.</span><span class="w"></span>
copy<span class="w"> </span>(or<span class="w"> </span><span class="nv">B1</span><span class="w"> </span><span class="nv">C1</span><span class="o">)</span><span class="w"> </span>(or<span class="w"> </span><span class="nv">B2</span><span class="w"> </span><span class="nv">C2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">B1</span><span class="w"> </span><span class="nv">B2</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">C1</span><span class="w"> </span><span class="nv">C2</span><span class="o">.</span><span class="w"></span>
copy<span class="w"> </span>(box<span class="w"> </span><span class="nv">F1</span><span class="o">)</span><span class="w"> </span>(box<span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy<span class="w"> </span>(<span class="nv">F1</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">).</span><span class="w"></span>
copy<span class="w"> </span>a<span class="w"> </span>a<span class="o">.</span><span class="w"></span>
copy<span class="w"> </span>b<span class="w"> </span>b<span class="o">.</span><span class="w"></span>
copy<span class="w"> </span>c<span class="w"> </span>c<span class="o">.</span><span class="w"></span>
copy<span class="w"> </span>(f<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(f<span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">.</span><span class="w"></span>
copy<span class="w"> </span>tru<span class="w"> </span>tru<span class="o">.</span><span class="w"></span>
copy<span class="w"> </span>perp<span class="w"> </span>perp<span class="o">.</span><span class="w"></span>

<span class="c">% a[t/b] = a</span>

<span class="c">% b[t/b] = t</span>

subst<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">B1</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>(copy<span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="nv">B2</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">B2</span><span class="w"> </span>x<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">B1</span><span class="o">).</span><span class="w"></span>
<span class="w"> </span>
<span class="c">% perp is a fail.</span>
<span class="c">% hc_interp Cs G means Cs |- G</span>
<span class="c">%hc_interp _ tru.</span>

<span class="c">%hc_interp Cs (box B) :- !, hc_interp Cs (B T).</span>
hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span>(box<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w">  </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>subst<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">B1</span><span class="kd">,</span><span class="w"> </span>hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">B1</span><span class="o">.</span><span class="w"></span>
hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span>(and<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">C</span><span class="o">.</span><span class="w"></span>
hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span>(or<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>(hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">C</span><span class="o">).</span><span class="w"></span>
hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">A</span><span class="w">  </span><span class="kd">:-</span><span class="w">  </span>backchain<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span><span class="w"></span>
<span class="c">% why there is no rule in teyjus: hc_interp Cs (all B) :- .... ?</span>

backchain<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>memb<span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="nv">Cs</span><span class="kd">,</span><span class="w"> </span>try_clause<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span><span class="w"></span>

memb<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">_</span><span class="o">).</span><span class="w"></span>
memb<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>memb<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L</span><span class="o">.</span><span class="w"></span>


<span class="c">% try_clause Cs A B means Cs, A |- B</span>
try_clause<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span>(and<span class="w"> </span><span class="nv">D1</span><span class="w"> </span><span class="nv">D2</span><span class="o">)</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>
<span class="w">     </span><span class="kd">!,</span><span class="w"> </span>(try_clause<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">D1</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>try_clause<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">D2</span><span class="w"> </span><span class="nv">A</span><span class="o">).</span><span class="w"></span>
<span class="c">% try_clause Cs (all D) A :- !, try_clause Cs (D T) A.</span>
try_clause<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span>(all<span class="w"> </span><span class="nv">D</span><span class="o">)</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>subst<span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">D1</span><span class="kd">,</span><span class="w"> </span>try_clause<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">D1</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span><span class="w"></span>
try_clause<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span><span class="w"></span>
try_clause<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span>(imp<span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">G</span><span class="o">.</span><span class="w"></span>

<span class="c">%prog (xcons (adj a b) (xcons (adj b c) (xcons (adj c (f c))</span>
<span class="c">%      (xcons (all X\ (all Y\ (imp (adj X Y) (path X Y))))</span>
<span class="c">%      (xcons (all X\ (all Y\ (all Z\ (imp (and (adj X Y) (path Y Z)) </span>
<span class="c">%                                           (path X Z))))) xnil))))).</span>

<span class="c">%pathfroma X :- prog Cs, hc_interp Cs (path a X).</span>

test1<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="c">%Cs = (xcons a (xcons b (xcons c xnil))),</span>
<span class="w">        </span><span class="c">%try_clause Cs (and a (or b c)) (or (and a b) (and a c)).</span>
<span class="w">        </span>hc_interp<span class="w"> </span>(xcons<span class="w"> </span>a<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span><span class="o">(</span>imp<span class="w"> </span>b<span class="w"> </span>c<span class="o">)</span><span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span><span class="o">(</span>imp<span class="w"> </span>a<span class="w"> </span>b<span class="o">)</span><span class="w"> </span>xnil<span class="o">)))</span><span class="w"> </span>c<span class="o">.</span><span class="w"></span>

test2<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>xcons<span class="w"> </span>(f<span class="w"> </span>a<span class="o">)</span><span class="w"> </span>xnil<span class="kd">,</span><span class="w"> </span>
<span class="w">        </span>hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span>(box<span class="w"> </span>f<span class="o">).</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>test1<span class="kd">,</span><span class="w"> </span>test2<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 61, column 0, character 1823:</span>
<span class="go"> Warning: constant xnil has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 42, column 0, character 1152:</span>
<span class="go"> Warning: constant xcons has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 40, column 0, character 1103:</span>
<span class="go"> Warning: constant try_clause has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 20, column 0, character 574:</span>
<span class="go"> Warning: constant tru has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 65, column 0, character 2013:</span>
<span class="go"> Warning: constant test2 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 61, column 0, character 1823:</span>
<span class="go"> Warning: constant test1 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 27, column 0, character 633:</span>
<span class="go"> Warning: constant subst has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 21, column 0, character 588:</span>
<span class="go"> Warning: constant perp has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 14, column 0, character 396:</span>
<span class="go"> Warning: constant or has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 40, column 0, character 1103:</span>
<span class="go"> Warning: constant memb has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 68, column 0, character 2077:</span>
<span class="go"> Warning: [suppressing 12 warnings]</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 34, column 0, character 817:</span>
<span class="go"> Warning: T is linear: name it _T (discard) or T_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 43, column 0, character 1172:</span>
<span class="go"> Warning: Y is linear: name it _Y (discard) or Y_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 50, column 0, character 1381:</span>
<span class="go"> Warning: T is linear: name it _T (discard) or T_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 51, column 0, character 1445:</span>
<span class="go"> Warning: Cs is linear: name it _Cs (discard) or Cs_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.100</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/hdclause.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">kind</span><span class="w"> </span><span class="nf">foo</span><span class="w"> </span><span class="kt">type</span>.<span class="w"></span>

<span class="kd">type</span><span class="w"> </span><span class="nf">a</span><span class="w"> </span><span class="kt">((int</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">foo)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">foo)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">foo</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">b</span><span class="w"> </span><span class="kt">foo</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">foo</span>.<span class="w"></span>

<span class="kd">type</span><span class="w"> </span><span class="nf">p</span><span class="w"> </span><span class="kt">(foo</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">foo)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">foo</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">q</span><span class="w"> </span><span class="kt">(foo</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">foo)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">foo</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.<span class="w"></span>

p<span class="w"> </span><span class="nv">K</span><span class="w"> </span>(a<span class="w"> </span><span class="nv">f\</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="o">(</span>f<span class="w"> </span><span class="mi">0</span><span class="o">)).</span><span class="w"></span>
q<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(a<span class="w"> </span><span class="nv">f\</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="o">(</span>f<span class="w"> </span><span class="mi">0</span><span class="o">)).</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span>p<span class="w"> </span>b<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="o">))</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span>q<span class="w"> </span>b<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="o">))</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x y</span>\<span class="w"> </span>q<span class="w"> </span>b<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="o">))</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x y</span>\<span class="w"> </span>p<span class="w"> </span>b<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="o">)).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.066</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/heap_discard.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">,</span><span class="mi">2</span><span class="kd">],</span><span class="w"></span>
<span class="w">  </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="mi">1</span><span class="kd">,</span><span class="mi">2</span><span class="kd">],</span><span class="w"></span>
<span class="w">  </span>not(<span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="mi">2</span><span class="kd">,</span><span class="mi">2</span><span class="kd">]</span><span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">a b</span>\<span class="w"> </span><span class="nv">Y</span><span class="w"> </span>b<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">],</span><span class="w"> </span>b<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">_</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/heap_discard.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning: Y is linear: name it _Y (discard) or Y_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.064</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/ho.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% q(a): OK; q(b): FAIL; q(X): exception; q(a,a): OK; q(true): OK.</span>

q(<span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

a<span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span>a<span class="kd">,</span><span class="w"> </span>q<span class="w"> </span>(a<span class="kd">,</span>a<span class="o">)</span><span class="kd">,</span><span class="w"> </span>q<span class="w"> </span>true<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/ho.elpi&quot;, line 3, column 0, character 67:</span>
<span class="go"> Warning: constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/ho.elpi&quot;, line 5, column 0, character 79:</span>
<span class="go"> Warning:</span>
<span class="go"> constant a has no declared type. Did you mean std.set.private.add std.set.add std.map.private.add std.map.add std.assert! std.assert-ok! std.append std.appendR std.any-&gt;string std.string.map.add std.int.map.add std.loc.map.add std.string.set.add std.int.set.add std.loc.set.add ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.070</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/hollight.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">   1</span>
<span class="normal">   2</span>
<span class="normal">   3</span>
<span class="normal">   4</span>
<span class="normal">   5</span>
<span class="normal">   6</span>
<span class="normal">   7</span>
<span class="normal">   8</span>
<span class="normal">   9</span>
<span class="normal">  10</span>
<span class="normal">  11</span>
<span class="normal">  12</span>
<span class="normal">  13</span>
<span class="normal">  14</span>
<span class="normal">  15</span>
<span class="normal">  16</span>
<span class="normal">  17</span>
<span class="normal">  18</span>
<span class="normal">  19</span>
<span class="normal">  20</span>
<span class="normal">  21</span>
<span class="normal">  22</span>
<span class="normal">  23</span>
<span class="normal">  24</span>
<span class="normal">  25</span>
<span class="normal">  26</span>
<span class="normal">  27</span>
<span class="normal">  28</span>
<span class="normal">  29</span>
<span class="normal">  30</span>
<span class="normal">  31</span>
<span class="normal">  32</span>
<span class="normal">  33</span>
<span class="normal">  34</span>
<span class="normal">  35</span>
<span class="normal">  36</span>
<span class="normal">  37</span>
<span class="normal">  38</span>
<span class="normal">  39</span>
<span class="normal">  40</span>
<span class="normal">  41</span>
<span class="normal">  42</span>
<span class="normal">  43</span>
<span class="normal">  44</span>
<span class="normal">  45</span>
<span class="normal">  46</span>
<span class="normal">  47</span>
<span class="normal">  48</span>
<span class="normal">  49</span>
<span class="normal">  50</span>
<span class="normal">  51</span>
<span class="normal">  52</span>
<span class="normal">  53</span>
<span class="normal">  54</span>
<span class="normal">  55</span>
<span class="normal">  56</span>
<span class="normal">  57</span>
<span class="normal">  58</span>
<span class="normal">  59</span>
<span class="normal">  60</span>
<span class="normal">  61</span>
<span class="normal">  62</span>
<span class="normal">  63</span>
<span class="normal">  64</span>
<span class="normal">  65</span>
<span class="normal">  66</span>
<span class="normal">  67</span>
<span class="normal">  68</span>
<span class="normal">  69</span>
<span class="normal">  70</span>
<span class="normal">  71</span>
<span class="normal">  72</span>
<span class="normal">  73</span>
<span class="normal">  74</span>
<span class="normal">  75</span>
<span class="normal">  76</span>
<span class="normal">  77</span>
<span class="normal">  78</span>
<span class="normal">  79</span>
<span class="normal">  80</span>
<span class="normal">  81</span>
<span class="normal">  82</span>
<span class="normal">  83</span>
<span class="normal">  84</span>
<span class="normal">  85</span>
<span class="normal">  86</span>
<span class="normal">  87</span>
<span class="normal">  88</span>
<span class="normal">  89</span>
<span class="normal">  90</span>
<span class="normal">  91</span>
<span class="normal">  92</span>
<span class="normal">  93</span>
<span class="normal">  94</span>
<span class="normal">  95</span>
<span class="normal">  96</span>
<span class="normal">  97</span>
<span class="normal">  98</span>
<span class="normal">  99</span>
<span class="normal"> 100</span>
<span class="normal"> 101</span>
<span class="normal"> 102</span>
<span class="normal"> 103</span>
<span class="normal"> 104</span>
<span class="normal"> 105</span>
<span class="normal"> 106</span>
<span class="normal"> 107</span>
<span class="normal"> 108</span>
<span class="normal"> 109</span>
<span class="normal"> 110</span>
<span class="normal"> 111</span>
<span class="normal"> 112</span>
<span class="normal"> 113</span>
<span class="normal"> 114</span>
<span class="normal"> 115</span>
<span class="normal"> 116</span>
<span class="normal"> 117</span>
<span class="normal"> 118</span>
<span class="normal"> 119</span>
<span class="normal"> 120</span>
<span class="normal"> 121</span>
<span class="normal"> 122</span>
<span class="normal"> 123</span>
<span class="normal"> 124</span>
<span class="normal"> 125</span>
<span class="normal"> 126</span>
<span class="normal"> 127</span>
<span class="normal"> 128</span>
<span class="normal"> 129</span>
<span class="normal"> 130</span>
<span class="normal"> 131</span>
<span class="normal"> 132</span>
<span class="normal"> 133</span>
<span class="normal"> 134</span>
<span class="normal"> 135</span>
<span class="normal"> 136</span>
<span class="normal"> 137</span>
<span class="normal"> 138</span>
<span class="normal"> 139</span>
<span class="normal"> 140</span>
<span class="normal"> 141</span>
<span class="normal"> 142</span>
<span class="normal"> 143</span>
<span class="normal"> 144</span>
<span class="normal"> 145</span>
<span class="normal"> 146</span>
<span class="normal"> 147</span>
<span class="normal"> 148</span>
<span class="normal"> 149</span>
<span class="normal"> 150</span>
<span class="normal"> 151</span>
<span class="normal"> 152</span>
<span class="normal"> 153</span>
<span class="normal"> 154</span>
<span class="normal"> 155</span>
<span class="normal"> 156</span>
<span class="normal"> 157</span>
<span class="normal"> 158</span>
<span class="normal"> 159</span>
<span class="normal"> 160</span>
<span class="normal"> 161</span>
<span class="normal"> 162</span>
<span class="normal"> 163</span>
<span class="normal"> 164</span>
<span class="normal"> 165</span>
<span class="normal"> 166</span>
<span class="normal"> 167</span>
<span class="normal"> 168</span>
<span class="normal"> 169</span>
<span class="normal"> 170</span>
<span class="normal"> 171</span>
<span class="normal"> 172</span>
<span class="normal"> 173</span>
<span class="normal"> 174</span>
<span class="normal"> 175</span>
<span class="normal"> 176</span>
<span class="normal"> 177</span>
<span class="normal"> 178</span>
<span class="normal"> 179</span>
<span class="normal"> 180</span>
<span class="normal"> 181</span>
<span class="normal"> 182</span>
<span class="normal"> 183</span>
<span class="normal"> 184</span>
<span class="normal"> 185</span>
<span class="normal"> 186</span>
<span class="normal"> 187</span>
<span class="normal"> 188</span>
<span class="normal"> 189</span>
<span class="normal"> 190</span>
<span class="normal"> 191</span>
<span class="normal"> 192</span>
<span class="normal"> 193</span>
<span class="normal"> 194</span>
<span class="normal"> 195</span>
<span class="normal"> 196</span>
<span class="normal"> 197</span>
<span class="normal"> 198</span>
<span class="normal"> 199</span>
<span class="normal"> 200</span>
<span class="normal"> 201</span>
<span class="normal"> 202</span>
<span class="normal"> 203</span>
<span class="normal"> 204</span>
<span class="normal"> 205</span>
<span class="normal"> 206</span>
<span class="normal"> 207</span>
<span class="normal"> 208</span>
<span class="normal"> 209</span>
<span class="normal"> 210</span>
<span class="normal"> 211</span>
<span class="normal"> 212</span>
<span class="normal"> 213</span>
<span class="normal"> 214</span>
<span class="normal"> 215</span>
<span class="normal"> 216</span>
<span class="normal"> 217</span>
<span class="normal"> 218</span>
<span class="normal"> 219</span>
<span class="normal"> 220</span>
<span class="normal"> 221</span>
<span class="normal"> 222</span>
<span class="normal"> 223</span>
<span class="normal"> 224</span>
<span class="normal"> 225</span>
<span class="normal"> 226</span>
<span class="normal"> 227</span>
<span class="normal"> 228</span>
<span class="normal"> 229</span>
<span class="normal"> 230</span>
<span class="normal"> 231</span>
<span class="normal"> 232</span>
<span class="normal"> 233</span>
<span class="normal"> 234</span>
<span class="normal"> 235</span>
<span class="normal"> 236</span>
<span class="normal"> 237</span>
<span class="normal"> 238</span>
<span class="normal"> 239</span>
<span class="normal"> 240</span>
<span class="normal"> 241</span>
<span class="normal"> 242</span>
<span class="normal"> 243</span>
<span class="normal"> 244</span>
<span class="normal"> 245</span>
<span class="normal"> 246</span>
<span class="normal"> 247</span>
<span class="normal"> 248</span>
<span class="normal"> 249</span>
<span class="normal"> 250</span>
<span class="normal"> 251</span>
<span class="normal"> 252</span>
<span class="normal"> 253</span>
<span class="normal"> 254</span>
<span class="normal"> 255</span>
<span class="normal"> 256</span>
<span class="normal"> 257</span>
<span class="normal"> 258</span>
<span class="normal"> 259</span>
<span class="normal"> 260</span>
<span class="normal"> 261</span>
<span class="normal"> 262</span>
<span class="normal"> 263</span>
<span class="normal"> 264</span>
<span class="normal"> 265</span>
<span class="normal"> 266</span>
<span class="normal"> 267</span>
<span class="normal"> 268</span>
<span class="normal"> 269</span>
<span class="normal"> 270</span>
<span class="normal"> 271</span>
<span class="normal"> 272</span>
<span class="normal"> 273</span>
<span class="normal"> 274</span>
<span class="normal"> 275</span>
<span class="normal"> 276</span>
<span class="normal"> 277</span>
<span class="normal"> 278</span>
<span class="normal"> 279</span>
<span class="normal"> 280</span>
<span class="normal"> 281</span>
<span class="normal"> 282</span>
<span class="normal"> 283</span>
<span class="normal"> 284</span>
<span class="normal"> 285</span>
<span class="normal"> 286</span>
<span class="normal"> 287</span>
<span class="normal"> 288</span>
<span class="normal"> 289</span>
<span class="normal"> 290</span>
<span class="normal"> 291</span>
<span class="normal"> 292</span>
<span class="normal"> 293</span>
<span class="normal"> 294</span>
<span class="normal"> 295</span>
<span class="normal"> 296</span>
<span class="normal"> 297</span>
<span class="normal"> 298</span>
<span class="normal"> 299</span>
<span class="normal"> 300</span>
<span class="normal"> 301</span>
<span class="normal"> 302</span>
<span class="normal"> 303</span>
<span class="normal"> 304</span>
<span class="normal"> 305</span>
<span class="normal"> 306</span>
<span class="normal"> 307</span>
<span class="normal"> 308</span>
<span class="normal"> 309</span>
<span class="normal"> 310</span>
<span class="normal"> 311</span>
<span class="normal"> 312</span>
<span class="normal"> 313</span>
<span class="normal"> 314</span>
<span class="normal"> 315</span>
<span class="normal"> 316</span>
<span class="normal"> 317</span>
<span class="normal"> 318</span>
<span class="normal"> 319</span>
<span class="normal"> 320</span>
<span class="normal"> 321</span>
<span class="normal"> 322</span>
<span class="normal"> 323</span>
<span class="normal"> 324</span>
<span class="normal"> 325</span>
<span class="normal"> 326</span>
<span class="normal"> 327</span>
<span class="normal"> 328</span>
<span class="normal"> 329</span>
<span class="normal"> 330</span>
<span class="normal"> 331</span>
<span class="normal"> 332</span>
<span class="normal"> 333</span>
<span class="normal"> 334</span>
<span class="normal"> 335</span>
<span class="normal"> 336</span>
<span class="normal"> 337</span>
<span class="normal"> 338</span>
<span class="normal"> 339</span>
<span class="normal"> 340</span>
<span class="normal"> 341</span>
<span class="normal"> 342</span>
<span class="normal"> 343</span>
<span class="normal"> 344</span>
<span class="normal"> 345</span>
<span class="normal"> 346</span>
<span class="normal"> 347</span>
<span class="normal"> 348</span>
<span class="normal"> 349</span>
<span class="normal"> 350</span>
<span class="normal"> 351</span>
<span class="normal"> 352</span>
<span class="normal"> 353</span>
<span class="normal"> 354</span>
<span class="normal"> 355</span>
<span class="normal"> 356</span>
<span class="normal"> 357</span>
<span class="normal"> 358</span>
<span class="normal"> 359</span>
<span class="normal"> 360</span>
<span class="normal"> 361</span>
<span class="normal"> 362</span>
<span class="normal"> 363</span>
<span class="normal"> 364</span>
<span class="normal"> 365</span>
<span class="normal"> 366</span>
<span class="normal"> 367</span>
<span class="normal"> 368</span>
<span class="normal"> 369</span>
<span class="normal"> 370</span>
<span class="normal"> 371</span>
<span class="normal"> 372</span>
<span class="normal"> 373</span>
<span class="normal"> 374</span>
<span class="normal"> 375</span>
<span class="normal"> 376</span>
<span class="normal"> 377</span>
<span class="normal"> 378</span>
<span class="normal"> 379</span>
<span class="normal"> 380</span>
<span class="normal"> 381</span>
<span class="normal"> 382</span>
<span class="normal"> 383</span>
<span class="normal"> 384</span>
<span class="normal"> 385</span>
<span class="normal"> 386</span>
<span class="normal"> 387</span>
<span class="normal"> 388</span>
<span class="normal"> 389</span>
<span class="normal"> 390</span>
<span class="normal"> 391</span>
<span class="normal"> 392</span>
<span class="normal"> 393</span>
<span class="normal"> 394</span>
<span class="normal"> 395</span>
<span class="normal"> 396</span>
<span class="normal"> 397</span>
<span class="normal"> 398</span>
<span class="normal"> 399</span>
<span class="normal"> 400</span>
<span class="normal"> 401</span>
<span class="normal"> 402</span>
<span class="normal"> 403</span>
<span class="normal"> 404</span>
<span class="normal"> 405</span>
<span class="normal"> 406</span>
<span class="normal"> 407</span>
<span class="normal"> 408</span>
<span class="normal"> 409</span>
<span class="normal"> 410</span>
<span class="normal"> 411</span>
<span class="normal"> 412</span>
<span class="normal"> 413</span>
<span class="normal"> 414</span>
<span class="normal"> 415</span>
<span class="normal"> 416</span>
<span class="normal"> 417</span>
<span class="normal"> 418</span>
<span class="normal"> 419</span>
<span class="normal"> 420</span>
<span class="normal"> 421</span>
<span class="normal"> 422</span>
<span class="normal"> 423</span>
<span class="normal"> 424</span>
<span class="normal"> 425</span>
<span class="normal"> 426</span>
<span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span>
<span class="normal">1530</span>
<span class="normal">1531</span>
<span class="normal">1532</span>
<span class="normal">1533</span>
<span class="normal">1534</span>
<span class="normal">1535</span>
<span class="normal">1536</span>
<span class="normal">1537</span>
<span class="normal">1538</span>
<span class="normal">1539</span>
<span class="normal">1540</span>
<span class="normal">1541</span>
<span class="normal">1542</span>
<span class="normal">1543</span>
<span class="normal">1544</span>
<span class="normal">1545</span>
<span class="normal">1546</span>
<span class="normal">1547</span>
<span class="normal">1548</span>
<span class="normal">1549</span>
<span class="normal">1550</span>
<span class="normal">1551</span>
<span class="normal">1552</span>
<span class="normal">1553</span>
<span class="normal">1554</span>
<span class="normal">1555</span>
<span class="normal">1556</span>
<span class="normal">1557</span>
<span class="normal">1558</span>
<span class="normal">1559</span>
<span class="normal">1560</span>
<span class="normal">1561</span>
<span class="normal">1562</span>
<span class="normal">1563</span>
<span class="normal">1564</span>
<span class="normal">1565</span>
<span class="normal">1566</span>
<span class="normal">1567</span>
<span class="normal">1568</span>
<span class="normal">1569</span>
<span class="normal">1570</span>
<span class="normal">1571</span>
<span class="normal">1572</span>
<span class="normal">1573</span>
<span class="normal">1574</span>
<span class="normal">1575</span>
<span class="normal">1576</span>
<span class="normal">1577</span>
<span class="normal">1578</span>
<span class="normal">1579</span>
<span class="normal">1580</span>
<span class="normal">1581</span>
<span class="normal">1582</span>
<span class="normal">1583</span>
<span class="normal">1584</span>
<span class="normal">1585</span>
<span class="normal">1586</span>
<span class="normal">1587</span>
<span class="normal">1588</span>
<span class="normal">1589</span>
<span class="normal">1590</span>
<span class="normal">1591</span>
<span class="normal">1592</span>
<span class="normal">1593</span>
<span class="normal">1594</span>
<span class="normal">1595</span>
<span class="normal">1596</span>
<span class="normal">1597</span>
<span class="normal">1598</span>
<span class="normal">1599</span>
<span class="normal">1600</span>
<span class="normal">1601</span>
<span class="normal">1602</span>
<span class="normal">1603</span>
<span class="normal">1604</span>
<span class="normal">1605</span>
<span class="normal">1606</span>
<span class="normal">1607</span>
<span class="normal">1608</span>
<span class="normal">1609</span>
<span class="normal">1610</span>
<span class="normal">1611</span>
<span class="normal">1612</span>
<span class="normal">1613</span>
<span class="normal">1614</span>
<span class="normal">1615</span>
<span class="normal">1616</span>
<span class="normal">1617</span>
<span class="normal">1618</span>
<span class="normal">1619</span>
<span class="normal">1620</span>
<span class="normal">1621</span>
<span class="normal">1622</span>
<span class="normal">1623</span>
<span class="normal">1624</span>
<span class="normal">1625</span>
<span class="normal">1626</span>
<span class="normal">1627</span>
<span class="normal">1628</span>
<span class="normal">1629</span>
<span class="normal">1630</span>
<span class="normal">1631</span>
<span class="normal">1632</span>
<span class="normal">1633</span>
<span class="normal">1634</span>
<span class="normal">1635</span>
<span class="normal">1636</span>
<span class="normal">1637</span>
<span class="normal">1638</span>
<span class="normal">1639</span>
<span class="normal">1640</span>
<span class="normal">1641</span>
<span class="normal">1642</span>
<span class="normal">1643</span>
<span class="normal">1644</span>
<span class="normal">1645</span>
<span class="normal">1646</span>
<span class="normal">1647</span>
<span class="normal">1648</span>
<span class="normal">1649</span>
<span class="normal">1650</span>
<span class="normal">1651</span>
<span class="normal">1652</span>
<span class="normal">1653</span>
<span class="normal">1654</span>
<span class="normal">1655</span>
<span class="normal">1656</span>
<span class="normal">1657</span>
<span class="normal">1658</span>
<span class="normal">1659</span>
<span class="normal">1660</span>
<span class="normal">1661</span>
<span class="normal">1662</span>
<span class="normal">1663</span>
<span class="normal">1664</span>
<span class="normal">1665</span>
<span class="normal">1666</span>
<span class="normal">1667</span>
<span class="normal">1668</span>
<span class="normal">1669</span>
<span class="normal">1670</span>
<span class="normal">1671</span>
<span class="normal">1672</span>
<span class="normal">1673</span>
<span class="normal">1674</span>
<span class="normal">1675</span>
<span class="normal">1676</span>
<span class="normal">1677</span>
<span class="normal">1678</span>
<span class="normal">1679</span>
<span class="normal">1680</span>
<span class="normal">1681</span>
<span class="normal">1682</span>
<span class="normal">1683</span>
<span class="normal">1684</span>
<span class="normal">1685</span>
<span class="normal">1686</span>
<span class="normal">1687</span>
<span class="normal">1688</span>
<span class="normal">1689</span>
<span class="normal">1690</span>
<span class="normal">1691</span>
<span class="normal">1692</span>
<span class="normal">1693</span>
<span class="normal">1694</span>
<span class="normal">1695</span>
<span class="normal">1696</span>
<span class="normal">1697</span>
<span class="normal">1698</span>
<span class="normal">1699</span>
<span class="normal">1700</span>
<span class="normal">1701</span>
<span class="normal">1702</span>
<span class="normal">1703</span>
<span class="normal">1704</span>
<span class="normal">1705</span>
<span class="normal">1706</span>
<span class="normal">1707</span>
<span class="normal">1708</span>
<span class="normal">1709</span>
<span class="normal">1710</span>
<span class="normal">1711</span>
<span class="normal">1712</span>
<span class="normal">1713</span>
<span class="normal">1714</span>
<span class="normal">1715</span>
<span class="normal">1716</span>
<span class="normal">1717</span>
<span class="normal">1718</span>
<span class="normal">1719</span>
<span class="normal">1720</span>
<span class="normal">1721</span>
<span class="normal">1722</span>
<span class="normal">1723</span>
<span class="normal">1724</span>
<span class="normal">1725</span>
<span class="normal">1726</span>
<span class="normal">1727</span>
<span class="normal">1728</span>
<span class="normal">1729</span>
<span class="normal">1730</span>
<span class="normal">1731</span>
<span class="normal">1732</span>
<span class="normal">1733</span>
<span class="normal">1734</span>
<span class="normal">1735</span>
<span class="normal">1736</span>
<span class="normal">1737</span>
<span class="normal">1738</span>
<span class="normal">1739</span>
<span class="normal">1740</span>
<span class="normal">1741</span>
<span class="normal">1742</span>
<span class="normal">1743</span>
<span class="normal">1744</span>
<span class="normal">1745</span>
<span class="normal">1746</span>
<span class="normal">1747</span>
<span class="normal">1748</span>
<span class="normal">1749</span>
<span class="normal">1750</span>
<span class="normal">1751</span>
<span class="normal">1752</span>
<span class="normal">1753</span>
<span class="normal">1754</span>
<span class="normal">1755</span>
<span class="normal">1756</span>
<span class="normal">1757</span>
<span class="normal">1758</span>
<span class="normal">1759</span>
<span class="normal">1760</span>
<span class="normal">1761</span>
<span class="normal">1762</span>
<span class="normal">1763</span>
<span class="normal">1764</span>
<span class="normal">1765</span>
<span class="normal">1766</span>
<span class="normal">1767</span>
<span class="normal">1768</span>
<span class="normal">1769</span>
<span class="normal">1770</span>
<span class="normal">1771</span>
<span class="normal">1772</span>
<span class="normal">1773</span>
<span class="normal">1774</span>
<span class="normal">1775</span>
<span class="normal">1776</span>
<span class="normal">1777</span>
<span class="normal">1778</span>
<span class="normal">1779</span>
<span class="normal">1780</span>
<span class="normal">1781</span>
<span class="normal">1782</span>
<span class="normal">1783</span>
<span class="normal">1784</span>
<span class="normal">1785</span>
<span class="normal">1786</span>
<span class="normal">1787</span>
<span class="normal">1788</span>
<span class="normal">1789</span>
<span class="normal">1790</span>
<span class="normal">1791</span>
<span class="normal">1792</span>
<span class="normal">1793</span>
<span class="normal">1794</span>
<span class="normal">1795</span>
<span class="normal">1796</span>
<span class="normal">1797</span>
<span class="normal">1798</span>
<span class="normal">1799</span>
<span class="normal">1800</span>
<span class="normal">1801</span>
<span class="normal">1802</span>
<span class="normal">1803</span>
<span class="normal">1804</span>
<span class="normal">1805</span>
<span class="normal">1806</span>
<span class="normal">1807</span>
<span class="normal">1808</span>
<span class="normal">1809</span>
<span class="normal">1810</span>
<span class="normal">1811</span>
<span class="normal">1812</span>
<span class="normal">1813</span>
<span class="normal">1814</span>
<span class="normal">1815</span>
<span class="normal">1816</span>
<span class="normal">1817</span>
<span class="normal">1818</span>
<span class="normal">1819</span>
<span class="normal">1820</span>
<span class="normal">1821</span>
<span class="normal">1822</span>
<span class="normal">1823</span>
<span class="normal">1824</span>
<span class="normal">1825</span>
<span class="normal">1826</span>
<span class="normal">1827</span>
<span class="normal">1828</span>
<span class="normal">1829</span>
<span class="normal">1830</span>
<span class="normal">1831</span>
<span class="normal">1832</span>
<span class="normal">1833</span>
<span class="normal">1834</span>
<span class="normal">1835</span>
<span class="normal">1836</span>
<span class="normal">1837</span>
<span class="normal">1838</span>
<span class="normal">1839</span>
<span class="normal">1840</span>
<span class="normal">1841</span>
<span class="normal">1842</span>
<span class="normal">1843</span>
<span class="normal">1844</span>
<span class="normal">1845</span>
<span class="normal">1846</span>
<span class="normal">1847</span>
<span class="normal">1848</span>
<span class="normal">1849</span>
<span class="normal">1850</span>
<span class="normal">1851</span>
<span class="normal">1852</span>
<span class="normal">1853</span>
<span class="normal">1854</span>
<span class="normal">1855</span>
<span class="normal">1856</span>
<span class="normal">1857</span>
<span class="normal">1858</span>
<span class="normal">1859</span>
<span class="normal">1860</span>
<span class="normal">1861</span>
<span class="normal">1862</span>
<span class="normal">1863</span>
<span class="normal">1864</span>
<span class="normal">1865</span>
<span class="normal">1866</span>
<span class="normal">1867</span>
<span class="normal">1868</span>
<span class="normal">1869</span>
<span class="normal">1870</span>
<span class="normal">1871</span>
<span class="normal">1872</span>
<span class="normal">1873</span>
<span class="normal">1874</span>
<span class="normal">1875</span>
<span class="normal">1876</span>
<span class="normal">1877</span>
<span class="normal">1878</span>
<span class="normal">1879</span>
<span class="normal">1880</span>
<span class="normal">1881</span>
<span class="normal">1882</span>
<span class="normal">1883</span>
<span class="normal">1884</span>
<span class="normal">1885</span>
<span class="normal">1886</span>
<span class="normal">1887</span>
<span class="normal">1888</span>
<span class="normal">1889</span>
<span class="normal">1890</span>
<span class="normal">1891</span>
<span class="normal">1892</span>
<span class="normal">1893</span>
<span class="normal">1894</span>
<span class="normal">1895</span>
<span class="normal">1896</span>
<span class="normal">1897</span>
<span class="normal">1898</span>
<span class="normal">1899</span>
<span class="normal">1900</span>
<span class="normal">1901</span>
<span class="normal">1902</span>
<span class="normal">1903</span>
<span class="normal">1904</span>
<span class="normal">1905</span>
<span class="normal">1906</span>
<span class="normal">1907</span>
<span class="normal">1908</span>
<span class="normal">1909</span>
<span class="normal">1910</span>
<span class="normal">1911</span>
<span class="normal">1912</span>
<span class="normal">1913</span>
<span class="normal">1914</span>
<span class="normal">1915</span>
<span class="normal">1916</span>
<span class="normal">1917</span>
<span class="normal">1918</span>
<span class="normal">1919</span>
<span class="normal">1920</span>
<span class="normal">1921</span>
<span class="normal">1922</span>
<span class="normal">1923</span>
<span class="normal">1924</span>
<span class="normal">1925</span>
<span class="normal">1926</span>
<span class="normal">1927</span>
<span class="normal">1928</span>
<span class="normal">1929</span>
<span class="normal">1930</span>
<span class="normal">1931</span>
<span class="normal">1932</span>
<span class="normal">1933</span>
<span class="normal">1934</span>
<span class="normal">1935</span>
<span class="normal">1936</span>
<span class="normal">1937</span>
<span class="normal">1938</span>
<span class="normal">1939</span>
<span class="normal">1940</span>
<span class="normal">1941</span>
<span class="normal">1942</span>
<span class="normal">1943</span>
<span class="normal">1944</span>
<span class="normal">1945</span>
<span class="normal">1946</span>
<span class="normal">1947</span>
<span class="normal">1948</span>
<span class="normal">1949</span>
<span class="normal">1950</span>
<span class="normal">1951</span>
<span class="normal">1952</span>
<span class="normal">1953</span>
<span class="normal">1954</span>
<span class="normal">1955</span>
<span class="normal">1956</span>
<span class="normal">1957</span>
<span class="normal">1958</span>
<span class="normal">1959</span>
<span class="normal">1960</span>
<span class="normal">1961</span>
<span class="normal">1962</span>
<span class="normal">1963</span>
<span class="normal">1964</span>
<span class="normal">1965</span>
<span class="normal">1966</span>
<span class="normal">1967</span>
<span class="normal">1968</span>
<span class="normal">1969</span>
<span class="normal">1970</span>
<span class="normal">1971</span>
<span class="normal">1972</span>
<span class="normal">1973</span>
<span class="normal">1974</span>
<span class="normal">1975</span>
<span class="normal">1976</span>
<span class="normal">1977</span>
<span class="normal">1978</span>
<span class="normal">1979</span>
<span class="normal">1980</span>
<span class="normal">1981</span>
<span class="normal">1982</span>
<span class="normal">1983</span>
<span class="normal">1984</span>
<span class="normal">1985</span>
<span class="normal">1986</span>
<span class="normal">1987</span>
<span class="normal">1988</span>
<span class="normal">1989</span>
<span class="normal">1990</span>
<span class="normal">1991</span>
<span class="normal">1992</span>
<span class="normal">1993</span>
<span class="normal">1994</span>
<span class="normal">1995</span></pre></div></td><td class="code"><div><pre><span></span>/* Untrusted predicates called from the kernel:
 * next_object            next object to check
 * callback_proved        proof completed
 * next_tactic            next tactic to use
 * update_certificate     get new certificate after tactic application
 * end_of_proof           is the certificate/proof empty?
 * ppterm                 for pretty-printing messages
 * deftac                 tactic definition
 */

/* Predicates exported from the trusted library:
 * append
 * fold2_append
 * put_binds
 */
 
/* Predicates exported from the kernel:
 * proves
 * check
 */

{ /***** Trusted code base *******/

/***** Trusted library functions *****/

/* The names with &#39; at the end are trusted; the ones without are
   exported and therefore untrusted. */
local append&#39;, fold2_append&#39;, put_binds&#39;.

append&#39; [] L L.
append&#39; [ X | XS ] L [ X | RES ] :- append&#39; XS L RES.
append A B C :- append&#39; A B C.

fold2_append&#39; [] [] _ [].
fold2_append&#39; [ X | XS ] [ Y | YS ] F OUTS :-
 F X Y OUT, fold2_append&#39; XS YS F OUTS2, append&#39; OUT OUTS2 OUTS.
fold2_append A B C D :- fold2_append&#39; A B C D.

% put_binds : list &#39;b -&gt; &#39;a -&gt; &#39;c -&gt; list (bounded &#39;b) -&gt; o
% put_binds [ f1,...,fn ] x t [ bind t x \ f1,...,bind t x fn ]
% binding all the xs that occur in f1,...,fn
put_binds&#39; [] _ _ [].
put_binds&#39; [ YX | YSX ] X A [ bind A Y | YYS ] :-
 YX = Y X, put_binds&#39; YSX X A YYS.
put_binds A B C D :- put_binds&#39; A B C D.

/***** The HOL kernel *****/

local thm, provable, def0, term, typ, typ&#39;, loop, prove, check1,
 check1def, check1thm, check1axm, check1nbt,
 reterm, not_defined, check_hyps.

proves T TY :- provable T TY.

typ T :- !. % this line temporarily drops checking of well-formedness for types
            % to avoid too much slow down. It is ultimately due to re-typing
            % terms that should be recognized as already well typed.
typ T :- var T, !, declare_constraint (typ T) [ T ].
typ T :- typ&#39; T.
typ&#39; prop.
typ&#39; (univ ## A ## B) :- typ A, typ B.
typ&#39; (A --&gt; B) :- typ A, typ B.
typ&#39; (disj_union ## A ## B) :- typ A, typ B.

mode (term i o).
term (lam A F) (A --&gt; B) :- typ A, pi x\ term x A =&gt; term (F x) B.
term (F # T) B :- term F (A --&gt; B), term T A.
term (eq ## A) (A --&gt; A --&gt; prop) :- typ A.
term (uvar as T) TY :- declare_constraint (term T TY) T.

/* like term, but on terms that are already known to be well-typed */
mode (reterm i o).
reterm (lam A F) (A --&gt; B) :- pi x\ reterm x A =&gt; reterm (F x) B.
reterm (F # T) B :- reterm F (A --&gt; B).
reterm (eq ## A) (A --&gt; A --&gt; prop).
reterm (uvar as T) TY :- declare_constraint (reterm T TY) T.

constraint term reterm { /* No propagation rules for now */}

% thm : bounded tactic -&gt; bounded sequent -&gt; list (bounded sequent) -&gt; o
thm C (seq Gamma G) _ :- debug, print Gamma &quot;|- &quot; G &quot; := &quot; C, fail.

/* &lt;&lt; HACKS FOR DEBUGGING */
thm daemon (seq Gamma F) [].
/* &gt;&gt; HACKS FOR DEBUGGING */

thm r (seq Gamma (eq ## _ # X # X)) [].
thm (t Y) (seq Gamma (eq ## A # X # Z))
 [ seq Gamma (eq ## A # X # Y), seq Gamma (eq ## A # Y # Z) ] :- term Y A.
thm (m P) (seq Gamma Q) [ seq Gamma (eq ## prop # P # Q), seq Gamma P ] :- term P prop.
thm b (seq Gamma (eq ## _ # ((lam _ F) # X) # (F X))) [].
thm c (seq Gamma (eq ## B # (F # X) # (G # Y)))
 [ seq Gamma (eq ## (A --&gt; B) # F # G) , seq Gamma (eq ## A # X # Y) ] :- reterm X A, reterm Y A.
thm k (seq Gamma (eq ## (A --&gt; B) # (lam A S) # (lam A T)))
 [ bind A x \ seq Gamma (eq ## B # (S x) # (T x)) ].
thm s (seq Gamma (eq ## prop # P # Q)) [ seq (P :: Gamma) Q, seq (Q :: Gamma) P ].
thm (h IGN) (seq Gamma P) [] :- append&#39; IGN [ P | Gamma2 ] Gamma.

thm d (seq Gamma (eq ## _ # C # A)) [] :- def0 C A.
thm (th NAME) (seq _ G) [] :- provable NAME G.

thm (thenll TAC1 TACN) SEQ SEQS :-
 thm TAC1 SEQ NEW,
 deftacl TACN NEW TACL,
 fold2_append&#39; TACL NEW thm SEQS.

/*debprint _ (then _ _) :- !.
debprint _ (thenl _ _) :- !.
debprint O T :- print O T.*/

thm TAC SEQ SEQS :-
 deftac TAC SEQ XTAC,
 /*debprint &quot;&lt;&lt;&quot; TAC,
 (*/ thm XTAC SEQ SEQS /*, debprint &quot;&gt;&gt;&quot; TAC
 ; debprint &quot;XX&quot; TAC, fail)*/.

thm (! TAC) SEQ SEQS :-
 thm TAC SEQ SEQS,
 !.

thm id SEQ [ SEQ ].

thm (wl Gamma1) (seq Gamma F) [ seq WGamma F ] :-
 append&#39; Gamma1 [ P | Gamma2 ] Gamma,
 append&#39; Gamma1 Gamma2 WGamma.

thm (bind A TAC) (bind A SEQ) NEWL :-
 pi x \ term x A =&gt; reterm x A =&gt; thm (TAC x) (SEQ x) (NEW x), put_binds&#39; (NEW x) x A NEWL.

thm ww (bind A x \ SEQ) [ SEQ ].

/* debuggin only, remove it */
%thm A B C :- print &quot;FAILED &quot; (thm A B C), fail.

% loop : list (bounded sequent) -&gt; certificate -&gt; o
%loop SEQS TACS :- print &quot;LOOP&quot; (loop SEQS TACS), fail.
loop [] CERTIFICATE :- end_of_proof CERTIFICATE.
loop [ SEQ | OLD ] CERTIFICATE :-
 next_tactic [ SEQ | OLD ] CERTIFICATE ITAC,
 thm ITAC SEQ NEW,
 append&#39; NEW OLD SEQS,
 update_certificate CERTIFICATE ITAC NEW NEW_CERTIFICATE,
 loop SEQS NEW_CERTIFICATE.

prove G TACS :-
 (term G prop, ! ; ppterm PG G, print &quot;Bad statement:&quot; PG, fail),
% (TACS = (false,_), ! ;
 loop [ seq [] G ] TACS
. % ).

not_defined P NAME :-
 not (P NAME _) ; print &quot;Error:&quot; NAME already defined, fail.

check_hyps HS (typ&#39; TYPE) :-
 (not (typ&#39; TYPE) ; print &quot;Error:&quot; TYPE already defined, fail), print HS new TYPE.
check_hyps HS (def0 NAME DEF) :- ppterm PDEF DEF, print HS NAME &quot;=&quot; PDEF.
check_hyps HS (term NAME TYPE) :-
 not_defined term NAME, ppterm PTYPE TYPE, print HS NAME &quot;:&quot; PTYPE.
check_hyps HS (reterm _ _).
check_hyps HS (provable NAME TYPE) :-
 not_defined provable NAME, ppterm PTYPE TYPE, print HS NAME &quot;:&quot; PTYPE.
check_hyps HS (H1,H2) :- check_hyps HS H1, check_hyps HS H2.
check_hyps HS (pi H) :- pi x \ typ&#39; x =&gt; check_hyps [x | HS] (H x).
check_hyps HS (_ =&gt; H2) :- check_hyps HS H2.

/* check1 I O
   checks the declaration I
   returns the new assumption O */
check1 (theorem NAME GOALTACTICS) HYPS :- check1thm NAME GOALTACTICS HYPS, !.
check1 (axiom NAME ST) HYPS :- check1axm NAME ST HYPS, !.
check1 (new_basic_type TYPE REP ABS REPABS ABSREP PREPH P_TACTICS) HYPS :- check1nbt TYPE REP ABS REPABS ABSREP PREPH P_TACTICS true HYPS, !.
check1 (def NAME TYPDEF) HYPS :- check1def NAME TYPDEF true HYPS, !.
check1 (decl NAME TYP) HYPS :- check1decl NAME TYP true HYPS, !.

check1def NAME (pi I) HYPSUCHTHAT (pi HYPS) :-
 pi x \ typ&#39; x =&gt; check1def (NAME ## x) (I x) (HYPSUCHTHAT, typ x) (HYPS x).
check1def NAME (TYP,DEF) HYPSUCHTHAT HYPS :-
 typ TYP, term DEF TYP,
 HYPS = ((HYPSUCHTHAT =&gt; term NAME TYP), reterm NAME TYP, def0 NAME DEF).

check1decl NAME (pi I) HYPSUCHTHAT (pi HYPS) :-
 pi x \ typ&#39; x =&gt; check1decl (NAME ## x) (I x) (HYPSUCHTHAT, typ x) (HYPS x).
check1decl NAME TYP HYPSUCHTHAT HYPS :-
 typ TYP, HYPS = ((HYPSUCHTHAT =&gt; term NAME TYP), reterm NAME TYP).

check1thm NAME (pi I) (pi HYPS) :-
 pi x \ typ&#39; x =&gt; check1thm NAME (I x) (HYPS x).
check1thm NAME (GOAL,TACTICS) (provable NAME GOAL) :-
  prove GOAL TACTICS,
  callback_proved NAME GOAL TACTICS.

check1axm NAME (pi I) (pi HYPS) :- !,
 pi x \ typ&#39; x =&gt; check1axm NAME (I x) (HYPS x).
check1axm NAME GOAL (provable NAME GOAL) :-
 term GOAL prop, ! ; ppterm PGOAL GOAL, print &quot;Bad statement:&quot; PGOAL, fail.

check1nbt TYPE REP ABS REPABS ABSREP PREPH (pi P_TACTICS) HYPSUCHTHAT (pi HYPS) :-
 pi x \ typ&#39; x =&gt; check1nbt (TYPE ## x) (REP ## x) (ABS ## x) REPABS ABSREP PREPH (P_TACTICS x) (HYPSUCHTHAT, typ x) (HYPS x).
check1nbt TYPE REP ABS REPABS ABSREP PREPH (P,TACTICS) HYPSUCHTHAT HYPS :-
  term P (X --&gt; prop),
  prove (exists ## _ # P ) TACTICS,
  callback_proved existence_condition (exists ## _ # P) TACTICS,
  REPTYP = (TYPE --&gt; X),
  ABSTYP = (X --&gt; TYPE),
  ABSREPTYP = (forall ## TYPE # lam TYPE x \ eq ## TYPE # (ABS # (REP # x)) # x),
  REPABSTYP = (forall ## X # lam X x \ impl # (P # x) # (eq ## X # (REP # (ABS # x)) # x)),
  PREPHTYP = (forall ## TYPE # lam TYPE x \ (P # (REP # x))),
  !,
  HYPS =
   ( (HYPSUCHTHAT =&gt; typ&#39; TYPE)
   , (HYPSUCHTHAT =&gt; term REP REPTYP), reterm REP REPTYP
   , (HYPSUCHTHAT =&gt; term ABS ABSTYP), reterm ABS ABSTYP
   , provable ABSREP ABSREPTYP
   , provable REPABS REPABSTYP, provable PREPH PREPHTYP).

check WHAT :-
 next_object WHAT C CONT,
 (C = stop, !, K = true ; check1 C H , check_hyps [] H, print_constraints, K = (H =&gt; check CONT)),
 !, K.

}

/************ parsing and pretty-printing ********/
% ppterm/parseterm
%ppterm X Y :- ppp X Y. parseterm X Y :- ppp X Y.
%ppp X Y :- var X, var Y, !, X = Y.
%ppp X (F # G) :- var X, (var F ; var G), !, X = (F # G).
%ppp X (F # G # H) :- var X, (var F ; var G ; var H), !,
% X = (F # G # H).

mode (ppp o i) xas ppterm, (ppp i o) xas parseterm.

ppp (! F2) (forall ## _ # lam _ F1) :- !, pi x \ ppp (F2 x) (F1 x).
ppp (! TY F2) (forall ## TY # lam TY F1) :- !, pi x \ ppp (F2 x) (F1 x).
ppp (? F2) (exists ## _ # lam _ F1) :- !, pi x \ ppp (F2 x) (F1 x).
ppp (? TY F2) (exists ## TY # lam TY F1) :- !, pi x \ ppp (F2 x) (F1 x).
ppp (F2 &lt;=&gt; G2) (eq ## prop # F1 # G1) :- !, ppp F2 F1, ppp G2 G1.
ppp (F2 = G2) (eq ## _ # F1 # G1) :- !, ppp F2 F1, ppp G2 G1.
ppp (F2 &amp;&amp; G2) (and # F1 # G1) :- !, ppp F2 F1, ppp G2 G1.
ppp (F2 || G2) (or # F1 # G1) :- !, ppp F2 F1, ppp G2 G1.
ppp (F2 ==&gt; G2) (impl # F1 # G1) :- !, ppp F2 F1, ppp G2 G1.
ppp (X2 #in S2) (in ## _ # X1 # S1) :- !, ppp X2 X1, ppp S2 S1.
ppp (U2 &lt;&lt;= V2) (subseteq ## _ # U1 # V1) :- !, ppp U2 U1, ppp V2 V1.
ppp (F2 + G2) (plus # F1 # G1) :- !, ppp F2 F1, ppp G2 G1.
ppp (F2 # G2) (F1 # G1) :- !, ppp F2 F1, ppp G2 G1.
ppp (lam A F2) (lam A F1) :- !, pi x \ ppp (F2 x) (F1 x).
ppp A A.

/* safe_list_map that unifies the two lists if they are both flexible
   probably only useful for parsing/pretty-printing */
safe_list_map L1 _ L2 :- var L1, var L2, !, L1 = L2.
safe_list_map L1 F L2 :- list_map L1 F L2.

% pptac(ppterm)/parsetac(parseterm)
% pptac X Y :- ppptac X Y.  parsetac X Y :- ppptac X Y.

mode (ppptac i o) xas parsetac(ppp -&gt; parseterm),
     (ppptac o i) xas pptac(ppp -&gt; ppterm).

ppptac daemon daemon.
ppptac r r.
ppptac (t Y) (t PY) :- ppp Y PY.
ppptac (m Y) (m PY) :- ppp Y PY.
ppptac b b.
ppptac c c.
ppptac k k.
ppptac s s.
ppptac (h Gamma) (h PGamma) :- safe_list_map Gamma ppp PGamma.
ppptac d d.
ppptac (th NAME) (th NAME).
ppptac (thenll TAC1 TACN) (thenll PTAC1 PTACN) :-
 ppptac TAC1 PTAC1, ppptac TACN PTACN.
ppptac (! TAC) (! PTAC) :- ppptac TAC PTAC.
ppptac id id.
ppptac (wl Gamma) (wl PGamma) :- safe_list_map Gamma ppp PGamma.
ppptac (bind A TAC) (bind PA PTAC) :-
 ppp A PA, pi x \ ppptac (TAC x) (PTAC x).
ppptac ww ww.

/************ interactive and non interactive loops ********/

ppptac interactive interactive.

parse_obj (theorem NAME PSTTAC) [theorem NAME STTAC] :-
 parse_thm NAME PSTTAC STTAC.
parse_obj (axiom NAME PTYP) [axiom NAME TYP] :- parse_axiom PTYP TYP.
parse_obj (new_basic_type TYPE REP ABS REPABS ABSREP PREP PP_TACTICS)
 [new_basic_type TYPE REP ABS REPABS ABSREP PREP P_TACTICS] :- parse_nbt PP_TACTICS P_TACTICS.
parse_obj (def NAME PTYBO) [def NAME TYBO] :- parse_def PTYBO TYBO.
parse_obj (decl NAME TY) [decl NAME TY].
parse_obj (inductive_def PRED PREDF PREDF_MON PRED_I PRED_E0 PRED_E K) EXP :-
 inductive_def_pkg PRED PREDF PREDF_MON PRED_I PRED_E0 PRED_E K EXP.
parse_obj stop [stop].

parse_def (pi I) (pi O) :- pi x \ parse_def (I x) (O x).
parse_def (TY,PB) (TY,B) :- parseterm PB B.

parse_axiom (pi I) (pi O) :- !, pi x \ parse_axiom (I x) (O x).
parse_axiom PST ST :- parseterm PST ST.

parse_thm NAME (pi I) (pi O) :- pi x \ parse_thm NAME (I x) (O x).
parse_thm _ (PST,TAC) (ST,(false,TAC)) :- !, parseterm PST ST.
parse_thm NAME PST (ST,(true,[_])) :-
 (not (proves NAME _) ; print &quot;Error:&quot; NAME already defined, fail),
 parseterm PST ST.

parse_nbt (pi I) (pi O) :- !, pi x \ parse_nbt (I x) (O x).
parse_nbt (PP,TACTICS) (P,(false,TACTICS)) :- parseterm PP P.
parse_nbt PP (P,(true,[_])) :- parseterm PP P.

next_object [ C | NEXT ] CT CONTNEXT :-
  parse_obj C [ CT | CONT ], append CONT NEXT CONTNEXT.
next_object [] C CONT :- 
 print &quot;Welcome to HOL extra-light&quot;,
 toplevel_loop [ C | CONT ].
next_object toplevel C CONT :- toplevel_loop [ C | CONT ].

read_cmd H :-
 print &quot;Enter a command or \&quot;stop.\&quot;&quot;,
 flush std_out, $readterm std_in H,
 !.
read_cmd H :- read_cmd H.

toplevel_loop G :-
 read_cmd H,
 ( H = stop, !, G = [stop]
 ; parse_obj H PH, !, (append PH toplevel G ; print &quot;error&quot;, toplevel_loop G)
 ; print &quot;bad command&quot;, toplevel_loop G ).

callback_proved _ _ (false,_).
callback_proved NAME G (true, [ TAC ]) :-
 canonical TAC CANONICALTAC,
 pptac PCANONICALTAC CANONICALTAC,
 ppterm PG G,
 print (theorem NAME (PG , [ PCANONICALTAC ] )).

end_of_proof (true, []) :- print &quot;proof completed&quot;.
end_of_proof (false, []).

next_tactic0 [ SEQ | OLD ] (true, [ _ | _ ]) ITAC :-
 print,
 list_iter_rev [ SEQ | OLD ] print_sequent,
 read_in_context SEQ ITAC BACKTRACK,
 BACKTRACK.
next_tactic0 SEQS (true, CERT) ITAC :-
 print &quot;error&quot;,
 next_tactic SEQS (true, CERT) ITAC.
next_tactic0 SEQS (true_then_false, (_,INT_TACS,_)) ITAC :-
 next_tactic0 SEQS (true, INT_TACS) ITAC.
next_tactic0 SEQS (false, [ interactive | _ ]) ITAC :-
 next_tactic0 SEQS (true, [ _ ]) ITAC.
next_tactic0 [ SEQ | OLD ] (false, [ TAC | _ ]) TAC.
next_tactic0 _ (false, _) ITAC :-
 print &quot;aborted&quot;,
 halt.

next_tactic SEQS CERT TAC :- next_tactic0 SEQS CERT PTAC, parsetac PTAC TAC.

update_certificate (true, [ TAC | OTHER_TACS ]) ITAC NEW (true, TACS) :-
 mk_script ITAC NEW NEW_TACS TAC,
 append NEW_TACS OTHER_TACS TACS.
update_certificate (false, [ interactive | NON_INTERACTIVE_TACS ]) ITAC NEW CERTIFICATE :-
 update_certificate (true_then_false, (SCRIPT, [ SCRIPT ], NON_INTERACTIVE_TACS)) ITAC NEW CERTIFICATE.
update_certificate (true_then_false, (SCRIPT,[ TAC | OTHER_TACS ],NON_INTERACTIVE_TACS)) ITAC NEW CERTIFICATE :- !,
 mk_script ITAC NEW NEW_INTERACTIVE_TACS TAC,
 append NEW_INTERACTIVE_TACS OTHER_TACS INTERACTIVE_TACS,
 ( INTERACTIVE_TACS = [ _ | _ ], !,
   CERTIFICATE =
    (true_then_false, (SCRIPT,INTERACTIVE_TACS,NON_INTERACTIVE_TACS))
 ; CERTIFICATE = (false, NON_INTERACTIVE_TACS),
   print &quot;INTERACTIVE SUBPROOF COMPLETED&quot;,
   canonical SCRIPT CSCRIPT,
   pptac PSCRIPT CSCRIPT,
   print PSCRIPT).
update_certificate (false, [ _ | OTHER_TACS ]) _ _ (false, OTHER_TACS).

mk_script (bind A T) NEW NEW_TACS (bind A T2) :- !,
 pi x \
  put_binds (NEW2 x) x A NEW,
  mk_script (T x) (NEW2 x) (NEWT x) (T2 x),
  put_binds (NEWT x) x A NEW_TACS.
mk_script ITAC NEW NEW_TACS (thenl ITAC NEW_TACS) :-
 mk_list_of_bounded_fresh NEW NEW_TACS.

read_in_context (bind A K) (bind A TAC) BACKTRACK :-
 pi x \ /* term x A =&gt; reterm # x A =&gt; */ read_in_context (K x) (TAC x) BACKTRACK.
read_in_context (seq A B) TAC BACKTRACK :-
 flush std_out, $readterm std_in TAC,
 (TAC = backtrack, !, BACKTRACK = (!, fail) ; BACKTRACK = true).

print_sequent (seq Gamma G) :-
 print,
 list_iter_rev Gamma (x \ sigma PX \ ppterm PX x, print PX),
 print &quot;|------------------&quot;,
 ppterm PG G, print PG.
print_sequent (bind A F) :- pi x \ print_sequent (F x).

/* turns thenl into then */
canonical (bind A T1) (bind A T2) :- !,
 pi x \ canonical (T1 x) (T2 x).
canonical (thenl T L) OTAC :- !,
 list_map L canonical L2,
 (mk_constant_list L2 S L2, !,
  (S = [], !, OTAC = T ; OTAC = then T S)
 ; OTAC = thenl T L2).
canonical T T.

/************ inductive_def package ********/
parse_inductive_def_spec (pi F) (pi PF) :- !,
 pi A \ parse_inductive_def_spec (F A) (PF A).
parse_inductive_def_spec (param TY F) (param PTY PF) :- !,
 ppp TY PTY, pi x \ parse_inductive_def_spec (F x) (PF x).
parse_inductive_def_spec L PL :-
 (pi p \ list_map (L p)
  (x \ px \ sigma A \ sigma B \ sigma PB \ x = (A, B), parseterm B PB, px = (A, PB))
  (PL p)).

build_quantified_predicate (pi I) (pi O) :- !,
 pi A \ build_quantified_predicate (I A) (O A).
build_quantified_predicate (param TY I) (TY --&gt; TYP, lam TY BO) :- !,
 pi x \ build_quantified_predicate (I x) (TYP, BO x).
build_quantified_predicate L (_, lam _ p \ lam _ x \ P p x) :-
 pi p \ pi x \ build_predicate (L p) p x (P p x).

build_predicate [ (_,K) ] P X R :- !,
 process_constructor K P X R.
build_predicate [ (_,K) | REST ] P X (or # Q # R) :-
 process_constructor K P X Q,
 build_predicate REST P X R.

process_constructor (forall ## TY # lam TY Q) P X (exists ## TY # lam TY R) :-
 pi y \ process_constructor (Q y) P X (R y).
process_constructor (impl # H # K) P X (and # H # R) :-
 process_constructor K P X R.
process_constructor (P # T) P X (eq ## _ # X # T).

prove_monotonicity_thm (pi F) PREDF APREDF (pi THM) :- !,
 pi A \ prove_monotonicity_thm (F A) PREDF (APREDF ## A) (THM A).
prove_monotonicity_thm (param TY F) PREDF APREDF (forall ## TY # lam TY STM, PROOF) :- !,
 pi x \ prove_monotonicity_thm (F x) PREDF (APREDF # x) (STM x, PROOF).
prove_monotonicity_thm _ PREDF APREDF THM :-
 THM =
  (monotone ## _ # APREDF,
   [ then inv (bind* (then (conv (depth_tac (dd [PREDF]))) auto_monotone)) ]).

state_fixpoint_def (pi F) PREDF (pi DEF) :- !,
 pi A \ state_fixpoint_def (F A) (PREDF ## A) (DEF A).
state_fixpoint_def (param TY F) PREDF (_, lam TY BO) :- !,
 pi x \ state_fixpoint_def (F x) (PREDF # x) (_, BO x).
state_fixpoint_def _ PREDF (_, fixpoint ## _ # PREDF).

prove_fix_intro_thm (pi F) PREDF PRED PREDF_MONOTONE (pi THM) :- !,
 pi A \ prove_fix_intro_thm (F A) (PREDF ## A) (PRED ## A) PREDF_MONOTONE (THM A).
prove_fix_intro_thm (param TY F) PREDF PRED PREDF_MONOTONE (forall ## TY # lam TY STM, [ then forall_i (bind _ PROOF) ]) :- !,
 pi x \ prove_fix_intro_thm (F x) (PREDF # x) (PRED # x) PREDF_MONOTONE (STM x, [ PROOF x ]).
prove_fix_intro_thm _ PREDF PRED PREDF_MONOTONE THM :-
 THM =
  ((! x \ PREDF # PRED # x ==&gt; PRED # x),
   [then forall_i
     (bind _ x13 \
       then (conv (rand_tac (rator_tac dd)))
        (then (conv (land_tac (rator_tac (rand_tac dd))))
          (then inv
            (then (cutth fixpoint_is_prefixpoint)
              (then (lforall PREDF)
                (thenl lapply [applyth PREDF_MONOTONE,
                  then
                   (g
                     (subseteq ## _ &#39;
                       (PREDF # (fixpoint ## _ # PREDF)) &#39;
                       (fixpoint ## _ # PREDF)))
                   (then (conv (depth_tac (dd [subseteq])))
                     (then (conv (depth_tac (dd [in])))
                       (then (conv (depth_tac (dd [in])))(itaut 4))))]))))))]).

prove_fix_elim_thm (pi F) PREDF PRED OPRED (pi THM) :- !,
 pi A \ prove_fix_elim_thm (F A) (PREDF ## A) (PRED ## A) OPRED (THM A).
prove_fix_elim_thm (param TY F) PREDF PRED OPRED (forall ## TY # lam TY STM, [ then forall_i (bind _ PROOF) ]) :- !,
 pi x \ prove_fix_elim_thm (F x) (PREDF # x) (PRED # x) OPRED (STM x, [ PROOF x ]).
prove_fix_elim_thm _ PREDF PRED OPRED THM :-
 THM =
  ((! x13 \
     (! x14 \ PREDF # x13 # x14 ==&gt; x13 # x14) ==&gt;
      (! x14 \ PRED # x14 ==&gt; x13 # x14)) ,
    [then forall_i
      (bind _ x23 \
        then (cutth fixpoint_subseteq_any_prefixpoint)
         (then (lforall PREDF)
           (then (lforall x23)
             (then (conv (depth_tac (dd [OPRED])))
               (then inv
                 (bind _ x24 \
                   then
                    (g
                      (impl # (subseteq ## _ # (PREDF # x23) # x23) &#39;
                        (subseteq ## _ # (fixpoint ## _ # PREDF) # x23)))
                    (then (conv (depth_tac (dd [subseteq])))
                      (then (conv (depth_tac (dd [subseteq])))
                        (then (conv (depth_tac (dd [in])))
                          (then (conv (depth_tac (dd [in])))
                            (then (conv (depth_tac (dd [in])))
                              (then (conv (depth_tac (dd [in])))
                                (then
                                  (w
                                    (impl &#39;
                                      (subseteq ## _ # (PREDF # x23) # x23) &#39;
                                      (subseteq ## _ &#39;
                                        (fixpoint ## _ # PREDF) # x23)))
                                  (then inv
                                    (thenl lapply_last [h,
                                      then (lforall_last x24)
                                       (then lapply_last h)])))))))))))))))]).

prove_intro_thms (pi F) PRED PRED_I INTROTHMS :- !,
 pi A \
  prove_intro_thms (F A) (PRED ## A) PRED_I (OUT A),
  list_map (OUT A)
   (i \ o \ sigma Y \ i = (theorem NAME (P A)), o = theorem NAME (pi P))
   INTROTHMS.
prove_intro_thms (param TY F) PRED PRED_I INTROTHMS :- !,
 pi x \
  prove_intro_thms (F x) (PRED # x) PRED_I (OUT x),
  list_map (OUT x)
   (i \ o \ sigma Y \
     i = (theorem NAME (STM x, [ PROOF x ])),
     o = theorem NAME (forall ## TY # lam TY STM, [ then forall_i (bind TY PROOF) ]))
   INTROTHMS.
prove_intro_thms L PRED PRED_I INTROTHMS :-
 list_map (L PRED) (mk_intro_thm PRED_I) INTROTHMS.

mk_intro_thm PRED_I (NAME,ST)
 (theorem NAME (ST,
   [ daemon /*(then inv (bind* (then (applyth PRED_I) (then (conv dd) (itauteq 6)))))*/ /* TOO MANY GOALS DELAYED ON typ (?): USE daemon INSTEAD */ ])).

inductive_def_pkg PRED PREDF PREDF_MONOTONE PRED_I PRED_E0 PRED_E L OUT :-
 parse_inductive_def_spec L PL,
 build_quantified_predicate PL F,
 prove_monotonicity_thm PL PREDF PREDF MONTHM,
 state_fixpoint_def PL PREDF FIXDEF,
 prove_fix_intro_thm PL PREDF PRED PREDF_MONOTONE INTROTHM,
 prove_intro_thms PL PRED PRED_I INTROTHMS,
 prove_fix_elim_thm PL PREDF PRED PRED ELIMTHM,
 OUT1 =
  [ def PREDF F
  , theorem PREDF_MONOTONE MONTHM
  , def PRED FIXDEF
  , theorem PRED_I INTROTHM
  , theorem PRED_E0 ELIMTHM ],
 append OUT1 INTROTHMS OUT.

/************ library of basic data types ********/
mk_bounded_fresh (bind _ F) (bind _ G) :- !, pi x\ mk_bounded_fresh (F x) (G x).
mk_bounded_fresh _ X.

mk_list_of_bounded_fresh [] [].
mk_list_of_bounded_fresh [S|L] [X|R] :-
 mk_bounded_fresh S X, mk_list_of_bounded_fresh L R.

/* list functions */

list_map [] _ [].
list_map [X|XS] F [Y|YS] :- F X Y, list_map XS F YS.

list_iter_rev [] _.
list_iter_rev [X|XS] F :- list_iter_rev XS F, F X.

mem [ X | _ ] X, !.
mem [ _ | XS ] X :- mem XS X.

mk_constant_list [] _ [].
mk_constant_list [_|L] X [X|R] :- mk_constant_list L X R.

bang P :- P, !.

/********** tacticals ********/

% BUG in runtime.ml if the sigma is uncommented out. It does not matter btw.
/*sigma ff \*/ deftac fail SEQ ff.

ppptac (constant_tacl TACL) (constant_tacl PTACL) :-
 list_map TACL ppptac PTACL.
deftacl (constant_tacl TACL) SEQS TACL.

ppptac (thenl TAC TACL) (thenl PTAC PTACL) :-
 ppptac TAC PTAC, list_map TACL ppptac PTACL. 
deftac (thenl TAC TACL) SEQ XTAC :-
 XTAC = thenll TAC (constant_tacl TACL).

ppptac (all_equals_list TAC) (all_equals_list PTAC) :- ppptac TAC PTAC.
deftacl (all_equals_list TAC2) SEQS TACL :-
 mk_constant_list SEQS TAC2 TACL.

ppptac (then TAC1 TAC2) (then PTAC1 PTAC2) :-
 ppptac TAC1 PTAC1, ppptac TAC2 PTAC2.
deftac (then TAC1 TAC2) SEQ XTAC :-
 XTAC = thenll TAC1 (all_equals_list TAC2).

ppptac (then! TAC1 TAC2) (then! PTAC1 PTAC2) :-
 ppptac TAC1 PTAC1, ppptac TAC2 PTAC2.
deftac (then! TAC1 TAC2) _ (then (! TAC1) TAC2).

ppptac (orelse TAC1 TAC2) (orelse PTAC1 PTAC2) :-
 ppptac TAC1 PTAC1, ppptac TAC2 PTAC2.
deftac (orelse TAC1 TAC2) SEQ XTAC :-
 XTAC = TAC1 ; XTAC = TAC2.

ppptac (orelse! TAC1 TAC2) (orelse! PTAC1 PTAC2) :-
 ppptac TAC1 PTAC1, ppptac TAC2 PTAC2.
deftac (orelse! TAC1 TAC2) _ (orelse (! TAC1) TAC2).

ppptac (bind* TAC) (bind* PTAC) :- ppptac TAC PTAC.
deftac (bind* TAC) SEQ (orelse! (bind _ x \ bind* TAC) TAC).

ppptac (repeat TAC) (repeat PTAC) :- ppptac TAC PTAC.
deftac (repeat TAC) SEQ XTAC :-
 ( XTAC = then TAC (repeat (bind* TAC))
 ; XTAC = id).

ppptac (repeat! TAC) (repeat! PTAC) :- ppptac TAC PTAC.
deftac (repeat! TAC) SEQ (orelse! (then! TAC (repeat! (bind* TAC))) id).

ppptac (pptac TAC) (pptac PTAC) :- ppptac TAC PTAC.
deftac (pptac TAC) SEQ TAC :-
 print &quot;SEQ&quot; SEQ &quot;:=&quot; TAC.

ppptac (time TAC) (time PTAC) :- ppptac TAC PTAC.
deftac (time TAC) SEQ XTAC :-
 $gettimeofday B,
 XTAC = thenll TAC (time_after TAC B).

ppptac (time_after TAC B) (time_after PTAC B) :- ppptac TAC PTAC.
deftacl (time_after TAC B) SEQS TACL :-
 $gettimeofday A,
 D is A - B,
 mk_constant_list SEQS id TACL,
 print &quot;TIME SPENT &quot; D &quot;FOR&quot; TAC.

/* For debugging only (?) For capturing metavariables */
ppptac (inspect (seq Gamma F) TAC) (inspect (seq PGamma PF) PTAC) :-
 list_map SEQ ppp PSEQ, ppp F PF, ppptac TAC PTAC.
deftac (inspect SEQ TAC) SEQ TAC.

/********** tactics ********/

ppptac (w G) (w PG) :- ppp G PG.
deftac (w G) (seq Gamma _) (wl Gamma1) :-
 append Gamma1 [ G | _ ] Gamma.

ppptac h h.
deftac h SEQ (h L).

/*** eq ***/

ppptac sym sym.
deftac sym (seq Gamma (eq ## T # L # R)) TAC :-
 TAC = thenl (m (eq ## T # R # R)) [ thenl c [ thenl c [ r , id ] , r ] , r ].

ppptac eq_true_intro eq_true_intro.
deftac eq_true_intro (seq Gamma (eq ## prop # P # tt)) TAC :-
 TAC = thenl s [ th tt_intro, wl [] ].

/*** true ***/

/*** and ***/

ppptac conj conj.
deftac conj (seq Gamma (and # P # Q)) TAC :-
 TAC =
  then
   (then (conv dd)
     (then k (bind _ x \
       thenl c
        [ thenl c [ r, eq_true_intro ] ,
          eq_true_intro ])))
   ww.

/* Gamma  &quot;|-&quot;  q    ---&gt;   Gamma &quot;|-&quot; and # p # q*/
ppptac (andr P) (andr PP) :- ppp P PP.
deftac (andr P) (seq Gamma Q) TAC :-
 TAC =
  (thenl (m ((lam _ f \ f # P # Q) # (lam _ x \ lam _ y \ y)))
    [ then
       %(repeat (conv (depth_tac b))) ROBUS VERSION LINE BELOW
       (then (conv (land_tac b)) (then (conv (land_tac (rator_tac b))) (conv (land_tac b))))
      r
    , thenl (conv (rator_tac id))
       [ then (thenl (t (lam _ f \ f # tt # tt)) [ id, r ])
          (thenl (m (and # P # Q)) [ dd , id ])
       , then (repeat (conv (depth_tac b))) (th tt_intro) ]]).

/* (and # p # q) :: nil  &quot;|-&quot;  q */
ppptac andr andr.
deftac andr (seq Gamma Q) TAC :-
 mem Gamma (and # P # Q),
 TAC = then (andr P) h.

/* Gamma  &quot;|-&quot;  p    ---&gt;   Gamma &quot;|-&quot; and # p # q*/
ppptac (andl P) (andl PP) :- ppp P PP.
deftac (andl Q) (seq Gamma P) TAC :-
 TAC =
  (thenl (m ((lam _ f \ f # P # Q) # (lam _ x \ lam _ y \ x)))
    [ then
       %(repeat (conv (depth_tac b))) ROBUS VERSION LINE BELOW
       (then (conv (land_tac b)) (then (conv (land_tac (rator_tac b))) (conv (land_tac b))))
      r
    , thenl (conv (rator_tac id))
       [ then (thenl (t (lam _ f \ f # tt # tt)) [ id, r ])
          (thenl (m (and # P # Q)) [ dd , id ])
       , then (repeat (conv (depth_tac b))) (th tt_intro) ]]).

/* (and # p # q) :: nil  &quot;|-&quot;  p */
ppptac andl andl.
deftac andl (seq Gamma P) TAC :-
 mem Gamma (and # P # Q),
 TAC = then (andl Q) h.


/*** forall ***/

/* |- forall # F  --&gt;   |- F # x */
ppptac forall_i forall_i.
deftac forall_i (seq Gamma (forall ## _ # lam _ G)) TAC :-
 TAC = then (conv dd) (then k (bind _ x \ eq_true_intro)).

/* forall # F |- F # T */
ppptac forall_e forall_e.
deftac forall_e (seq Gamma GX) TAC :-
 mem Gamma (forall ## _ # (lam _ G)), GX = G X,
 TAC = thenl (m ((lam _ G) # X)) [ b, thenl (m ((lam _ z \ tt) # X))
  [ thenl c [ then sym (thenl (m (forall ## _ # lam _ G)) [dd,h ]), r ]
  , then (conv b) (th tt_intro) ] ].

/* forall # F |- f  --&gt;  F # a, forall # F |- f */
ppptac (lforall F A) (lforall PF PA) :- ppp F PF, ppp A PA.
deftac (lforall F A) (seq Gamma G) TAC :-
 TAC = thenl (m (impl # (F A) # G))
  [ thenl s [ then mp forall_e, then i h ] , then (w (forall ## _ # lam _ F)) i ].

/* forall # F |- f  --&gt;  F # a, forall # F |- f */
ppptac (lforall A) (lforall PA) :- ppp A PA.
deftac (lforall A) (seq Gamma G) (lforall F A) :-
 mem Gamma (forall ## _ # lam _ F).

/* forall # F |- f  --&gt;  F # a, forall # F |- f */
ppptac lforall lforall.
deftac lforall (seq Gamma G) (lforall A).

/* forall # F |- f  --&gt;  F # a, forall # F |- f */
ppptac (lforall_last A) (lforall_last PA) :- ppp A PA.
deftac (lforall_last A) (seq ((forall ## _ # lam _ F)::Gamma) G) (lforall F A).

/*** false ***/
              
/*** impl ***/

/* |- p=&gt;q  --&gt;  p |- q */
ppptac i i.
deftac i (seq Gamma (impl # P # Q)) TAC :-
 TAC = then (conv dd) (thenl s [ andl, thenl conj [ h [], id ]]).

/* p=&gt;q |- q  --&gt;  |- p */
ppptac (mp P) (mp PP) :- ppp P PP.
deftac (mp P) (seq Gamma Q) TAC :-
 TAC = then (andr P) (thenl (m P) [ then sym (thenl (m (impl # P # Q)) [ dd , h ]) , id ]).

/* p=&gt;q |- q  --&gt;  |- p */
ppptac mp mp.
deftac mp (seq Gamma Q) (mp P) :-
 mem Gamma (impl # P # Q).

/* |- q   --&gt;   p |- q  and  |- p */
ppptac (cut P) (cut PP) :- ppp P PP.
deftac (cut P) (seq Gamma Q) TAC :-
 TAC = then (andr P) (thenl (m P) [then sym (thenl (m (impl # P # Q)) [then (conv (land_tac dd)) r, i] ) , id]). 

/* |-q  --&gt; p |- q   where the theorem T proves p */
ppptac (cutth P) (cutth PP) :- ppp P PP.
deftac (cutth T) SEQ TAC :-
 proves T X,
 TAC = (thenl (cut X) [ id, th T ]).

/* applies the theorem T */
ppptac (applyth P) (applyth PP) :- ppp P PP.
deftac (applyth T) SEQ (then (cutth T) apply_last).

/* impl p q, Gamma |- f   ---&gt;   /*impl q f*/ Gamma |- p  ,  q, Gamma |- f */
ppptac (lapply P Q) (lapply PP PQ) :- ppp P PP, ppp Q PQ.
deftac (lapply P Q) (seq Gamma F) TAC :-
 TAC =
  thenl (m (impl # Q # F)) [ thenl s [ then (mp Q) (then (w (impl # Q # F)) (then (mp P) (w (impl # P # Q)))) , then i (h [A]) ] , then (w (impl # P # Q)) (then i id) ].

/* impl p q, Gamma |- f   ---&gt;   /*impl q f*/ Gamma |- p  ,  q, Gamma |- f */
ppptac lapply lapply.
deftac lapply (seq Gamma F) (lapply P Q) :-
 mem Gamma (impl # P # Q).

/* impl p q, Gamma |- f   ---&gt;   /*impl q f*/ Gamma |- p  ,  q, Gamma |- f */
ppptac lapply_last lapply_last.
deftac lapply_last (seq ((impl # P # Q)::Gamma) F) (lapply P Q).

/* p |- f ---&gt; p |- p ==&gt; f */
ppptac (g P) (g PP) :- ppp P PP.
deftac (g P) (seq _ F) TAC :-
 TAC =
  (thenl (m (impl # P # F)) [thenl s [then mp h , then i h] , id ]).

/*** not ***/

/*** exists ***/

/**** apply, i.e. forall + impl ****/

ppptac (apply X) (apply PX) :- ppp X PX.
deftac (apply X) SEQ h :- var X, !.
deftac (apply X) SEQ h.
deftac (apply (impl # P # Q)) SEQ TAC :-
 TAC = thenl (lapply P Q) [ id, apply_last ].
deftac (apply (forall ## _ # lam _ G)) SEQ TAC :-
 TAC = then (lforall G X) apply_last.

ppptac apply_last apply_last.
deftac apply_last (seq (H::Gamma) F) (apply H).

ppptac apply apply.
deftac apply (seq Gamma F) (apply H) :-
 mem Gamma H.

/********** conversion(als) ***********/

strip_constant (I ## _) H :- !, strip_constant I H.
strip_constant H H.

/* expands definitions, even if applied to arguments */
ppptac (dd L) (dd L).
deftac (dd L) (seq _ (eq ## _ # T # X)) d :- strip_constant T H, bang (mem L H).
deftac (dd L) (seq _ (eq ## _ # (D # T) # X))
 (thenl (t A) [thenl c [dd L , r], b]).

ppptac dd dd.
deftac dd _ (dd L).

ppptac beta_expand beta_expand.
deftac beta_expand (seq _ (eq ## _ # (lam _ x \ F x) # (lam _ x \ (lam _ F) # x))) TAC :-
 TAC = then k (bind _ x \ then sym b).

/* folds a definition, even if applied to arguments */
/* BUG: it seems to fail with restriction errors in some cases */
ppptac f f.
deftac f SEQ (then sym dd).

ppptac (rand_tac C) (rand_tac PC) :- ppptac C PC.
deftac (rand_tac C) SEQ TAC :-
  TAC = thenl c [ r , C ].

ppptac (rator_tac C) (rator_tac PC) :- ppptac C PC.
deftac (rator_tac C) SEQ TAC :-
  TAC = thenl c [ C , r ].

ppptac (abs_tac C) (abs_tac PC) :- ppptac C PC.
deftac (abs_tac C) SEQ TAC :-
  TAC = then k (bind A x \ C).

ppptac (land_tac C) (land_tac PC) :- ppptac C PC.
deftac (land_tac C) SEQ TAC :-
  TAC = thenl c [ thenl c [ r, C ] , r ].

ppptac (sub_tac C) (sub_tac PC) :- ppptac C PC.
deftac (sub_tac C) SEQ TAC :-
  TAC = orelse (rand_tac C) (orelse (rator_tac C) (abs_tac C)).

ppptac (try TAC) (try PTAC) :- ppptac TAC PTAC.
deftac (try TAC) SEQ (orelse TAC id).

ppptac (depth_tac C) (depth_tac PC) :- ppptac C PC.
deftac (depth_tac C) SEQ TAC :-
  TAC = then (try C) (sub_tac (depth_tac C)).

ppptac (conv C) (conv PC) :- ppptac C PC.
deftac (conv C) (seq Gamma F) TAC :-
 TAC = thenl (m G) [ then sym C , id ].

/********** Automation ***********/
/* TODO:
 1) our lforall gets rid of the hypothesis (bad) */
/* left tries to reduce the search space via focusing */
ppptac left left.
deftac left (seq Gamma _) TAC :-
 mem Gamma (not # F),
 TAC =
  (!
   (then (cutth not_e)
    (then (lforall_last F)
     (thenl lapply [ h, (w (not # F)) ])))).
deftac left (seq Gamma _) TAC :-
 /* A bit long because we want to beta-reduce the produced hypothesis.
    Maybe this should be automatized somewhere else. */
 mem Gamma (exists ## _ # F),
 TAC =
  (!
   (then (cutth exists_e)
    (then (lforall_last F)
     (thenl lapply [ h, then (w (exists ## _ # F)) (then apply_last (then forall_i (bind _ x \ then (try (conv (land_tac b))) i))) ])))).
deftac left (seq Gamma H) TAC :-
 mem Gamma (or # F # G),
 TAC =
  (!
   (then (cutth or_e)
    (then (lforall_last F)
     (then (lforall_last G)
      (then (lforall_last H)
       (thenl lapply [ h, then (w (or # F # G)) (then apply_last i)])))))).
deftac left (seq Gamma H) TAC :-
 mem Gamma (and # F # G),
 TAC =
  (!
   (then (cutth and_e)
    (then (lforall_last F)
     (then (lforall_last G)
      (then (lforall_last H)
       (thenl lapply [ h, then (w (and # F # G)) (then apply_last (then i i))])))))).
deftac left (seq Gamma H) TAC :-
 mem Gamma (eq ## TY # F # G),
 not (var TY), TY = prop,
 TAC =
  (then (g (eq ## TY # F # G))
   (then (conv (land_tac (then (applyth eq_to_impl) h)))
     (then i (w (eq ## TY # F # G))))).

ppptac not_i not_i.
deftac not_i (seq _ (not # _)) (applyth not_i).

ppptac inv inv.
deftac inv _ TAC :-
 TAC =
 (then!
  (repeat!
   (orelse! conj (orelse! forall_i (orelse! i (orelse! not_i s)))))
  (bind* (repeat! left))).

ppptac (sync N) (sync N).
deftac (sync N) (seq _ tt) (th tt_intro).
deftac (sync N) (seq Gamma _) (then (applyth ff_elim) h) :-
 mem Gamma ff.
deftac (sync N) (seq _ (or # _ # _))
 (orelse (then (applyth orr) (itaut N)) (then (applyth orl) (itaut N))).
deftac (sync N) (seq _ (exists ## _ # _)) (then (applyth exists_i) (then (conv b) (itaut N2))) :-
 N2 is N - 2.

ppptac (itaut N) (itaut N).
deftac (itaut N) SEQ fail :- N =&lt; 0, !.
deftac (itaut N) SEQ TAC :-
 %print (itaut N) SEQ,
 N1 is N - 1,
 N2 is N - 2,
 TAC =
 (then! inv
  (bind*
   (orelse h
   (orelse (sync N)
   (orelse /* Hypothesis not moved to front */ (then lforall (itaut N2))
   (then lapply (itaut N1))))))).

ppptac (itauteq N) (itauteq N).
deftac (itauteq N) _ (then (cutth eq_reflexive) (itaut N)).

/********** inductive predicates package ********/

ppptac monotone monotone.
deftac monotone (seq _ (impl # X # X)) (! (then i h)) :- !.
deftac monotone (seq [forall ## _ # lam _ x \ impl # (F # x) # (G # x)] (impl # (F # T) # (G # T))) (! apply) :- !.
deftac monotone (seq _ (impl # (and # _ # _) # _)) TAC :-
 TAC = then (applyth and_monotone) monotone.
deftac monotone (seq _ (impl # (or # _ # _) # _)) TAC :-
 TAC = then (applyth or_monotone) monotone.
deftac monotone (seq _ (impl # (impl # _ # _) # _)) TAC :-
 TAC = then (applyth impl_monotone) monotone.
deftac monotone (seq _ (impl # (not # _) # _)) TAC :-
 TAC = then (applyth not_monotone) monotone.
deftac monotone (seq _ (impl # (forall ## _ # lam _ _) # _)) TAC :-
 TAC =
  then (conv (land_tac (rand_tac beta_expand)))
   (then (conv (rand_tac (rand_tac beta_expand)))
     (then (applyth forall_monotone) (then forall_i (bind _ x \
       then (conv (depth_tac b)) (then (conv (depth_tac b)) monotone))))).
deftac monotone (seq _ (impl # (exists ## _ # lam _ _) # _)) TAC :-
 TAC =
  then (conv (land_tac (rand_tac beta_expand)))
   (then (conv (rand_tac (rand_tac beta_expand)))
     (then (applyth exists_monotone) (then forall_i (bind _ x \
       then (conv (depth_tac b)) (then (conv (depth_tac b)) monotone))))).

/* expands &quot;monotone # (lam _ f \ lam _ x \ X f x)&quot; into
   &quot;! x \ p # x ==&gt; q # x |- X p y ==&gt; X q y&quot;
   and then calls the monotone tactic */
ppptac auto_monotone auto_monotone.
deftac auto_monotone _ TAC :-
 TAC =
  then (conv dd)
   (then forall_i (bind _ p \ (then forall_i (bind _ q \
     then (conv (land_tac dd))
      (then (conv (land_tac (depth_tac (dd [in]))))
        (then (conv (land_tac (depth_tac (dd [in]))))
          (then i
            (then (conv dd)
              (then forall_i (bind _ x \
                (then (conv (land_tac dd))
                  (then (conv (rand_tac dd))
                    (then (conv (land_tac (rator_tac b)))
                      (then (conv (land_tac b))
                        (then (conv (rand_tac (rator_tac b)))
                          (then (conv (rand_tac b))
                            monotone)))))))))))))))).

/********** the library ********/

main :- the_library L, append L [stop] Lstop, check Lstop.

go :- the_library L, check L.

the_library L :-
 L =
  [ /******** Primivite operators hard-coded in the kernel ******/
  % decl eq (pi A \ A --&gt; A --&gt; prop)

  /********** Axiomatization of choice over types ********/
    decl choose (pi A \ A)

  /*********** Connectives and quantifiers ********/
  , def tt (prop,((lam prop x \ x) = (lam prop x \ x)))
  , def forall (pi A \ ((A --&gt; prop) --&gt; prop),
     (lam (A --&gt; prop) f \ f = (lam A g \ tt)))
  , def ff (prop,(! x \ x))
  , def and ((prop --&gt; prop --&gt; prop),
     (lam _ x \ lam _ y \ (lam (prop --&gt; prop --&gt; prop) f \ f # x # y) = (lam _ f \ f # tt # tt)))
  , def impl ((prop --&gt; prop --&gt; prop),(lam _ a \ lam _ b \ a &amp;&amp; b &lt;=&gt; a))
  , def exists (pi A \ ((A --&gt; prop) --&gt; prop),
     (lam (A --&gt; prop) f \ ! c \ (! a \ f # a ==&gt; c) ==&gt; c))
  , def not ((prop --&gt; prop),(lam _ x \ x ==&gt; ff))
  , def or ((prop --&gt; prop --&gt; prop),
     (lam _ x \ lam _ y \ ! c \ (x ==&gt; c) ==&gt; (y ==&gt; c) ==&gt; c))
  , theorem tt_intro (tt,[then (conv dd) (then k (bind _ x12 \ r))])
  , theorem ff_elim ((! p \ ff ==&gt; p),
    [then forall_i (bind prop x3\ then (conv (land_tac dd)) (then i forall_e))])
  , theorem sym ((! p \ ! q \ p = q ==&gt; q = p),
    [then forall_i
     (bind prop x12 \
       then forall_i
        (bind prop x13 \
          then i (then sym h)))])
  , theorem not_e ((! p \ not # p ==&gt; p ==&gt; ff),
     [then forall_i (bind prop x3 \ then (conv (land_tac dd)) (then i h))])
  , theorem conj ((! p \ ! q \ p ==&gt; q ==&gt; p &amp;&amp; q),
    [then forall_i
     (bind prop x12 \
      then forall_i (bind prop x13 \ then i (then i (then conj h))))])
  , theorem andl ((! p \ ! q \ p &amp;&amp; q ==&gt; p),
    [then forall_i
     (bind prop x12 \
      then forall_i (bind prop x13 \ then i (then (andl x13) h)))])
  , theorem andr ((! p \ ! q \ p &amp;&amp; q ==&gt; q),
    [then forall_i
     (bind prop x12 \
      then forall_i (bind prop x13 \ then i (then (andr x12) h)))])
  , theorem and_e ((! p \ ! q \ ! c \ p &amp;&amp; q ==&gt; (p ==&gt; q ==&gt; c) ==&gt; c),
     [then forall_i
       (bind prop x12 \
         then forall_i
          (bind prop x13 \
            then forall_i
             (bind prop x14 \ then i (then i (thenl apply [andl, andr])))))])
  , theorem not_i ((! p \ (p ==&gt; ff) ==&gt; not # p),
     [then forall_i (bind prop x2 \ then i (then (conv dd) h))])
  , theorem orl ((! p \ ! q \ p ==&gt; p || q),
      [then forall_i
        (bind prop x12 \
          then forall_i
           (bind prop x13 \
             then i
              (then (conv dd)
                (then forall_i (bind prop x14 \ then i (then i (then apply h)))))))])
  , theorem orr ((! p \ ! q \ q ==&gt; p || q),
      [then forall_i
        (bind prop x12 \
          then forall_i
           (bind prop x13 \
             then i
              (then (conv dd)
                (then forall_i (bind prop x14 \ then i (then i (then apply h)))))))])
  , theorem or_e ((! p \ ! q \ ! c \ p || q ==&gt; (p ==&gt; c) ==&gt; (q ==&gt; c) ==&gt; c),
     [then forall_i
       (bind prop x12 \
         then forall_i
          (bind prop x13 \
            then forall_i
             (bind prop x14 \ then (conv (land_tac dd)) (then i forall_e))))])
  , theorem exists_e (pi T \
     (! f \ (exists ## T # f) ==&gt; (! c \ (! x \ f # x ==&gt; c) ==&gt; c)),
     [then forall_i (bind (T --&gt; prop) x12 \ then (conv (land_tac dd)) (then i h))])
 , theorem exists_i (pi T \ (! f \ ! w \ f # w ==&gt; (exists ## T # f)),
    [then forall_i
     (bind (T --&gt; prop) x12 \
       then forall_i
        (bind T x13 \
          then i
           (then (conv dd)
             (then forall_i
               (bind prop x14 \ then i (then (lforall x13) (then apply h)))))))])
  , theorem eq_to_impl
     ((! x13 \ ! x14 \ (x13 = x14) = ((x13 ==&gt; x14) &amp;&amp; (x14 ==&gt; x13))),
     [thenl inv [(bind prop x13 \ bind prop x14 \ then (conv (then sym h)) h),
       (bind prop x13 \ bind prop x14 \ then (conv h) h),
       (bind prop x13 \ bind prop x14 \ itaut 2),
       (bind prop x13 \ bind prop x14 \ itaut 2)]])

 /*********** Axiomatization of disjoint union ********/
  , decl inj1_disj_union (pi A \pi B \ A --&gt; disj_union ## A ## B)
  , decl inj2_disj_union (pi A \ pi B \ B --&gt; disj_union ## A ## B)
  , decl case_disj_union (pi A \pi B \ pi C \ disj_union ## A ## B --&gt; (A --&gt; C) --&gt; (B --&gt; C) --&gt; C)
  , axiom case_disj_union_inj1 (pi A \ pi B \ pi C \ (! b \ ! (A --&gt; C) e1 \ ! (B --&gt; C) e2  \
    case_disj_union ## A ## B ## C # (inj1_disj_union ## A ## B # b) # e1 # e2 = e1 # b))
  , axiom case_disj_union_inj2 (pi A \ pi B \ pi C \ (! b \ ! (A --&gt; C) e1 \ ! (B --&gt; C) e2  \
    case_disj_union ## A ## B ## C # (inj2_disj_union ## A ## B # b) # e1 # e2 = e2 # b))

 /*********** Axiomatization of the universe ********/
 , decl injection_univ (pi A \pi B \ A --&gt; univ ## A ## B)
 , decl ejection_univ (pi A \pi B \ univ ## A ## B --&gt; A)
 , decl inject_limit_univ (pi A \pi B \ (B --&gt; univ ## A ## B) --&gt; univ ## A ## B)
 , decl eject_limit_univ (pi A \ pi B \ univ ## A ## B --&gt; (B --&gt; univ ## A ## B))
 , decl pair_univ (pi A \pi B \ univ ## A ## B --&gt; univ ## A ## B --&gt; univ ## A ## B)
 , decl proj1_univ (pi A \ pi B \ univ ## A ## B --&gt; univ ## A ## B)
 , decl proj2_univ (pi A \pi B \ univ ## A ## B --&gt; univ ## A ## B)
 , decl inj1_univ (pi A \pi B \ univ ## A ## B --&gt; univ ## A ## B)
 , decl inj2_univ (pi A \pi B \ univ ## A ## B --&gt; univ ## A ## B)
 , decl case_univ (pi A \pi B \ pi C \ univ ## A ## B --&gt; (univ ## A ## B --&gt; C) --&gt; (univ ## A ## B --&gt; C) --&gt; C)
 , axiom ejection_injection_univ (pi A \ pi B \
    ! A p \ ejection_univ ## A ## B # (injection_univ ## A ## B # p) = p)
 , axiom eject_inject_limit_univ (pi A \ pi B \
    ! (B --&gt; univ ## A ## B) p \ eject_limit_univ ## A ## B # (inject_limit_univ ## A ## B # p) = p)
 , axiom proj1_pair_univ (pi A \ pi B \ ! (univ ## A ## B) p1 \ ! p2 \
    proj1_univ ## A ## B # (pair_univ ## A ## B # p1 # p2) = p1)
 , axiom proj2_pair_univ (pi A \ pi B \ ! p1 \ ! (univ ## A ## B) p2 \
    proj2_univ ## A ## B # (pair_univ ## A ## B # p1 # p2) = p2)
 , axiom case_univ_inj1 (pi A \ pi B \ pi C \ (! b \ ! (univ ## A ## B --&gt; C) e1 \ ! e2  \
    case_univ ## A ## B ## C # (inj1_univ ## A ## B # b) # e1 # e2 = e1 # b))
 , axiom case_univ_inj2 (pi A \ pi B \ pi C \ (! b \ ! (univ ## A ## B --&gt; C) e1 \ ! e2 \
    case_univ ## A ## B ## C # (inj2_univ ## A ## B # b) # e1 # e2 = e2 # b))

 /******************* Equality *****************/
 , theorem eq_reflexive (pi A \ ((! A a \ a = a),
   [ then forall_i (bind A x \ r) ]))

 /******************* Logic *****************/
 , theorem or_commutative ((! a \ ! b \ a || b &lt;=&gt; b || a),
   [itaut 1])
 , theorem or_ff ((! a \ a || ff &lt;=&gt; a),
   [itaut 1])
 , theorem or_tt ((! a \ a || tt &lt;=&gt; tt),
   [itaut 1])
 , theorem or_idempotent ((! a \ a || a &lt;=&gt; a),
   [itaut 1])
 , theorem or_associative ((! a \ ! b \ ! c \ a || (b || c) &lt;=&gt; (a || b) || c),
   [itaut 1])
 , theorem and_commutative ((! a \ ! b \ a &amp;&amp; b &lt;=&gt; b &amp;&amp; a),
   [itaut 1])
 , theorem and_tt ((! a \ a &amp;&amp; tt &lt;=&gt; a),
   [itaut 1])
 , theorem and_ff ((! a \ a &amp;&amp; ff &lt;=&gt; ff),
   [itaut 1])
 , theorem and_idempotent ((! a \ a &amp;&amp; a &lt;=&gt; a),
   [itaut 1])
 , theorem and_associative ((! a \ ! b \ ! c \ a &amp;&amp; (b &amp;&amp; c) &lt;=&gt; (a &amp;&amp; b) &amp;&amp; c),
   [itaut 1])
 , theorem and_or ((! a \ ! b \ ! c \ a &amp;&amp; (b || c) &lt;=&gt; (a &amp;&amp; b) || (a &amp;&amp; c)),
   [itaut 1])
 , theorem or_and ((! a \ ! b \ ! c \ a || (b &amp;&amp; c) &lt;=&gt; (a || b) &amp;&amp; (a || c)),
   [itaut 1])
 , theorem ads_or_and ((! a \ ! b \ (a &amp;&amp; b) || b &lt;=&gt; b),
   [itaut 1])
 , theorem ads_and_or ((! a \ ! b \ (a || b) &amp;&amp; b &lt;=&gt; b),
   [itaut 1])
 , theorem not_or ((! a \ ! b \ not # a &amp;&amp; not # b &lt;=&gt; not # (a || b)),
   [itaut 2])
 , theorem not_and ((! a \ ! b \ not # a || not # b ==&gt; not # (a &amp;&amp; b)),
   [itaut 2])
 , theorem not_not_not ((! p \ not # (not # (not # p)) &lt;=&gt; not # p),
   [itaut 3])
 , theorem impl_not_not ((! a \ ! b \ (a ==&gt; b) ==&gt; (not # b ==&gt; not # a)),
   [itaut 3])
 , theorem eq_to_impl_f ((! p \ ! q \ (p &lt;=&gt; q) ==&gt; p ==&gt; q),
    [itaut 2])
 , theorem eq_to_impl_b ((! p \ ! q \ (p &lt;=&gt; q) ==&gt; q ==&gt; p),
    [itaut 2])

/*************** Properties inj/disj/univ ***********/
 , theorem pair_univ_inj_l 
   (pi A \ pi B \ (! (univ ## A ## B) x20 \ ! x21 \ ! x22 \ ! x23 \ pair_univ ## A ## B # x20 # x22 = pair_univ ## A ## B # x21 # x23 ==&gt; x20 = x21) ,
   [then (repeat forall_i)
     (bind (univ ## A ## B) x22 \
       bind (univ ## A ## B) x23 \
        bind (univ ## A ## B) x24 \
         bind (univ ## A ## B) x25 \
          then i
           (then (cutth proj1_pair_univ)
             (then (lforall x22)
               (then (conv (land_tac (then sym apply)))
                 (then (conv (depth_tac h)) (applyth proj1_pair_univ))))))])
 , theorem pair_univ_inj_r 
   (pi A \ pi B \ (! (univ ## A ## B) x20 \ ! x21 \ ! x22 \ ! x23 \ pair_univ ## A ## B # x20 # x22 = pair_univ ## A ## B # x21 # x23 ==&gt; x22 = x23) ,
   [then (repeat forall_i)
     (bind (univ ## A ## B) x22 \
       bind (univ ## A ## B) x23 \
        bind (univ ## A ## B) x24 \
         bind (univ ## A ## B) x25 \
          then i
           (then (cutth proj2_pair_univ)
             (then (lforall x22)
               (then (conv (land_tac (then sym apply)))
                 (then (conv (depth_tac h)) (applyth proj2_pair_univ))))))])
 , theorem injection_univ_inj
   (pi A \ pi B \ (! A x20 \ ! x21 \ injection_univ ## A ## B # x20 = injection_univ ## A ## B # x21 ==&gt; x20 = x21) ,
    [then forall_i
     (bind A x20 \
       then forall_i
        (bind A x21 \
          then (then (cutth ejection_injection_univ) (lforall x21))
           (then (then (cutth ejection_injection_univ) (lforall x20))
             (then i
               (thenl
                 (cut
                   (ejection_univ ## A ## B # (injection_univ ## A ## B # x20) =
                     ejection_univ ## A ## B # (injection_univ ## A ## B # x21)))
                 [thenl
                   (cut
                     ((ejection_univ ## A ## B # (injection_univ ## A ## B # x20) =
                        ejection_univ ## A ## B # (injection_univ ## A ## B # x21)) =
                       (x20 = x21)))
                   [then (conv (depth_tac (then sym h))) h,
                   thenl c [thenl c [r, h], h]], thenl c [r, h]])))))])
 , theorem inj1_univ_inj
   (pi A \ pi B \ (! (univ ## A ## B) x20 \ ! x21 \ inj1_univ ## A ## B # x20 = inj1_univ ## A ## B # x21 ==&gt; x20 = x21) ,
    [then inv
     (bind (univ ## A ## B) x20 \ bind (univ ## A ## B) x21 \
        thenl (t (case_univ ## A ## B ## (univ ## A ## B) # (inj1_univ ## A ## B # x20) &#39;
             (lam (univ ## A ## B) x22 \ x22) &#39;
             (lam (univ ## A ## B) x22 \ x22)))
         [then sym
           (then (conv (land_tac (applyth case_univ_inj1)))
             (then (conv (land_tac b)) r)),
         then (conv (depth_tac h))
          (then (conv (land_tac (applyth case_univ_inj1)))
            (then (conv (land_tac b)) r))])])
 , theorem inj2_univ_inj
   (pi A \ pi B \ (! (univ ## A ## B) x22 \ ! x23 \ inj2_univ ## A ## B # x22 = inj2_univ ## A ## B # x23 ==&gt; x22 = x23) ,
    [then inv
     (bind (univ ## A ## B) x20 \ bind (univ ## A ## B) x21 \
        thenl (t (case_univ ## A ## B ## (univ ## A ## B) # (inj2_univ ## A ## B # x20) &#39;
             (lam (univ ## A ## B) x22 \ x22) &#39;
             (lam (univ ## A ## B) x22 \ x22)))
         [then sym
           (then (conv (land_tac (applyth case_univ_inj2)))
             (then (conv (land_tac b)) r)),
         then (conv (depth_tac h))
          (then (conv (land_tac (applyth case_univ_inj2)))
            (then (conv (land_tac b)) r))])])
 , theorem not_eq_inj1_inj2_univ 
   (pi A \ pi B \ (! (univ ## A ## B) x22 \ ! x23 \ inj1_univ ## A ## B # x22 = inj2_univ ## A ## B # x23 ==&gt; ff) ,
    [then inv
     (bind (univ ## A ## B) x22 \
       bind (univ ## A ## B) x23 \
        then (cutth case_univ_inj1)
         (then (lforall x22)
           (then (lforall (lam (univ ## A ## B) x24 \ ff))
             (then (lforall (lam (univ ## A ## B) x24 \ tt))
               (thenl (m ((lam (univ ## A ## B) x24 \ ff) # x22)) [b,
                 then (conv (then sym h))
                  (then (wl [])
                    (then (conv (depth_tac h))
                      (then (wl [])
                        (then (conv (applyth case_univ_inj2))
                          (then (conv b) (itaut 1))))))])))))])
 , theorem inj1_disj_union_inj (pi A \ pi B \
    ((! x \ ! y \
     inj1_disj_union ## A ## B # x = inj1_disj_union ## A ## B # y ==&gt; x = y) ,
    [then inv
      (bind A x23 \
        bind A x24 \
         then (cutth case_disj_union_inj1)
          (then (lforall x23)
            (then (lforall (lam A x25 \ x25))
              (then (lforall (lam B x25 \ choose ## A))
                (thenl (t ((lam A x25 \ x25) # x23))
                  [then (conv (rand_tac b)) r,
                  then (conv (land_tac (then sym h)))
                   (then (wl [])
                     (then (conv (depth_tac h))
                       (then (wl [])
                         (then (conv (land_tac (applyth case_disj_union_inj1)))
                           b))))])))))]))
 , theorem inj2_disj_union_inj (pi A \ pi B \
    ((! x \ ! y \
     inj2_disj_union ## A ## B # x = inj2_disj_union ## A ## B # y ==&gt; x = y) ,
    [then inv
      (bind B x23 \
        bind B x24 \
         then (cutth case_disj_union_inj2)
          (then (lforall x23)
            (then (lforall (lam A x25 \ choose ## B))
              (then (lforall (lam B x25 \ x25))
                (thenl (t ((lam B x25 \ x25) # x23))
                  [then (conv (rand_tac b)) r,
                  then (conv (land_tac (then sym h)))
                   (then (wl [])
                     (then (conv (depth_tac h))
                       (then (wl [])
                         (then (conv (land_tac (applyth case_disj_union_inj2)))
                           b))))])))))]))

 /********** Monotonicity of logical connectives *********/
 , theorem and_monotone ((! a1 \ ! b1 \ ! a2 \ ! b2 \
    (a1 ==&gt; b1) ==&gt; (a2 ==&gt; b2) ==&gt; a1 &amp;&amp; a2 ==&gt; b1 &amp;&amp; b2),
    [itaut 2])
 , theorem or_monotone ((! a1 \ ! b1 \ ! a2 \ ! b2 \
    (a1 ==&gt; b1) ==&gt; (a2 ==&gt; b2) ==&gt; a1 || a2 ==&gt; b1 || b2),
    [itaut 2])
 , theorem impl_monotone ((! a1 \ ! b1 \ ! a2 \ ! b2 \
    (b1 ==&gt; a1) ==&gt; (a2 ==&gt; b2) ==&gt; (a1 ==&gt; a2) ==&gt; (b1 ==&gt; b2)),
    [itaut 3])
 , theorem not_monotone ((! p \ ! q \ (p ==&gt; q) ==&gt; (not # q) ==&gt; (not # p)),
    [itaut 3])
 , theorem forall_monotone (pi A \ (! p \ ! q \
    (! A x \ p # x ==&gt; q # x) ==&gt; (! x \ p # x) ==&gt; (! x \ q # x)),
    [itaut 6])
 , theorem exists_monotone (pi A \ (! p \ ! q \
    (! A x \ p # x ==&gt; q # x) ==&gt; (? x \ p # x) ==&gt; (? x \ q # x)),
    [itaut 6])

 /********** Knaster-Tarski theorem *********/
  , def in (pi A \ (A --&gt; (A --&gt; prop) --&gt; prop),
     (lam A x \ lam (A --&gt; prop) j \ j # x))
  , def subseteq (pi A \ ((A --&gt; prop) --&gt; (A --&gt; prop) --&gt; prop),
     (lam (A --&gt; prop) x \ lam (A --&gt; prop) y \ ! z \ z #in x ==&gt; z #in y))
  , theorem in_subseteq (pi A \ 
     (! s \ ! t \ ! x \ s &lt;&lt;= t ==&gt; x #in s ==&gt; x #in t),
     [then forall_i
       (bind (A --&gt; prop) x9 \
         then forall_i
          (bind (A --&gt; prop) x10 \
            then forall_i (bind A x11 \ then (conv (land_tac dd)) (itaut 4))))])
  , def monotone (pi A \ (((A --&gt; prop) --&gt; (A --&gt; prop)) --&gt; prop),
      (lam (_ A) f \ ! x \ ! y \ x &lt;&lt;= y ==&gt; f # x &lt;&lt;= f # y))
  , def is_fixpoint (pi A \ (((A --&gt; prop) --&gt; (A --&gt; prop)) --&gt; ((A --&gt; prop) --&gt; prop)),
     (lam (_ A) f \ lam (_ A) x \ (f # x) &lt;&lt;= x &amp;&amp; x &lt;&lt;= (f # x)))
  , def fixpoint (pi A \ (((A --&gt; prop) --&gt; (A --&gt; prop)) --&gt; (A --&gt; prop)),
     (lam (_ A) f \ lam A a \ ! e \ f # e &lt;&lt;= e ==&gt; a #in e))
  , theorem fixpoint_subseteq_any_prefixpoint (pi A \
     (! f \ ! x\ f # x &lt;&lt;= x ==&gt; fixpoint ## A # f &lt;&lt;= x),
     [then inv
       (bind ((A --&gt; prop) --&gt; (A --&gt; prop)) x9 \
         (bind (A --&gt; prop) x10 \
           then (conv (land_tac dd))
            (then (conv dd)
              (then forall_i
                (bind A x11 \
                  then (conv (land_tac dd))
                   (then (conv (land_tac b)) (itaut 4)))))))])
  , theorem fixpoint_subseteq_any_fixpoint (pi A \
     (! f \ ! x\ is_fixpoint ## A # f # x ==&gt; fixpoint ## A # f &lt;&lt;= x),
     [then forall_i
       (bind ((A --&gt; prop) --&gt; (A --&gt; prop)) x9 \
         then forall_i
          (bind (A --&gt; prop) x10 \
            then (conv (land_tac dd))
             (then (cutth fixpoint_subseteq_any_prefixpoint) (itaut 8))))])
  , theorem prefixpoint_to_prefixpoint (pi A \
     (! f \ ! x \ monotone ## A # f ==&gt; f # x &lt;&lt;= x ==&gt; f # (f # x) &lt;&lt;= f # x),
    [then forall_i
      (bind ((A --&gt; prop) --&gt; (A --&gt; prop)) x9 \
        then forall_i
         (bind (A --&gt; prop) x10 \ then (conv (land_tac dd)) (itaut 6)))])
  , theorem fixpoint_is_prefixpoint (pi A \
     (! f \ monotone ## A # f ==&gt; f # (fixpoint ## A # f)&lt;&lt;= fixpoint ## A # f),
     [then inv
       (bind ((A --&gt; prop) --&gt; (A --&gt; prop)) x9 \
         then (conv dd)
          (then inv
            (bind A x10 \
              then (conv (depth_tac (dd [fixpoint])))
               (then (conv dd)
                 (then (conv b)
                   (then inv
                     (bind (A --&gt; prop) x11 \
                       thenl (cut (fixpoint ## A # x9 &lt;&lt;= x11))
                        [thenl
                          (cut (x9 # (fixpoint ## A # x9) &lt;&lt;= x9 # x11))
                          [then (cutth in_subseteq)
                            (then (lforall_last (x9 # x11))
                              (then (lforall_last x11)
                                (thenl apply_last [h,
                                  then (cutth in_subseteq) (itaut 10)]))),
                          thenl
                           (m (monotone ## A # x9 ==&gt; x9 # (fixpoint ## A # x9) &lt;&lt;= x9 # x11))
                           [itaut 10, then (conv (land_tac dd)) (itaut 10)]],
                        then (applyth fixpoint_subseteq_any_prefixpoint) h])))))))])
  , theorem fixpoint_is_fixpoint (pi A \
    (! f \ monotone ## A # f ==&gt; is_fixpoint ## A # f # (fixpoint ## A # f)),
    [then inv
      (bind ((A --&gt; prop) --&gt; (A --&gt; prop)) x9 \
        then (conv (depth_tac (dd [is_fixpoint])))
         (thenl inv [then (applyth fixpoint_is_prefixpoint) h,
           then (applyth fixpoint_subseteq_any_prefixpoint)
            (then (g (monotone ## A # x9))
              (then (conv (land_tac dd))
                (then inv
                  (then apply (then (applyth fixpoint_is_prefixpoint) h)))))]))])

 /*********** Axiomatization of well-founded recursion ********/
 , decl rec (pi A \pi B \ ((A --&gt; B) --&gt; (A --&gt; B)) --&gt; (A --&gt; B))
 , inductive_def acc accF accF_monotone acc_i0 acc_e0 acc_e
    (pi A \ param (A --&gt; A --&gt; prop) lt \ acc \
     [ (acc_i, ! x \ (! y \ lt # y # x ==&gt; acc # y) ==&gt; acc # x) ])

 , def well_founded (pi A \ ((A --&gt; A --&gt; prop) --&gt; prop,
    lam (_ A) lt \ ! x \ acc ## A # lt # x))

 , axiom rec_is_fixpoint (pi A \ pi B \
   (! lt \ well_founded ## A # lt ==&gt;
    ! ((A --&gt; B) --&gt; (A --&gt; B)) h \
     (! f \ ! g \ ! i \
       (! p \ lt # p # i ==&gt; f # p = g # p) ==&gt; h # f # i = h # g # i) ==&gt;
     rec ## A ## B # h = h # (rec ## A ## B # h)))
 /******************* TESTS *****************/
 /* The first three tests are commented out because they require extra-hacks
    in the kernel to avoid quantifying over p, q and g.
 , theorem test_apply (p ==&gt; (p ==&gt; p ==&gt; q) ==&gt; q,
    [then i (then i (then apply h))])
 , theorem test_apply2 (p ==&gt; (! x \ ! y \ x ==&gt; x ==&gt; y) ==&gt; q,
    [then i (then i (then apply h))])
 , theorem test_itaut_1 (((? x \ g x) ==&gt; ! x \ (! y \ g y ==&gt; x) ==&gt; x),
   [itaut 4])*/
 , theorem test_monotone1 (monotone ## _ # (lam _ p \ lam _ x \ not # (p # x) ==&gt; tt &amp;&amp; p # tt || p # x),
   [ auto_monotone ])
 , theorem test_monotone2 (monotone ## _ # (lam _ p \ lam _ x \ ? z \ not # (p # x) ==&gt; tt &amp;&amp; p # tt || z),
   [ auto_monotone ])
 , theorem test_monotone3 (monotone ## _ # (lam _ p \ lam _ x \ ! z \ ? y \ (not # (p # x) ==&gt; z &amp;&amp; p # y || y)),
   [ auto_monotone ])
 , inductive_def pnn pnnF pnnF_monotone pnn_i pnn_e0 pnn_e (pnn \
     [ (pnn_tt, pnn # tt)
     , (pnn_not, ! x \ pnn # x ==&gt; pnn # (not # x))])
 , theorem pnn_e
    ((! x13 \
       x13 # tt &amp;&amp; (! x14 \ x13 # x14 ==&gt; x13 # (not # x14)) ==&gt;
        (! x14 \ pnn # x14 ==&gt; x13 # x14)) ,
   [then forall_i
     (bind (prop --&gt; prop) x13 \
       then (cutth pnn_e0)
        (then (lforall x13)
          (then i
            (thenl lapply
              [then (conv (depth_tac (dd [pnnF])))
                (then forall_i
                  (bind prop x14 \
                    then i
                     % from now on the proof is ad-hoc + fragile
                     (thenl left [then (conv (depth_tac h)) (itaut 1),
                       then left
                        (bind prop x15 \
                          then left (then (conv (depth_tac h)) (itaut 8)))]))),
              h]))))])
 , theorem pnn_has_two_values
    ((! x13 \ pnn # x13 ==&gt; x13 = tt || x13 = ff) ,
    % applying an elimination principle is hard: it should be automatized
    [then (cutth pnn_e)
      (then (lforall (lam prop x13 \ or # (eq ## prop # x13 # tt) # (eq ## prop # x13 # ff)))
        (thenl lapply
          [thenl conj [then (conv b) (itaut 1),
            then (repeat (conv (depth_tac b)))
             (then forall_i (bind prop x13 \ then i (then left (itaut 8))))],
          then inv
           (bind prop x13 \
             then (lforall x13)
              (thenl lapply [h,
                then
                 (g
                   ((lam prop x14 \ or # (eq ## prop # x14 # tt) # (eq ## prop # x14 # ff)) &#39;
                     x13))
                 (then (repeat (conv (depth_tac b)))
                   (then
                     (w
                       ((lam prop x14 \ or # (eq ## prop # x14 # tt) # (eq ## prop # x14 # ff))
                         # x13)) (then (w (pnn # x13)) (itaut 2))))]))]))])
 , inductive_def in_two in_twoF in_twoF_monotone in_two_i in_two_e0 in_two_e (in_two \
     [ (in_two_tt, in_two # tt)
     , (in_two_ff, in_two # ff) ])
 , new_basic_type bool2 myrep2 myabs2 myrepabs2 myabsrep2 myproprep2
    (pnn,
    [then (cutth pnn_tt) (then (applyth exists_i) h)])
 , def mytt (bool2,(myabs2 # tt))
 , def mynot ((bool2 --&gt; bool2),(lam _ x \ myabs2 # (not # (myrep2 # x))))
 , theorem mytt_transfer
   (myrep2 # mytt = tt ,
     [then (conv (depth_tac (dd [mytt])))
       (then (applyth myrepabs2) (applyth pnn_tt))])
 , theorem mynot_transfer
   ((! x18 \ myrep2 # (mynot # x18) = not # (myrep2 # x18)) ,
     [then (conv (depth_tac (dd [mynot])))
       (then forall_i
         (bind bool2 x18 \
           then (applyth myrepabs2)
            (then (applyth pnn_not) (applyth myproprep2))))])
 , theorem mybool2_e
 ((! x18 \
    x18 # mytt &amp;&amp; (! x19 \ x18 # x19 ==&gt; x18 # (mynot # x19)) ==&gt;
     (! x19 \ x18 # x19)) ,
   [thenl
     (cut
       (forall ## (bool2 --&gt; prop) &#39;
         (lam (bool2 --&gt; prop) x18 \
           impl &#39;
            (and # (x18 # (myabs2 # (myrep2 # mytt))) &#39;
              (forall ## bool2 &#39;
                (lam bool2 x19 \
                  impl # (x18 # (myabs2 # (myrep2 # x19))) &#39;
                   (x18 &#39;
                     (myabs2 &#39;
                       (myrep2 # (mynot # (myabs2 # (myrep2 # x19)))))))))
            &#39;
            (forall ## bool2 &#39;
              (lam bool2 x19 \ x18 # (myabs2 # (myrep2 # x19)))))))
     [then
       (g
         (forall ## (bool2 --&gt; prop) &#39;
           (lam (bool2 --&gt; prop) x18 \
             impl &#39;
              (and # (x18 # (myabs2 # (myrep2 # mytt))) &#39;
                (forall ## bool2 &#39;
                  (lam bool2 x19 \
                    impl # (x18 # (myabs2 # (myrep2 # x19))) &#39;
                     (x18 &#39;
                       (myabs2 &#39;
                         (myrep2 # (mynot # (myabs2 # (myrep2 # x19)))))))))
              &#39;
              (forall ## bool2 &#39;
                (lam bool2 x19 \ x18 # (myabs2 # (myrep2 # x19)))))))
       (then
         (w
           (forall ## (bool2 --&gt; prop) &#39;
             (lam (bool2 --&gt; prop) x18 \
               impl &#39;
                (and # (x18 # (myabs2 # (myrep2 # mytt))) &#39;
                  (forall ## bool2 &#39;
                    (lam bool2 x19 \
                      impl # (x18 # (myabs2 # (myrep2 # x19))) &#39;
                       (x18 &#39;
                         (myabs2 &#39;
                           (myrep2 # (mynot # (myabs2 # (myrep2 # x19)))))))))
                &#39;
                (forall ## bool2 &#39;
                  (lam bool2 x19 \ x18 # (myabs2 # (myrep2 # x19)))))))
         (then (repeat (conv (depth_tac (applyth myabsrep2)))) (then i h))),
     then forall_i
      (bind (bool2 --&gt; prop) x18 \
        then (cutth pnn_e)
         (then
           (lforall
             (lam prop x19 \
               exists ## bool2 &#39;
                (lam bool2 x20 \
                  and # (eq ## _ # x19 # (myrep2 # x20)) &#39;
                   (x18 # (myabs2 # x19)))))
           (then inv
             (bind bool2 x19 \
               thenl
                (cut
                  ((lam prop x20 \
                     exists ## bool2 &#39;
                      (lam bool2 x21 \
                        and # (eq ## _ # x20 # (myrep2 # x21)) &#39;
                         (x18 # (myabs2 # x20)))) # (myrep2 # x19)))
                [then
                  (g
                    ((lam prop x20 \
                       exists ## bool2 &#39;
                        (lam bool2 x21 \
                          and # (eq ## _ # x20 # (myrep2 # x21)) &#39;
                           (x18 # (myabs2 # x20)))) # (myrep2 # x19)))
                  (then (conv (depth_tac b)) inv),
                thenl apply
                 [then (repeat (conv (depth_tac b)))
                   (thenl inv
                     [then (cutth exists_i)
                       (then
                         (lforall_last
                           (lam bool2 x20 \
                             and # (eq ## _ # tt # (myrep2 # x20)) &#39;
                              (x18 # (myabs2 # tt))))
                         (then (lforall_last mytt)
                           (then apply_last (then (conv b)
                            (thenl inv
                             [then (cutth mytt_transfer)
                               (then (conv (depth_tac h)) (applyth tt_intro)),
                             (applyth tt_intro),
                             then (cutth mytt_transfer)
                              (then (g (x18 # (myabs2 # (myrep2 # mytt))))
                                (then (conv (depth_tac h)) (then i h)))]))))),
                     (bind prop x20 \
                       bind bool2 x21 \
                        then (cutth exists_i)
                         (then
                           (lforall_last
                             (lam bool2 x22 \
                               and # (eq ## _ # (not # x20) # (myrep2 # x22)) &#39;
                                (x18 # (myabs2 # (not # x20)))))
                           (then (lforall_last (mynot # x21))
                             (then apply_last (then (conv b)
    (thenl inv
     [then (conv (applyth mynot_transfer))
       (then (conv (depth_tac (dd [not]))) (then inv (itaut 3))),
     then (g (myrep2 # (mynot # x21)))
      (then (conv (land_tac (applyth mynot_transfer)))
        (then (conv (depth_tac (dd [not]))) (then inv (itaut 3)))),
     then (lforall (myabs2 # x20))
      (thenl lapply [then (conv (depth_tac (applyth myabsrep2))) h,
        then
         (g
           (x18 &#39;
             (myabs2 &#39;
               (myrep2 # (mynot # (myabs2 # (myrep2 # (myabs2 # x20))))))))
         (then (conv (depth_tac (applyth myabsrep2)))
           (then (conv (depth_tac (applyth myabsrep2)))
             (thenl (cut (x20 = myrep2 # x21))
               [then (conv (depth_tac h))
                 (then (conv (depth_tac h))
                   (then (conv (depth_tac (applyth myabsrep2)))
                     (then i
                       (then
                         (conv
                           (rand_tac
                             (rand_tac (then sym (applyth mynot_transfer)))))
                         (then (conv (depth_tac (applyth myabsrep2))) h))))),
               itaut 2])))])]))))))]),
                 applyth myproprep2]]))))]])

, theorem step0
    ((! x13 \ mynot # (mynot # (mynot # x13)) = mynot # x13) ,
     [then inv
      (bind bool2 x13 \
        then (repeat (conv (depth_tac (dd [mynot]))))
         (thenl (conv (land_tac (rand_tac (rand_tac (applyth myrepabs2)))))
          [then (cutth pnn_not)
            (then (lforall (myrep2 # (myabs2 # (not # (myrep2 # x13)))))
              (then (cutth myproprep2)
                (then (lforall (myabs2 # (not # (myrep2 # x13))))
                  (then apply h)))),
          thenl
           (conv
             (land_tac
               (rand_tac (rand_tac (rand_tac (applyth myrepabs2))))))
           [then (cutth pnn_not)
             (then (lforall (myrep2 # x13))
               (then (cutth myproprep2)
                 (then (lforall x13) (then apply h)))),
           then (conv (land_tac (rand_tac (applyth not_not_not)))) r]]))])
 , theorem mynot_mynot_mytt
    (mynot # (mynot # mytt) = mytt ,
     [then (conv (depth_tac (dd [mynot])))
      (then (cutth mynot_transfer)
        (then (lforall mytt)
          (then (conv (depth_tac h))
            (then (cutth mytt_transfer)
              (then (conv (depth_tac h))
                (then (conv (depth_tac (dd [mytt]))) (thenl c [r, itaut 3])))))))])
 , theorem step1
    ((! x18 \ x18 = mytt || x18 = mynot # mytt) ,
     [then forall_i
      (bind bool2 x18 \
       then (cutth mybool2_e)
        (thenl
          (cut
            ((lam bool2 x19 \
               or # (eq ## _ # x19 # mytt) # (eq ## _ # x19 # (mynot # mytt))) # x18))
          [then
            (g
              ((lam bool2 x19 \
                 or # (eq ## _ # x19 # mytt) # (eq ## _ # x19 # (mynot # mytt))) &#39;
                x18)) (then (conv (depth_tac b)) (then i h)),
          then apply
           (then (repeat (conv (depth_tac b)))
             (thenl conj [then (applyth orl) r,
               thenl inv
                [(bind bool2 x19 \
                   then (applyth orr) (then (conv (depth_tac h)) r)),
                (bind bool2 x19 \
                  then (applyth orl) (then (conv (depth_tac h)) (applyth mynot_mynot_mytt)))]]))]))])

 /******* Cartesian product of types ******/
 /* TODO: this is an inductive type as well: generalize
    inductive_type to type abstractions */
 , def is_pair (pi A \ pi B \
  (univ ## (disj_union ## A ## B) ## prop --&gt; prop),
  lam (_ A B) p \ ? A a \ ? B b \
   p =
    pair_univ ## (_ A B) ## _ &#39;
     (injection_univ ## (_ A B) ## _ # (inj1_disj_union ## A ## B # a)) &#39;
     (injection_univ ## (_ A B) ## _ # (inj2_disj_union ## A ## B # b)))
 , new_basic_type prod prod_rep prod_abs prod_repabs prod_absrep prod_proprep
    (pi A \ pi B \ is_pair ## A ## B, [daemon])
 , def pair (pi A \ pi B \
    (A --&gt; B --&gt; prod ## A ## B,
    lam A a \ lam B b \
     prod_abs ## A ## B &#39;
      (pair_univ ## (_ A B) ## _ &#39;
       (injection_univ ## (_ A B) ## _ # (inj1_disj_union ## A ## B # a)) &#39;
       (injection_univ ## (_ A B) ## _ # (inj2_disj_union ## A ## B # b)))
    ))
 /* TODO: define fst and snd and prove the usual lemmas
    fst # (pair # a # b) = a */

  /************* Natural numbers ***************/
 , inductive_def is_nat is_natF is_nat_monotone is_nat_i is_nat_e0 is_nat_e
   (is_nat \
     [ (is_nat_z, is_nat # (inj1_univ ## prop ## prop # (injection_univ ## prop ## prop # ff)))
     , (is_nat_s, ! x \ is_nat # x ==&gt; is_nat # (inj2_univ ## prop ## prop # x))])
 , new_basic_type nat nat_rep nat_abs nat_repabs nat_absrep nat_proprep
    (is_nat,
    [then (cutth is_nat_z) (then (applyth exists_i) h)])
 , def z (nat, nat_abs # (inj1_univ ## prop ## prop # (injection_univ ## prop ## prop # ff)))
 , def s (nat --&gt; nat,
    (lam _ x \ nat_abs # (inj2_univ ## prop ## prop # (nat_rep # x))))
 /* TODO: consequence of is_nat_e by transfer principles */
 , theorem nat_e ((! p \ p # z ==&gt; (! n \ p # n ==&gt; p # (s # n)) ==&gt; ! n \ p # n), [ daemon ])
 , theorem nat_abs_inj
   ((! x18 \
      ! x19 \
       is_nat # x18 ==&gt;
        is_nat # x19 ==&gt; nat_abs # x18 = nat_abs # x19 ==&gt; x18 = x19) ,
     [then inv
       (bind _ x18 \
         bind _ x19 \
          thenl (conv (land_tac (then sym (applyth nat_repabs)))) [h,
           thenl (conv (rand_tac (then sym (applyth nat_repabs)))) [h,
            then (conv (depth_tac h)) r]])])
 , theorem nat_rep_inj
   ((! x18 \ ! x19 \ nat_rep # x18 = nat_rep # x19 ==&gt; x18 = x19) ,
     [then inv
       (bind nat x18 \
         bind nat x19 \
          then (conv (land_tac (then sym (applyth nat_absrep))))
           (then (conv (rand_tac (then sym (applyth nat_absrep))))
             (then (conv (depth_tac h)) r)))])
 , theorem s_inj ((! x18 \ ! x19 \ s # x18 = s # x19 ==&gt; x18 = x19) ,
     [then (repeat (conv (depth_tac (dd [s]))))
       (then inv
         (bind nat x18 \
           bind nat x19 \
            then (applyth nat_rep_inj)
             (then (applyth inj2_univ_inj)
               (thenl (applyth nat_abs_inj)
                 [then (applyth is_nat_s) (applyth nat_proprep),
                 then (applyth is_nat_s) (applyth nat_proprep), h]))))])
 , theorem not_equal_z_s ((! x20 \ not # (z = s # x20)) ,
     [then (repeat (conv (depth_tac (dd [z]))))
       (then (repeat (conv (depth_tac (dd [s]))))
         (then (repeat (conv (depth_tac (dd [not]))))
           (then inv
             (bind nat x20 \
               then (applyth not_eq_inj1_inj2_univ)
                (thenl (thenl (applyth nat_abs_inj) [id, id, h])
                  [applyth is_nat_z,
                  then (applyth is_nat_s) (applyth nat_proprep)])))))])
 , def nat_case (pi A \ (nat --&gt; A --&gt; (nat --&gt; A) --&gt; A,
    lam _ n \ lam (_ A) a \ lam (_ A) f \
     case_univ ## prop ## prop ## A # (nat_rep # n) # (lam _ x \ a) # (lam _ p \ f # (nat_abs # p))))
 , theorem nat_case_z (pi A \ ((! x21 \ ! x22 \ nat_case ## A # z # x21 # x22 = x21) ,
      [then (conv (depth_tac (dd [nat_case])))
        (then (conv (depth_tac (dd [z])))
          (then forall_i
            (bind A x21 \
              then forall_i
               (bind (nat --&gt; A) x22 \
                 thenl
                  (conv (land_tac (rator_tac (land_tac (applyth nat_repabs)))))
                  [applyth is_nat_z,
                   then (conv (depth_tac (applyth case_univ_inj1)))
                    (then (conv (depth_tac b)) r)]))))]))
 , theorem nat_case_s
   (pi A \ (! x21 \ ! x22 \ ! x23 \
     nat_case ## A # (s # x21) # x22 # x23 = x23 # x21),
     [then (conv (depth_tac (dd [nat_case])))
       (then (conv (depth_tac (dd [s])))
         (then forall_i
           (bind nat x21 \
             then forall_i
              (bind A x22 \
                then forall_i
                 (bind (nat --&gt; A) x23 \
                   thenl
                    (conv (land_tac (rator_tac (land_tac (applyth nat_repabs)))))
                    [then (applyth is_nat_s) (applyth nat_proprep),
                     then (conv (depth_tac (applyth case_univ_inj2)))
                     (then (conv (depth_tac b))
                       (then (conv (depth_tac (applyth nat_absrep))) r))])))))])


 , theorem pred_well_founded
   (well_founded ## nat # (lam nat x21 \ lam nat x22 \ x22 = s # x21) ,
   [then (conv dd)
     (then forall_i
       (bind nat x21 \
         thenl (applyth nat_e)
          [then (applyth acc_i)
            (then (repeat (conv (depth_tac b)))
              (then inv
                (bind nat x22 \
                  then (applyth ff_elim) (then (cutth not_equal_z_s) (itaut 4))))),
          then inv
           (bind nat x22 \
             then (applyth acc_i)
              (then (repeat (conv (depth_tac b)))
                (then inv
                  (bind nat x23 \
                    then (cutth s_inj)
                     (then (lforall x22)
                       (then (lforall x23)
                         (thenl lapply [h,
                           then (conv (rand_tac (then sym h))) h])))))))]))])
 , def nat_recF (pi A \
    A --&gt; (nat --&gt; A --&gt; A) --&gt; (nat --&gt; A) --&gt; (nat --&gt; A)
    , lam A a \ lam (_ A) f \ lam (_ A) rec \ lam _ n \
       nat_case ## A # n # a # (lam _ p \ f # p # (rec # p)))
 , def nat_rec (pi A \
    A --&gt; (nat --&gt; A --&gt; A) --&gt; nat --&gt; A
    , lam A a \ lam (_ A) f \ rec ## nat ## A # (nat_recF ## A # a # f))
 , theorem nat_rec_ok0 (pi A \
   ((! a \ ! f \
     nat_rec ## A # a # f = nat_recF ## A # a # f # (nat_rec ## A # a # f)) ,
   [then inv
     (bind A x22 \
       bind (nat --&gt; A --&gt; A) x23 \
        then (repeat (conv (depth_tac (dd [nat_rec]))))
         (thenl (applyth rec_is_fixpoint) [applyth pred_well_founded,
           then (repeat (conv (depth_tac b)))
            (then (repeat (conv (depth_tac (dd [nat_recF]))))
              (then forall_i
                (bind (nat --&gt; A) x24 \
                  then forall_i
                   (bind (nat --&gt; A) x25 \
                     then (conv (rand_tac beta_expand))
                      (thenl (applyth nat_e)
                        [then (conv (depth_tac b))
                          (then inv
                            (then (conv (land_tac (applyth nat_case_z)))
                              (then (conv (rand_tac (applyth nat_case_z))) r))),
                        then (repeat (conv (depth_tac b)))
                         (then inv
                           (bind nat x26 \
                             then (conv (rand_tac (applyth nat_case_s)))
                              (then (conv (land_tac (applyth nat_case_s)))
                                (then (repeat (conv (depth_tac b)))
                                  (then (lforall x26)
                                    (thenl lapply [r,
                                      then (conv (land_tac (rand_tac h))) r]))))))])))))]))]))
 , theorem nat_rec_ok (pi A \
   (! a \ ! f \ ! n \
     nat_rec ## A # a # f # n =
      nat_case ## A # n # a # (lam _ p \ f # p # (nat_rec ## A # a # f # p))),
   [then inv
     (bind A x22 \
       bind (nat --&gt; A --&gt; A) x23 \
        bind nat x24 \
         then (conv (land_tac (rator_tac (applyth nat_rec_ok0))))
          (then (conv (depth_tac (dd [nat_recF]))) r))])

 /************* Arithmetics: plus ***************/
 , def plus (nat --&gt; nat --&gt; nat,
    lam _ n \ lam _ m \
     nat_rec ## _ # m # (lam _ p \ lam _ sum \ s # sum)&#39; n)
 , theorem plus_z ((! n \ z + n = n),
   [then (conv (depth_tac (dd [plus])))
     (then inv
       (bind nat x21 \
         then (conv (land_tac (applyth nat_rec_ok)))
          (then (conv (land_tac (applyth nat_case_z))) r)))])
 , theorem plus_s ((! n \ ! m \  s # n + m = s # (n + m)),
   [then (repeat (conv (depth_tac (dd [plus]))))
     (then inv
       (bind nat x21 \
         bind nat x22 \
          then (conv (land_tac (applyth nat_rec_ok)))
           (then (conv (land_tac (applyth nat_case_s)))
             (then (repeat (conv (depth_tac b))) r))))])
 , theorem plus_n_z ((! n \ n + z = n),
   [then (conv (rand_tac beta_expand))
     (thenl (applyth nat_e) [then (conv b) (applyth plus_z),
       then (repeat (conv (depth_tac b)))
        (then inv
          (bind nat x21 \
            then (conv (land_tac (applyth plus_s)))
             (then (conv (depth_tac h)) r)))])])
 , theorem plus_n_s ((! n \ ! m \ n + (s # m) = s # (n + m)),
   [then (conv (rand_tac beta_expand))
     (thenl (applyth nat_e)
       [then (conv b)
         (then inv
           (bind nat x21 \ then (repeat (conv (depth_tac (applyth plus_z)))) r)),
       then (repeat (conv (depth_tac b)))
        (then inv
          (bind nat x21 \
            bind nat x22 \
             then (conv (land_tac (applyth plus_s)))
              (thenl c [r,
                then (conv (land_tac apply)) (then sym (applyth plus_s))])))])])
 , theorem plus_comm ((! n \ ! m \ n + m = m + n),
   [then (conv (rand_tac beta_expand))
     (thenl (applyth nat_e)
       [then (conv b)
         (then inv
           (bind nat x21 \
             then (conv (land_tac (applyth plus_z)))
              (then sym (applyth plus_n_z)))),
       then (repeat (conv (depth_tac b)))
        (then inv
          (bind nat x21 \
            bind nat x22 \
             then (conv (land_tac (applyth plus_s)))
              (then sym
                (then (conv (land_tac (applyth plus_n_s)))
                  (thenl c [r, then sym apply])))))])])

 ].

/* Status and dependencies of the tactics:
+dd:
+sym:
+eq_true_intro: (th tt_intro)
+forall_i: dd eq_true_intro
+conj: dd eq_true_intro
+andr: dd tt_intro
+andl: dd tt_intro
+forall_e: sym dd
+mp: andr sym dd
+i: dd andl conj
+cut: andr sym dd i
+cutth: cut
+lapply*: mp
+lforall*: mp forall_e
+apply*: lapply lforall
+applyth: cutth apply*

- f converional sometimes fails
- conv (depth_tac) diverges when applied to terms that contain
  metavariables
- repeat is not implemented using progress, that is not even there
*/

/*
-2.5) in the proof for myprop, at the end I provide the
  witness (and X X) where X remains free (and it is not even pi-quantified).
  If prop was empty, then X could not exist. On the other hand, if X was
  empty, then there would be no need to provide the proof at all.
  In any case, the symptom for X remaining free at the end of a proof is
  one or more goals delayed on it. We never check for them and we have
  no way atm to do that. See bug -3)

-2) the test apply_2 is very slow: why?
    same for the witness for myprop

0) definitions must not be recursive; typing should capture it
   (but not if declare_constraint is commented out...)

0.25) occurr check in bind case still missing :-(

0.50) case AppUvar vs AppUVar in unification is bugged (e.g.)
      X^2 x0 x1 = X^2 x0 x1

2) we need to fix the ELPI problems about handling of metavariables.
 I have already discussed with Enrico about them and he could have a
 shot at them. Namely:
 a) occur check + optimization to avoid it when possible (IN PROGRESS)
 b) unimplemented cases of restriction (IN PROGRESS)

3) once we let metavariables reach the goals, the current HOL-light 
 tactic implementation becomes too fragile. We should let the user 
 refer to hypotheses at least by number if not by name. But we better
 have a bidirectional successor/predecessor via declare_constraint

5) we could implement an automated theorem prover in lambdaProlog
 that works or is interfaced with the HOL-light code. There are
 complete provers like leanCOP 2.0 that are only 10 lines of code,
 but use some Prolog tricks.

6) we should do a small formalization, possibly developing a tactic,
 to prove that everything is working. For example, a decision procedure
 for rings or for linear inequations.

*/
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/hollight.elpi&quot;, line 231, column 18, character 8433:</span>
<span class="go">Malformed mode declaration. Example:</span>
<span class="go">mode (foo i i o).</span>
</pre></div>
</div>
<p><strong>../../tests/sources/hollight_legacy.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">   1</span>
<span class="normal">   2</span>
<span class="normal">   3</span>
<span class="normal">   4</span>
<span class="normal">   5</span>
<span class="normal">   6</span>
<span class="normal">   7</span>
<span class="normal">   8</span>
<span class="normal">   9</span>
<span class="normal">  10</span>
<span class="normal">  11</span>
<span class="normal">  12</span>
<span class="normal">  13</span>
<span class="normal">  14</span>
<span class="normal">  15</span>
<span class="normal">  16</span>
<span class="normal">  17</span>
<span class="normal">  18</span>
<span class="normal">  19</span>
<span class="normal">  20</span>
<span class="normal">  21</span>
<span class="normal">  22</span>
<span class="normal">  23</span>
<span class="normal">  24</span>
<span class="normal">  25</span>
<span class="normal">  26</span>
<span class="normal">  27</span>
<span class="normal">  28</span>
<span class="normal">  29</span>
<span class="normal">  30</span>
<span class="normal">  31</span>
<span class="normal">  32</span>
<span class="normal">  33</span>
<span class="normal">  34</span>
<span class="normal">  35</span>
<span class="normal">  36</span>
<span class="normal">  37</span>
<span class="normal">  38</span>
<span class="normal">  39</span>
<span class="normal">  40</span>
<span class="normal">  41</span>
<span class="normal">  42</span>
<span class="normal">  43</span>
<span class="normal">  44</span>
<span class="normal">  45</span>
<span class="normal">  46</span>
<span class="normal">  47</span>
<span class="normal">  48</span>
<span class="normal">  49</span>
<span class="normal">  50</span>
<span class="normal">  51</span>
<span class="normal">  52</span>
<span class="normal">  53</span>
<span class="normal">  54</span>
<span class="normal">  55</span>
<span class="normal">  56</span>
<span class="normal">  57</span>
<span class="normal">  58</span>
<span class="normal">  59</span>
<span class="normal">  60</span>
<span class="normal">  61</span>
<span class="normal">  62</span>
<span class="normal">  63</span>
<span class="normal">  64</span>
<span class="normal">  65</span>
<span class="normal">  66</span>
<span class="normal">  67</span>
<span class="normal">  68</span>
<span class="normal">  69</span>
<span class="normal">  70</span>
<span class="normal">  71</span>
<span class="normal">  72</span>
<span class="normal">  73</span>
<span class="normal">  74</span>
<span class="normal">  75</span>
<span class="normal">  76</span>
<span class="normal">  77</span>
<span class="normal">  78</span>
<span class="normal">  79</span>
<span class="normal">  80</span>
<span class="normal">  81</span>
<span class="normal">  82</span>
<span class="normal">  83</span>
<span class="normal">  84</span>
<span class="normal">  85</span>
<span class="normal">  86</span>
<span class="normal">  87</span>
<span class="normal">  88</span>
<span class="normal">  89</span>
<span class="normal">  90</span>
<span class="normal">  91</span>
<span class="normal">  92</span>
<span class="normal">  93</span>
<span class="normal">  94</span>
<span class="normal">  95</span>
<span class="normal">  96</span>
<span class="normal">  97</span>
<span class="normal">  98</span>
<span class="normal">  99</span>
<span class="normal"> 100</span>
<span class="normal"> 101</span>
<span class="normal"> 102</span>
<span class="normal"> 103</span>
<span class="normal"> 104</span>
<span class="normal"> 105</span>
<span class="normal"> 106</span>
<span class="normal"> 107</span>
<span class="normal"> 108</span>
<span class="normal"> 109</span>
<span class="normal"> 110</span>
<span class="normal"> 111</span>
<span class="normal"> 112</span>
<span class="normal"> 113</span>
<span class="normal"> 114</span>
<span class="normal"> 115</span>
<span class="normal"> 116</span>
<span class="normal"> 117</span>
<span class="normal"> 118</span>
<span class="normal"> 119</span>
<span class="normal"> 120</span>
<span class="normal"> 121</span>
<span class="normal"> 122</span>
<span class="normal"> 123</span>
<span class="normal"> 124</span>
<span class="normal"> 125</span>
<span class="normal"> 126</span>
<span class="normal"> 127</span>
<span class="normal"> 128</span>
<span class="normal"> 129</span>
<span class="normal"> 130</span>
<span class="normal"> 131</span>
<span class="normal"> 132</span>
<span class="normal"> 133</span>
<span class="normal"> 134</span>
<span class="normal"> 135</span>
<span class="normal"> 136</span>
<span class="normal"> 137</span>
<span class="normal"> 138</span>
<span class="normal"> 139</span>
<span class="normal"> 140</span>
<span class="normal"> 141</span>
<span class="normal"> 142</span>
<span class="normal"> 143</span>
<span class="normal"> 144</span>
<span class="normal"> 145</span>
<span class="normal"> 146</span>
<span class="normal"> 147</span>
<span class="normal"> 148</span>
<span class="normal"> 149</span>
<span class="normal"> 150</span>
<span class="normal"> 151</span>
<span class="normal"> 152</span>
<span class="normal"> 153</span>
<span class="normal"> 154</span>
<span class="normal"> 155</span>
<span class="normal"> 156</span>
<span class="normal"> 157</span>
<span class="normal"> 158</span>
<span class="normal"> 159</span>
<span class="normal"> 160</span>
<span class="normal"> 161</span>
<span class="normal"> 162</span>
<span class="normal"> 163</span>
<span class="normal"> 164</span>
<span class="normal"> 165</span>
<span class="normal"> 166</span>
<span class="normal"> 167</span>
<span class="normal"> 168</span>
<span class="normal"> 169</span>
<span class="normal"> 170</span>
<span class="normal"> 171</span>
<span class="normal"> 172</span>
<span class="normal"> 173</span>
<span class="normal"> 174</span>
<span class="normal"> 175</span>
<span class="normal"> 176</span>
<span class="normal"> 177</span>
<span class="normal"> 178</span>
<span class="normal"> 179</span>
<span class="normal"> 180</span>
<span class="normal"> 181</span>
<span class="normal"> 182</span>
<span class="normal"> 183</span>
<span class="normal"> 184</span>
<span class="normal"> 185</span>
<span class="normal"> 186</span>
<span class="normal"> 187</span>
<span class="normal"> 188</span>
<span class="normal"> 189</span>
<span class="normal"> 190</span>
<span class="normal"> 191</span>
<span class="normal"> 192</span>
<span class="normal"> 193</span>
<span class="normal"> 194</span>
<span class="normal"> 195</span>
<span class="normal"> 196</span>
<span class="normal"> 197</span>
<span class="normal"> 198</span>
<span class="normal"> 199</span>
<span class="normal"> 200</span>
<span class="normal"> 201</span>
<span class="normal"> 202</span>
<span class="normal"> 203</span>
<span class="normal"> 204</span>
<span class="normal"> 205</span>
<span class="normal"> 206</span>
<span class="normal"> 207</span>
<span class="normal"> 208</span>
<span class="normal"> 209</span>
<span class="normal"> 210</span>
<span class="normal"> 211</span>
<span class="normal"> 212</span>
<span class="normal"> 213</span>
<span class="normal"> 214</span>
<span class="normal"> 215</span>
<span class="normal"> 216</span>
<span class="normal"> 217</span>
<span class="normal"> 218</span>
<span class="normal"> 219</span>
<span class="normal"> 220</span>
<span class="normal"> 221</span>
<span class="normal"> 222</span>
<span class="normal"> 223</span>
<span class="normal"> 224</span>
<span class="normal"> 225</span>
<span class="normal"> 226</span>
<span class="normal"> 227</span>
<span class="normal"> 228</span>
<span class="normal"> 229</span>
<span class="normal"> 230</span>
<span class="normal"> 231</span>
<span class="normal"> 232</span>
<span class="normal"> 233</span>
<span class="normal"> 234</span>
<span class="normal"> 235</span>
<span class="normal"> 236</span>
<span class="normal"> 237</span>
<span class="normal"> 238</span>
<span class="normal"> 239</span>
<span class="normal"> 240</span>
<span class="normal"> 241</span>
<span class="normal"> 242</span>
<span class="normal"> 243</span>
<span class="normal"> 244</span>
<span class="normal"> 245</span>
<span class="normal"> 246</span>
<span class="normal"> 247</span>
<span class="normal"> 248</span>
<span class="normal"> 249</span>
<span class="normal"> 250</span>
<span class="normal"> 251</span>
<span class="normal"> 252</span>
<span class="normal"> 253</span>
<span class="normal"> 254</span>
<span class="normal"> 255</span>
<span class="normal"> 256</span>
<span class="normal"> 257</span>
<span class="normal"> 258</span>
<span class="normal"> 259</span>
<span class="normal"> 260</span>
<span class="normal"> 261</span>
<span class="normal"> 262</span>
<span class="normal"> 263</span>
<span class="normal"> 264</span>
<span class="normal"> 265</span>
<span class="normal"> 266</span>
<span class="normal"> 267</span>
<span class="normal"> 268</span>
<span class="normal"> 269</span>
<span class="normal"> 270</span>
<span class="normal"> 271</span>
<span class="normal"> 272</span>
<span class="normal"> 273</span>
<span class="normal"> 274</span>
<span class="normal"> 275</span>
<span class="normal"> 276</span>
<span class="normal"> 277</span>
<span class="normal"> 278</span>
<span class="normal"> 279</span>
<span class="normal"> 280</span>
<span class="normal"> 281</span>
<span class="normal"> 282</span>
<span class="normal"> 283</span>
<span class="normal"> 284</span>
<span class="normal"> 285</span>
<span class="normal"> 286</span>
<span class="normal"> 287</span>
<span class="normal"> 288</span>
<span class="normal"> 289</span>
<span class="normal"> 290</span>
<span class="normal"> 291</span>
<span class="normal"> 292</span>
<span class="normal"> 293</span>
<span class="normal"> 294</span>
<span class="normal"> 295</span>
<span class="normal"> 296</span>
<span class="normal"> 297</span>
<span class="normal"> 298</span>
<span class="normal"> 299</span>
<span class="normal"> 300</span>
<span class="normal"> 301</span>
<span class="normal"> 302</span>
<span class="normal"> 303</span>
<span class="normal"> 304</span>
<span class="normal"> 305</span>
<span class="normal"> 306</span>
<span class="normal"> 307</span>
<span class="normal"> 308</span>
<span class="normal"> 309</span>
<span class="normal"> 310</span>
<span class="normal"> 311</span>
<span class="normal"> 312</span>
<span class="normal"> 313</span>
<span class="normal"> 314</span>
<span class="normal"> 315</span>
<span class="normal"> 316</span>
<span class="normal"> 317</span>
<span class="normal"> 318</span>
<span class="normal"> 319</span>
<span class="normal"> 320</span>
<span class="normal"> 321</span>
<span class="normal"> 322</span>
<span class="normal"> 323</span>
<span class="normal"> 324</span>
<span class="normal"> 325</span>
<span class="normal"> 326</span>
<span class="normal"> 327</span>
<span class="normal"> 328</span>
<span class="normal"> 329</span>
<span class="normal"> 330</span>
<span class="normal"> 331</span>
<span class="normal"> 332</span>
<span class="normal"> 333</span>
<span class="normal"> 334</span>
<span class="normal"> 335</span>
<span class="normal"> 336</span>
<span class="normal"> 337</span>
<span class="normal"> 338</span>
<span class="normal"> 339</span>
<span class="normal"> 340</span>
<span class="normal"> 341</span>
<span class="normal"> 342</span>
<span class="normal"> 343</span>
<span class="normal"> 344</span>
<span class="normal"> 345</span>
<span class="normal"> 346</span>
<span class="normal"> 347</span>
<span class="normal"> 348</span>
<span class="normal"> 349</span>
<span class="normal"> 350</span>
<span class="normal"> 351</span>
<span class="normal"> 352</span>
<span class="normal"> 353</span>
<span class="normal"> 354</span>
<span class="normal"> 355</span>
<span class="normal"> 356</span>
<span class="normal"> 357</span>
<span class="normal"> 358</span>
<span class="normal"> 359</span>
<span class="normal"> 360</span>
<span class="normal"> 361</span>
<span class="normal"> 362</span>
<span class="normal"> 363</span>
<span class="normal"> 364</span>
<span class="normal"> 365</span>
<span class="normal"> 366</span>
<span class="normal"> 367</span>
<span class="normal"> 368</span>
<span class="normal"> 369</span>
<span class="normal"> 370</span>
<span class="normal"> 371</span>
<span class="normal"> 372</span>
<span class="normal"> 373</span>
<span class="normal"> 374</span>
<span class="normal"> 375</span>
<span class="normal"> 376</span>
<span class="normal"> 377</span>
<span class="normal"> 378</span>
<span class="normal"> 379</span>
<span class="normal"> 380</span>
<span class="normal"> 381</span>
<span class="normal"> 382</span>
<span class="normal"> 383</span>
<span class="normal"> 384</span>
<span class="normal"> 385</span>
<span class="normal"> 386</span>
<span class="normal"> 387</span>
<span class="normal"> 388</span>
<span class="normal"> 389</span>
<span class="normal"> 390</span>
<span class="normal"> 391</span>
<span class="normal"> 392</span>
<span class="normal"> 393</span>
<span class="normal"> 394</span>
<span class="normal"> 395</span>
<span class="normal"> 396</span>
<span class="normal"> 397</span>
<span class="normal"> 398</span>
<span class="normal"> 399</span>
<span class="normal"> 400</span>
<span class="normal"> 401</span>
<span class="normal"> 402</span>
<span class="normal"> 403</span>
<span class="normal"> 404</span>
<span class="normal"> 405</span>
<span class="normal"> 406</span>
<span class="normal"> 407</span>
<span class="normal"> 408</span>
<span class="normal"> 409</span>
<span class="normal"> 410</span>
<span class="normal"> 411</span>
<span class="normal"> 412</span>
<span class="normal"> 413</span>
<span class="normal"> 414</span>
<span class="normal"> 415</span>
<span class="normal"> 416</span>
<span class="normal"> 417</span>
<span class="normal"> 418</span>
<span class="normal"> 419</span>
<span class="normal"> 420</span>
<span class="normal"> 421</span>
<span class="normal"> 422</span>
<span class="normal"> 423</span>
<span class="normal"> 424</span>
<span class="normal"> 425</span>
<span class="normal"> 426</span>
<span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span>
<span class="normal">1530</span>
<span class="normal">1531</span>
<span class="normal">1532</span>
<span class="normal">1533</span>
<span class="normal">1534</span>
<span class="normal">1535</span>
<span class="normal">1536</span>
<span class="normal">1537</span>
<span class="normal">1538</span>
<span class="normal">1539</span>
<span class="normal">1540</span>
<span class="normal">1541</span>
<span class="normal">1542</span>
<span class="normal">1543</span>
<span class="normal">1544</span>
<span class="normal">1545</span>
<span class="normal">1546</span>
<span class="normal">1547</span>
<span class="normal">1548</span>
<span class="normal">1549</span>
<span class="normal">1550</span>
<span class="normal">1551</span>
<span class="normal">1552</span>
<span class="normal">1553</span>
<span class="normal">1554</span>
<span class="normal">1555</span>
<span class="normal">1556</span>
<span class="normal">1557</span>
<span class="normal">1558</span>
<span class="normal">1559</span>
<span class="normal">1560</span>
<span class="normal">1561</span>
<span class="normal">1562</span>
<span class="normal">1563</span>
<span class="normal">1564</span>
<span class="normal">1565</span>
<span class="normal">1566</span>
<span class="normal">1567</span>
<span class="normal">1568</span>
<span class="normal">1569</span>
<span class="normal">1570</span>
<span class="normal">1571</span>
<span class="normal">1572</span>
<span class="normal">1573</span>
<span class="normal">1574</span>
<span class="normal">1575</span>
<span class="normal">1576</span>
<span class="normal">1577</span>
<span class="normal">1578</span>
<span class="normal">1579</span>
<span class="normal">1580</span>
<span class="normal">1581</span>
<span class="normal">1582</span>
<span class="normal">1583</span>
<span class="normal">1584</span>
<span class="normal">1585</span>
<span class="normal">1586</span>
<span class="normal">1587</span>
<span class="normal">1588</span>
<span class="normal">1589</span>
<span class="normal">1590</span>
<span class="normal">1591</span>
<span class="normal">1592</span>
<span class="normal">1593</span>
<span class="normal">1594</span>
<span class="normal">1595</span>
<span class="normal">1596</span>
<span class="normal">1597</span>
<span class="normal">1598</span>
<span class="normal">1599</span>
<span class="normal">1600</span>
<span class="normal">1601</span>
<span class="normal">1602</span>
<span class="normal">1603</span>
<span class="normal">1604</span>
<span class="normal">1605</span>
<span class="normal">1606</span>
<span class="normal">1607</span>
<span class="normal">1608</span>
<span class="normal">1609</span>
<span class="normal">1610</span>
<span class="normal">1611</span>
<span class="normal">1612</span>
<span class="normal">1613</span>
<span class="normal">1614</span>
<span class="normal">1615</span>
<span class="normal">1616</span>
<span class="normal">1617</span>
<span class="normal">1618</span>
<span class="normal">1619</span>
<span class="normal">1620</span>
<span class="normal">1621</span>
<span class="normal">1622</span>
<span class="normal">1623</span>
<span class="normal">1624</span>
<span class="normal">1625</span>
<span class="normal">1626</span>
<span class="normal">1627</span>
<span class="normal">1628</span>
<span class="normal">1629</span>
<span class="normal">1630</span>
<span class="normal">1631</span>
<span class="normal">1632</span>
<span class="normal">1633</span>
<span class="normal">1634</span>
<span class="normal">1635</span>
<span class="normal">1636</span>
<span class="normal">1637</span>
<span class="normal">1638</span>
<span class="normal">1639</span>
<span class="normal">1640</span>
<span class="normal">1641</span>
<span class="normal">1642</span>
<span class="normal">1643</span>
<span class="normal">1644</span>
<span class="normal">1645</span>
<span class="normal">1646</span>
<span class="normal">1647</span>
<span class="normal">1648</span>
<span class="normal">1649</span>
<span class="normal">1650</span>
<span class="normal">1651</span>
<span class="normal">1652</span>
<span class="normal">1653</span>
<span class="normal">1654</span>
<span class="normal">1655</span>
<span class="normal">1656</span>
<span class="normal">1657</span>
<span class="normal">1658</span>
<span class="normal">1659</span>
<span class="normal">1660</span>
<span class="normal">1661</span>
<span class="normal">1662</span>
<span class="normal">1663</span>
<span class="normal">1664</span>
<span class="normal">1665</span>
<span class="normal">1666</span>
<span class="normal">1667</span>
<span class="normal">1668</span>
<span class="normal">1669</span>
<span class="normal">1670</span>
<span class="normal">1671</span>
<span class="normal">1672</span>
<span class="normal">1673</span>
<span class="normal">1674</span>
<span class="normal">1675</span>
<span class="normal">1676</span>
<span class="normal">1677</span>
<span class="normal">1678</span>
<span class="normal">1679</span>
<span class="normal">1680</span>
<span class="normal">1681</span>
<span class="normal">1682</span>
<span class="normal">1683</span>
<span class="normal">1684</span>
<span class="normal">1685</span>
<span class="normal">1686</span>
<span class="normal">1687</span>
<span class="normal">1688</span>
<span class="normal">1689</span>
<span class="normal">1690</span>
<span class="normal">1691</span>
<span class="normal">1692</span>
<span class="normal">1693</span>
<span class="normal">1694</span>
<span class="normal">1695</span>
<span class="normal">1696</span>
<span class="normal">1697</span>
<span class="normal">1698</span>
<span class="normal">1699</span>
<span class="normal">1700</span>
<span class="normal">1701</span>
<span class="normal">1702</span>
<span class="normal">1703</span>
<span class="normal">1704</span>
<span class="normal">1705</span>
<span class="normal">1706</span>
<span class="normal">1707</span>
<span class="normal">1708</span>
<span class="normal">1709</span>
<span class="normal">1710</span>
<span class="normal">1711</span>
<span class="normal">1712</span>
<span class="normal">1713</span>
<span class="normal">1714</span>
<span class="normal">1715</span>
<span class="normal">1716</span>
<span class="normal">1717</span>
<span class="normal">1718</span>
<span class="normal">1719</span>
<span class="normal">1720</span>
<span class="normal">1721</span>
<span class="normal">1722</span>
<span class="normal">1723</span>
<span class="normal">1724</span>
<span class="normal">1725</span>
<span class="normal">1726</span>
<span class="normal">1727</span>
<span class="normal">1728</span>
<span class="normal">1729</span>
<span class="normal">1730</span>
<span class="normal">1731</span>
<span class="normal">1732</span>
<span class="normal">1733</span>
<span class="normal">1734</span>
<span class="normal">1735</span>
<span class="normal">1736</span>
<span class="normal">1737</span>
<span class="normal">1738</span>
<span class="normal">1739</span>
<span class="normal">1740</span>
<span class="normal">1741</span>
<span class="normal">1742</span>
<span class="normal">1743</span>
<span class="normal">1744</span>
<span class="normal">1745</span>
<span class="normal">1746</span>
<span class="normal">1747</span>
<span class="normal">1748</span>
<span class="normal">1749</span>
<span class="normal">1750</span>
<span class="normal">1751</span>
<span class="normal">1752</span>
<span class="normal">1753</span>
<span class="normal">1754</span>
<span class="normal">1755</span>
<span class="normal">1756</span>
<span class="normal">1757</span>
<span class="normal">1758</span>
<span class="normal">1759</span>
<span class="normal">1760</span>
<span class="normal">1761</span>
<span class="normal">1762</span>
<span class="normal">1763</span>
<span class="normal">1764</span>
<span class="normal">1765</span>
<span class="normal">1766</span>
<span class="normal">1767</span>
<span class="normal">1768</span>
<span class="normal">1769</span>
<span class="normal">1770</span>
<span class="normal">1771</span>
<span class="normal">1772</span>
<span class="normal">1773</span>
<span class="normal">1774</span>
<span class="normal">1775</span>
<span class="normal">1776</span>
<span class="normal">1777</span>
<span class="normal">1778</span>
<span class="normal">1779</span>
<span class="normal">1780</span>
<span class="normal">1781</span>
<span class="normal">1782</span>
<span class="normal">1783</span>
<span class="normal">1784</span>
<span class="normal">1785</span>
<span class="normal">1786</span>
<span class="normal">1787</span>
<span class="normal">1788</span>
<span class="normal">1789</span>
<span class="normal">1790</span>
<span class="normal">1791</span>
<span class="normal">1792</span>
<span class="normal">1793</span>
<span class="normal">1794</span>
<span class="normal">1795</span>
<span class="normal">1796</span>
<span class="normal">1797</span>
<span class="normal">1798</span>
<span class="normal">1799</span>
<span class="normal">1800</span>
<span class="normal">1801</span>
<span class="normal">1802</span>
<span class="normal">1803</span>
<span class="normal">1804</span>
<span class="normal">1805</span>
<span class="normal">1806</span>
<span class="normal">1807</span>
<span class="normal">1808</span>
<span class="normal">1809</span>
<span class="normal">1810</span>
<span class="normal">1811</span>
<span class="normal">1812</span>
<span class="normal">1813</span>
<span class="normal">1814</span>
<span class="normal">1815</span>
<span class="normal">1816</span>
<span class="normal">1817</span>
<span class="normal">1818</span>
<span class="normal">1819</span>
<span class="normal">1820</span>
<span class="normal">1821</span>
<span class="normal">1822</span>
<span class="normal">1823</span>
<span class="normal">1824</span>
<span class="normal">1825</span>
<span class="normal">1826</span>
<span class="normal">1827</span>
<span class="normal">1828</span>
<span class="normal">1829</span>
<span class="normal">1830</span>
<span class="normal">1831</span>
<span class="normal">1832</span>
<span class="normal">1833</span>
<span class="normal">1834</span>
<span class="normal">1835</span>
<span class="normal">1836</span>
<span class="normal">1837</span>
<span class="normal">1838</span>
<span class="normal">1839</span>
<span class="normal">1840</span>
<span class="normal">1841</span>
<span class="normal">1842</span>
<span class="normal">1843</span>
<span class="normal">1844</span>
<span class="normal">1845</span>
<span class="normal">1846</span>
<span class="normal">1847</span>
<span class="normal">1848</span>
<span class="normal">1849</span>
<span class="normal">1850</span>
<span class="normal">1851</span>
<span class="normal">1852</span>
<span class="normal">1853</span>
<span class="normal">1854</span>
<span class="normal">1855</span>
<span class="normal">1856</span>
<span class="normal">1857</span>
<span class="normal">1858</span>
<span class="normal">1859</span>
<span class="normal">1860</span>
<span class="normal">1861</span>
<span class="normal">1862</span>
<span class="normal">1863</span>
<span class="normal">1864</span>
<span class="normal">1865</span>
<span class="normal">1866</span>
<span class="normal">1867</span>
<span class="normal">1868</span>
<span class="normal">1869</span>
<span class="normal">1870</span>
<span class="normal">1871</span>
<span class="normal">1872</span>
<span class="normal">1873</span>
<span class="normal">1874</span>
<span class="normal">1875</span>
<span class="normal">1876</span>
<span class="normal">1877</span>
<span class="normal">1878</span>
<span class="normal">1879</span>
<span class="normal">1880</span>
<span class="normal">1881</span>
<span class="normal">1882</span>
<span class="normal">1883</span>
<span class="normal">1884</span>
<span class="normal">1885</span>
<span class="normal">1886</span>
<span class="normal">1887</span>
<span class="normal">1888</span>
<span class="normal">1889</span>
<span class="normal">1890</span>
<span class="normal">1891</span>
<span class="normal">1892</span>
<span class="normal">1893</span>
<span class="normal">1894</span>
<span class="normal">1895</span>
<span class="normal">1896</span>
<span class="normal">1897</span>
<span class="normal">1898</span>
<span class="normal">1899</span>
<span class="normal">1900</span>
<span class="normal">1901</span>
<span class="normal">1902</span>
<span class="normal">1903</span>
<span class="normal">1904</span>
<span class="normal">1905</span>
<span class="normal">1906</span>
<span class="normal">1907</span>
<span class="normal">1908</span>
<span class="normal">1909</span>
<span class="normal">1910</span>
<span class="normal">1911</span>
<span class="normal">1912</span>
<span class="normal">1913</span>
<span class="normal">1914</span>
<span class="normal">1915</span>
<span class="normal">1916</span>
<span class="normal">1917</span>
<span class="normal">1918</span>
<span class="normal">1919</span>
<span class="normal">1920</span>
<span class="normal">1921</span>
<span class="normal">1922</span>
<span class="normal">1923</span>
<span class="normal">1924</span>
<span class="normal">1925</span>
<span class="normal">1926</span>
<span class="normal">1927</span>
<span class="normal">1928</span>
<span class="normal">1929</span>
<span class="normal">1930</span>
<span class="normal">1931</span>
<span class="normal">1932</span>
<span class="normal">1933</span>
<span class="normal">1934</span>
<span class="normal">1935</span>
<span class="normal">1936</span>
<span class="normal">1937</span>
<span class="normal">1938</span>
<span class="normal">1939</span>
<span class="normal">1940</span>
<span class="normal">1941</span>
<span class="normal">1942</span>
<span class="normal">1943</span>
<span class="normal">1944</span>
<span class="normal">1945</span>
<span class="normal">1946</span>
<span class="normal">1947</span>
<span class="normal">1948</span>
<span class="normal">1949</span>
<span class="normal">1950</span>
<span class="normal">1951</span>
<span class="normal">1952</span>
<span class="normal">1953</span>
<span class="normal">1954</span>
<span class="normal">1955</span>
<span class="normal">1956</span>
<span class="normal">1957</span>
<span class="normal">1958</span>
<span class="normal">1959</span>
<span class="normal">1960</span>
<span class="normal">1961</span>
<span class="normal">1962</span>
<span class="normal">1963</span>
<span class="normal">1964</span>
<span class="normal">1965</span>
<span class="normal">1966</span>
<span class="normal">1967</span>
<span class="normal">1968</span>
<span class="normal">1969</span>
<span class="normal">1970</span>
<span class="normal">1971</span>
<span class="normal">1972</span>
<span class="normal">1973</span>
<span class="normal">1974</span>
<span class="normal">1975</span>
<span class="normal">1976</span>
<span class="normal">1977</span>
<span class="normal">1978</span>
<span class="normal">1979</span>
<span class="normal">1980</span>
<span class="normal">1981</span>
<span class="normal">1982</span>
<span class="normal">1983</span>
<span class="normal">1984</span>
<span class="normal">1985</span>
<span class="normal">1986</span>
<span class="normal">1987</span>
<span class="normal">1988</span>
<span class="normal">1989</span>
<span class="normal">1990</span>
<span class="normal">1991</span>
<span class="normal">1992</span>
<span class="normal">1993</span>
<span class="normal">1994</span>
<span class="normal">1995</span>
<span class="normal">1996</span>
<span class="normal">1997</span>
<span class="normal">1998</span>
<span class="normal">1999</span>
<span class="normal">2000</span>
<span class="normal">2001</span>
<span class="normal">2002</span>
<span class="normal">2003</span>
<span class="normal">2004</span>
<span class="normal">2005</span>
<span class="normal">2006</span>
<span class="normal">2007</span></pre></div></td><td class="code"><div><pre><span></span>% vim: set ft=lprolog:

infixr --&gt; 126. % type arrow
infixl &#39;   255. % infix application
infixl &#39;&#39;  255. % infix System-F application
infixl &amp;&amp;  128. % and
infixl `or  127. % or
infixr ==&gt; 126. % implication
infixr &lt;=&gt; 125. % iff
infix  #in 135. % membership
infix  &lt;&lt;= 130. % subseteq

/* Untrusted predicates called from the kernel:
 * next_object            next object to check
 * callback_proved        proof completed
 * next_tactic            next tactic to use
 * update_certificate     get new certificate after tactic application
 * end_of_proof           is the certificate/proof empty?
 * ppterm                 for pretty-printing messages
 * deftac                 tactic definition
 */

/* Predicates exported from the trusted library:
 * append
 * fold2_append
 * put_binds
 */
 
/* Predicates exported from the kernel:
 * proves
 * check
 */

{ /***** Trusted code base *******/

/***** Trusted library functions *****/

/* The names with &#39; at the end are trusted; the ones without are
   exported and therefore untrusted. */
local append&#39;, fold2_append&#39;, put_binds&#39;.

append&#39; [] L L.
append&#39; [ X | XS ] L [ X | RES ] :- append&#39; XS L RES.
append A B C :- append&#39; A B C.

fold2_append&#39; [] [] _ [].
fold2_append&#39; [ X | XS ] [ Y | YS ] F OUTS :-
 F X Y OUT, fold2_append&#39; XS YS F OUTS2, append&#39; OUT OUTS2 OUTS.
fold2_append A B C D :- fold2_append&#39; A B C D.

% put_binds : list &#39;b -&gt; &#39;a -&gt; &#39;c -&gt; list (bounded &#39;b) -&gt; o
% put_binds [ f1,...,fn ] x t [ bind t x \ f1,...,bind t x fn ]
% binding all the xs that occur in f1,...,fn
put_binds&#39; [] _ _ [].
put_binds&#39; [ YX | YSX ] X A [ bind A Y | YYS ] :-
 YX = Y X, put_binds&#39; YSX X A YYS.
put_binds A B C D :- put_binds&#39; A B C D.

/***** The HOL kernel *****/

local thm, provable, def0, term, typ, typ&#39;, loop, prove, check1,
 check1def, check1thm, check1axm, check1nbt,
 reterm, not_defined, check_hyps.

proves T TY :- provable T TY.

typ T :- !. % this line temporarily drops checking of well-formedness for types
            % to avoid too much slow down. It is ultimately due to re-typing
            % terms that should be recognized as already well typed.
typ T :- var T, !, declare_constraint (typ T) [ T ].
typ T :- typ&#39; T.
typ&#39; prop.
typ&#39; (univ &#39;&#39; A &#39;&#39; B) :- typ A, typ B.
typ&#39; (A --&gt; B) :- typ A, typ B.
typ&#39; (disj_union &#39;&#39; A &#39;&#39; B) :- typ A, typ B.

mode (term i o).
term (lam A F) (A --&gt; B) :- typ A, pi x\ term x A =&gt; term (F x) B.
term (F &#39; T) B :- term F (A --&gt; B), term T A.
term (eq &#39;&#39; A) (A --&gt; A --&gt; prop) :- typ A.
term (uvar as T) TY :- declare_constraint (term T TY) T.

/* like term, but on terms that are already known to be well-typed */
mode (reterm i o).
reterm (lam A F) (A --&gt; B) :- pi x\ reterm x A =&gt; reterm (F x) B.
reterm (F &#39; T) B :- reterm F (A --&gt; B).
reterm (eq &#39;&#39; A) (A --&gt; A --&gt; prop).
reterm (uvar as T) TY :- declare_constraint (reterm T TY) T.

constraint term reterm { /* No propagation rules for now */}

% thm : bounded tactic -&gt; bounded sequent -&gt; list (bounded sequent) -&gt; o
thm C (seq Gamma G) _ :- debug, print Gamma &quot;|- &quot; G &quot; := &quot; C, fail.

/* &lt;&lt; HACKS FOR DEBUGGING */
thm daemon (seq Gamma F) [].
/* &gt;&gt; HACKS FOR DEBUGGING */

thm r (seq Gamma (eq &#39;&#39; _ &#39; X &#39; X)) [].
thm (t Y) (seq Gamma (eq &#39;&#39; A &#39; X &#39; Z))
 [ seq Gamma (eq &#39;&#39; A &#39; X &#39; Y), seq Gamma (eq &#39;&#39; A &#39; Y &#39; Z) ] :- term Y A.
thm (m P) (seq Gamma Q) [ seq Gamma (eq &#39;&#39; prop &#39; P &#39; Q), seq Gamma P ] :- term P prop.
thm b (seq Gamma (eq &#39;&#39; _ &#39; ((lam _ F) &#39; X) &#39; (F X))) [].
thm c (seq Gamma (eq &#39;&#39; B &#39; (F &#39; X) &#39; (G &#39; Y)))
 [ seq Gamma (eq &#39;&#39; (A --&gt; B) &#39; F &#39; G) , seq Gamma (eq &#39;&#39; A &#39; X &#39; Y) ] :- reterm X A, reterm Y A.
thm k (seq Gamma (eq &#39;&#39; (A --&gt; B) &#39; (lam A S) &#39; (lam A T)))
 [ bind A x \ seq Gamma (eq &#39;&#39; B &#39; (S x) &#39; (T x)) ].
thm s (seq Gamma (eq &#39;&#39; prop &#39; P &#39; Q)) [ seq (P :: Gamma) Q, seq (Q :: Gamma) P ].
thm (h IGN) (seq Gamma P) [] :- append&#39; IGN [ P | Gamma2 ] Gamma.

thm d (seq Gamma (eq &#39;&#39; _ &#39; C &#39; A)) [] :- def0 C A.
thm (th NAME) (seq _ G) [] :- provable NAME G.

thm (thenll TAC1 TACN) SEQ SEQS :-
 thm TAC1 SEQ NEW,
 deftacl TACN NEW TACL,
 fold2_append&#39; TACL NEW thm SEQS.

/*debprint _ (then _ _) :- !.
debprint _ (thenl _ _) :- !.
debprint O T :- print O T.*/

thm TAC SEQ SEQS :-
 deftac TAC SEQ XTAC,
 /*debprint &quot;&lt;&lt;&quot; TAC,
 (*/ thm XTAC SEQ SEQS /*, debprint &quot;&gt;&gt;&quot; TAC
 ; debprint &quot;XX&quot; TAC, fail)*/.

thm (! TAC) SEQ SEQS :-
 thm TAC SEQ SEQS,
 !.

thm id SEQ [ SEQ ].

thm (wl Gamma1) (seq Gamma F) [ seq WGamma F ] :-
 append&#39; Gamma1 [ P | Gamma2 ] Gamma,
 append&#39; Gamma1 Gamma2 WGamma.

thm (bind A TAC) (bind A SEQ) NEWL :-
 pi x \ term x A =&gt; reterm x A =&gt; thm (TAC x) (SEQ x) (NEW x), put_binds&#39; (NEW x) x A NEWL.

thm ww (bind A x \ SEQ) [ SEQ ].

/* debuggin only, remove it */
%thm A B C :- print &quot;FAILED &quot; (thm A B C), fail.

% loop : list (bounded sequent) -&gt; certificate -&gt; o
%loop SEQS TACS :- print &quot;LOOP&quot; (loop SEQS TACS), fail.
loop [] CERTIFICATE :- end_of_proof CERTIFICATE.
loop [ SEQ | OLD ] CERTIFICATE :-
 next_tactic [ SEQ | OLD ] CERTIFICATE ITAC,
 thm ITAC SEQ NEW,
 append&#39; NEW OLD SEQS,
 update_certificate CERTIFICATE ITAC NEW NEW_CERTIFICATE,
 loop SEQS NEW_CERTIFICATE.

prove G TACS :-
 (term G prop, ! ; ppterm PG G, print &quot;Bad statement:&quot; PG, fail),
% (TACS = (false,_), ! ;
 loop [ seq [] G ] TACS
. % ).

not_defined P NAME :-
 not (P NAME _) ; print &quot;Error:&quot; NAME already defined, fail.

check_hyps HS (typ&#39; TYPE) :-
 (not (typ&#39; TYPE) ; print &quot;Error:&quot; TYPE already defined, fail), print HS new TYPE.
check_hyps HS (def0 NAME DEF) :- ppterm PDEF DEF, print HS NAME &quot;=&quot; PDEF.
check_hyps HS (term NAME TYPE) :-
 not_defined term NAME, ppterm PTYPE TYPE, print HS NAME &quot;:&quot; PTYPE.
check_hyps HS (reterm _ _).
check_hyps HS (provable NAME TYPE) :-
 not_defined provable NAME, ppterm PTYPE TYPE, print HS NAME &quot;:&quot; PTYPE.
check_hyps HS (H1,H2) :- check_hyps HS H1, check_hyps HS H2.
check_hyps HS (pi H) :- pi x \ typ&#39; x =&gt; check_hyps [x | HS] (H x).
check_hyps HS (_ =&gt; H2) :- check_hyps HS H2.

/* check1 I O
   checks the declaration I
   returns the new assumption O */
check1 (theorem NAME GOALTACTICS) HYPS :- check1thm NAME GOALTACTICS HYPS, !.
check1 (axiom NAME ST) HYPS :- check1axm NAME ST HYPS, !.
check1 (new_basic_type TYPE REP ABS REPABS ABSREP PREPH P_TACTICS) HYPS :- check1nbt TYPE REP ABS REPABS ABSREP PREPH P_TACTICS true HYPS, !.
check1 (def NAME TYPDEF) HYPS :- check1def NAME TYPDEF true HYPS, !.
check1 (decl NAME TYP) HYPS :- check1decl NAME TYP true HYPS, !.

check1def NAME (pi I) HYPSUCHTHAT (pi HYPS) :-
 pi x \ typ&#39; x =&gt; check1def (NAME &#39;&#39; x) (I x) (HYPSUCHTHAT, typ x) (HYPS x).
check1def NAME (TYP,DEF) HYPSUCHTHAT HYPS :-
 typ TYP, term DEF TYP,
 HYPS = ((HYPSUCHTHAT =&gt; term NAME TYP), reterm NAME TYP, def0 NAME DEF).

check1decl NAME (pi I) HYPSUCHTHAT (pi HYPS) :-
 pi x \ typ&#39; x =&gt; check1decl (NAME &#39;&#39; x) (I x) (HYPSUCHTHAT, typ x) (HYPS x).
check1decl NAME TYP HYPSUCHTHAT HYPS :-
 typ TYP, HYPS = ((HYPSUCHTHAT =&gt; term NAME TYP), reterm NAME TYP).

check1thm NAME (pi I) (pi HYPS) :-
 pi x \ typ&#39; x =&gt; check1thm NAME (I x) (HYPS x).
check1thm NAME (GOAL,TACTICS) (provable NAME GOAL) :-
  prove GOAL TACTICS,
  callback_proved NAME GOAL TACTICS.

check1axm NAME (pi I) (pi HYPS) :- !,
 pi x \ typ&#39; x =&gt; check1axm NAME (I x) (HYPS x).
check1axm NAME GOAL (provable NAME GOAL) :-
 term GOAL prop, ! ; ppterm PGOAL GOAL, print &quot;Bad statement:&quot; PGOAL, fail.

check1nbt TYPE REP ABS REPABS ABSREP PREPH (pi P_TACTICS) HYPSUCHTHAT (pi HYPS) :-
 pi x \ typ&#39; x =&gt; check1nbt (TYPE &#39;&#39; x) (REP &#39;&#39; x) (ABS &#39;&#39; x) REPABS ABSREP PREPH (P_TACTICS x) (HYPSUCHTHAT, typ x) (HYPS x).
check1nbt TYPE REP ABS REPABS ABSREP PREPH (P,TACTICS) HYPSUCHTHAT HYPS :-
  term P (X --&gt; prop),
  prove (exists &#39;&#39; _ &#39; P ) TACTICS,
  callback_proved existence_condition (exists &#39;&#39; _ &#39; P) TACTICS,
  REPTYP = (TYPE --&gt; X),
  ABSTYP = (X --&gt; TYPE),
  ABSREPTYP = (forall &#39;&#39; TYPE &#39; lam TYPE x \ eq &#39;&#39; TYPE &#39; (ABS &#39; (REP &#39; x)) &#39; x),
  REPABSTYP = (forall &#39;&#39; X &#39; lam X x \ impl &#39; (P &#39; x) &#39; (eq &#39;&#39; X &#39; (REP &#39; (ABS &#39; x)) &#39; x)),
  PREPHTYP = (forall &#39;&#39; TYPE &#39; lam TYPE x \ (P &#39; (REP &#39; x))),
  !,
  HYPS =
   ( (HYPSUCHTHAT =&gt; typ&#39; TYPE)
   , (HYPSUCHTHAT =&gt; term REP REPTYP), reterm REP REPTYP
   , (HYPSUCHTHAT =&gt; term ABS ABSTYP), reterm ABS ABSTYP
   , provable ABSREP ABSREPTYP
   , provable REPABS REPABSTYP, provable PREPH PREPHTYP).

check WHAT :-
 next_object WHAT C CONT,
 (C = stop, !, K = true ; check1 C H , check_hyps [] H, print_constraints, K = (H =&gt; check CONT)),
 !, K.

}

/************ parsing and pretty-printing ********/
% ppterm/parseterm
%ppterm X Y :- ppp X Y. parseterm X Y :- ppp X Y.
%ppp X Y :- var X, var Y, !, X = Y.
%ppp X (F &#39; G) :- var X, (var F ; var G), !, X = (F &#39; G).
%ppp X (F &#39; G &#39; H) :- var X, (var F ; var G ; var H), !,
% X = (F &#39; G &#39; H).

mode (ppp o i) xas ppterm, (ppp i o) xas parseterm.

ppp (! F2) (forall &#39;&#39; _ &#39; lam _ F1) :- !, pi x \ ppp (F2 x) (F1 x).
ppp (! TY F2) (forall &#39;&#39; TY &#39; lam TY F1) :- !, pi x \ ppp (F2 x) (F1 x).
ppp (? F2) (exists &#39;&#39; _ &#39; lam _ F1) :- !, pi x \ ppp (F2 x) (F1 x).
ppp (? TY F2) (exists &#39;&#39; TY &#39; lam TY F1) :- !, pi x \ ppp (F2 x) (F1 x).
ppp (F2 &lt;=&gt; G2) (eq &#39;&#39; prop &#39; F1 &#39; G1) :- !, ppp F2 F1, ppp G2 G1.
ppp (F2 = G2) (eq &#39;&#39; _ &#39; F1 &#39; G1) :- !, ppp F2 F1, ppp G2 G1.
ppp (F2 &amp;&amp; G2) (and &#39; F1 &#39; G1) :- !, ppp F2 F1, ppp G2 G1.
ppp (F2 `or G2) (or &#39; F1 &#39; G1) :- !, ppp F2 F1, ppp G2 G1.
ppp (F2 ==&gt; G2) (impl &#39; F1 &#39; G1) :- !, ppp F2 F1, ppp G2 G1.
ppp (X2 #in S2) (in &#39;&#39; _ &#39; X1 &#39; S1) :- !, ppp X2 X1, ppp S2 S1.
ppp (U2 &lt;&lt;= V2) (subseteq &#39;&#39; _ &#39; U1 &#39; V1) :- !, ppp U2 U1, ppp V2 V1.
ppp (F2 + G2) (plus &#39; F1 &#39; G1) :- !, ppp F2 F1, ppp G2 G1.
ppp (F2 &#39; G2) (F1 &#39; G1) :- !, ppp F2 F1, ppp G2 G1.
ppp (lam A F2) (lam A F1) :- !, pi x \ ppp (F2 x) (F1 x).
ppp A A.

/* safe_list_map that unifies the two lists if they are both flexible
   probably only useful for parsing/pretty-printing */
safe_list_map L1 _ L2 :- var L1, var L2, !, L1 = L2.
safe_list_map L1 F L2 :- list_map L1 F L2.

% pptac(ppterm)/parsetac(parseterm)
% pptac X Y :- ppptac X Y.  parsetac X Y :- ppptac X Y.

mode (ppptac i o) xas parsetac(ppp -&gt; parseterm),
     (ppptac o i) xas pptac(ppp -&gt; ppterm).

ppptac daemon daemon.
ppptac r r.
ppptac (t Y) (t PY) :- ppp Y PY.
ppptac (m Y) (m PY) :- ppp Y PY.
ppptac b b.
ppptac c c.
ppptac k k.
ppptac s s.
ppptac (h Gamma) (h PGamma) :- safe_list_map Gamma ppp PGamma.
ppptac d d.
ppptac (th NAME) (th NAME).
ppptac (thenll TAC1 TACN) (thenll PTAC1 PTACN) :-
 ppptac TAC1 PTAC1, ppptac TACN PTACN.
ppptac (! TAC) (! PTAC) :- ppptac TAC PTAC.
ppptac id id.
ppptac (wl Gamma) (wl PGamma) :- safe_list_map Gamma ppp PGamma.
ppptac (bind A TAC) (bind PA PTAC) :-
 ppp A PA, pi x \ ppptac (TAC x) (PTAC x).
ppptac ww ww.

/************ interactive and non interactive loops ********/

ppptac interactive interactive.

parse_obj (theorem NAME PSTTAC) [theorem NAME STTAC] :-
 parse_thm NAME PSTTAC STTAC.
parse_obj (axiom NAME PTYP) [axiom NAME TYP] :- parse_axiom PTYP TYP.
parse_obj (new_basic_type TYPE REP ABS REPABS ABSREP PREP PP_TACTICS)
 [new_basic_type TYPE REP ABS REPABS ABSREP PREP P_TACTICS] :- parse_nbt PP_TACTICS P_TACTICS.
parse_obj (def NAME PTYBO) [def NAME TYBO] :- parse_def PTYBO TYBO.
parse_obj (decl NAME TY) [decl NAME TY].
parse_obj (inductive_def PRED PREDF PREDF_MON PRED_I PRED_E0 PRED_E K) EXP :-
 inductive_def_pkg PRED PREDF PREDF_MON PRED_I PRED_E0 PRED_E K EXP.
parse_obj stop [stop].

parse_def (pi I) (pi O) :- pi x \ parse_def (I x) (O x).
parse_def (TY,PB) (TY,B) :- parseterm PB B.

parse_axiom (pi I) (pi O) :- !, pi x \ parse_axiom (I x) (O x).
parse_axiom PST ST :- parseterm PST ST.

parse_thm NAME (pi I) (pi O) :- pi x \ parse_thm NAME (I x) (O x).
parse_thm _ (PST,TAC) (ST,(false,TAC)) :- !, parseterm PST ST.
parse_thm NAME PST (ST,(true,[_])) :-
 (not (proves NAME _) ; print &quot;Error:&quot; NAME already defined, fail),
 parseterm PST ST.

parse_nbt (pi I) (pi O) :- !, pi x \ parse_nbt (I x) (O x).
parse_nbt (PP,TACTICS) (P,(false,TACTICS)) :- parseterm PP P.
parse_nbt PP (P,(true,[_])) :- parseterm PP P.

next_object [ C | NEXT ] CT CONTNEXT :-
  parse_obj C [ CT | CONT ], append CONT NEXT CONTNEXT.
next_object [] C CONT :- 
 print &quot;Welcome to HOL extra-light&quot;,
 toplevel_loop [ C | CONT ].
next_object toplevel C CONT :- toplevel_loop [ C | CONT ].

read_cmd H :-
 print &quot;Enter a command or \&quot;stop.\&quot;&quot;,
 flush std_out, $readterm std_in H,
 !.
read_cmd H :- read_cmd H.

toplevel_loop G :-
 read_cmd H,
 ( H = stop, !, G = [stop]
 ; parse_obj H PH, !, (append PH toplevel G ; print &quot;error&quot;, toplevel_loop G)
 ; print &quot;bad command&quot;, toplevel_loop G ).

callback_proved _ _ (false,_).
callback_proved NAME G (true, [ TAC ]) :-
 canonical TAC CANONICALTAC,
 pptac PCANONICALTAC CANONICALTAC,
 ppterm PG G,
 print (theorem NAME (PG , [ PCANONICALTAC ] )).

end_of_proof (true, []) :- print &quot;proof completed&quot;.
end_of_proof (false, []).

next_tactic0 [ SEQ | OLD ] (true, [ _ | _ ]) ITAC :-
 print,
 list_iter_rev [ SEQ | OLD ] print_sequent,
 read_in_context SEQ ITAC BACKTRACK,
 BACKTRACK.
next_tactic0 SEQS (true, CERT) ITAC :-
 print &quot;error&quot;,
 next_tactic SEQS (true, CERT) ITAC.
next_tactic0 SEQS (true_then_false, (_,INT_TACS,_)) ITAC :-
 next_tactic0 SEQS (true, INT_TACS) ITAC.
next_tactic0 SEQS (false, [ interactive | _ ]) ITAC :-
 next_tactic0 SEQS (true, [ _ ]) ITAC.
next_tactic0 [ SEQ | OLD ] (false, [ TAC | _ ]) TAC.
next_tactic0 _ (false, _) ITAC :-
 print &quot;aborted&quot;,
 halt.

next_tactic SEQS CERT TAC :- next_tactic0 SEQS CERT PTAC, parsetac PTAC TAC.

update_certificate (true, [ TAC | OTHER_TACS ]) ITAC NEW (true, TACS) :-
 mk_script ITAC NEW NEW_TACS TAC,
 append NEW_TACS OTHER_TACS TACS.
update_certificate (false, [ interactive | NON_INTERACTIVE_TACS ]) ITAC NEW CERTIFICATE :-
 update_certificate (true_then_false, (SCRIPT, [ SCRIPT ], NON_INTERACTIVE_TACS)) ITAC NEW CERTIFICATE.
update_certificate (true_then_false, (SCRIPT,[ TAC | OTHER_TACS ],NON_INTERACTIVE_TACS)) ITAC NEW CERTIFICATE :- !,
 mk_script ITAC NEW NEW_INTERACTIVE_TACS TAC,
 append NEW_INTERACTIVE_TACS OTHER_TACS INTERACTIVE_TACS,
 ( INTERACTIVE_TACS = [ _ | _ ], !,
   CERTIFICATE =
    (true_then_false, (SCRIPT,INTERACTIVE_TACS,NON_INTERACTIVE_TACS))
 ; CERTIFICATE = (false, NON_INTERACTIVE_TACS),
   print &quot;INTERACTIVE SUBPROOF COMPLETED&quot;,
   canonical SCRIPT CSCRIPT,
   pptac PSCRIPT CSCRIPT,
   print PSCRIPT).
update_certificate (false, [ _ | OTHER_TACS ]) _ _ (false, OTHER_TACS).

mk_script (bind A T) NEW NEW_TACS (bind A T2) :- !,
 pi x \
  put_binds (NEW2 x) x A NEW,
  mk_script (T x) (NEW2 x) (NEWT x) (T2 x),
  put_binds (NEWT x) x A NEW_TACS.
mk_script ITAC NEW NEW_TACS (thenl ITAC NEW_TACS) :-
 mk_list_of_bounded_fresh NEW NEW_TACS.

read_in_context (bind A K) (bind A TAC) BACKTRACK :-
 pi x \ /* term x A =&gt; reterm &#39; x A =&gt; */ read_in_context (K x) (TAC x) BACKTRACK.
read_in_context (seq A B) TAC BACKTRACK :-
 flush std_out, $readterm std_in TAC,
 (TAC = backtrack, !, BACKTRACK = (!, fail) ; BACKTRACK = true).

print_sequent (seq Gamma G) :-
 print,
 list_iter_rev Gamma (x \ sigma PX \ ppterm PX x, print PX),
 print &quot;|------------------&quot;,
 ppterm PG G, print PG.
print_sequent (bind A F) :- pi x \ print_sequent (F x).

/* turns thenl into then */
canonical (bind A T1) (bind A T2) :- !,
 pi x \ canonical (T1 x) (T2 x).
canonical (thenl T L) OTAC :- !,
 list_map L canonical L2,
 (mk_constant_list L2 S L2, !,
  (S = [], !, OTAC = T ; OTAC = then T S)
 ; OTAC = thenl T L2).
canonical T T.

/************ inductive_def package ********/
parse_inductive_def_spec (pi F) (pi PF) :- !,
 pi A \ parse_inductive_def_spec (F A) (PF A).
parse_inductive_def_spec (param TY F) (param PTY PF) :- !,
 ppp TY PTY, pi x \ parse_inductive_def_spec (F x) (PF x).
parse_inductive_def_spec L PL :-
 (pi p \ list_map (L p)
  (x \ px \ sigma A \ sigma B \ sigma PB \ x = (A, B), parseterm B PB, px = (A, PB))
  (PL p)).

build_quantified_predicate (pi I) (pi O) :- !,
 pi A \ build_quantified_predicate (I A) (O A).
build_quantified_predicate (param TY I) (TY --&gt; TYP, lam TY BO) :- !,
 pi x \ build_quantified_predicate (I x) (TYP, BO x).
build_quantified_predicate L (_, lam _ p \ lam _ x \ P p x) :-
 pi p \ pi x \ build_predicate (L p) p x (P p x).

build_predicate [ (_,K) ] P X R :- !,
 process_constructor K P X R.
build_predicate [ (_,K) | REST ] P X (or &#39; Q &#39; R) :-
 process_constructor K P X Q,
 build_predicate REST P X R.

process_constructor (forall &#39;&#39; TY &#39; lam TY Q) P X (exists &#39;&#39; TY &#39; lam TY R) :-
 pi y \ process_constructor (Q y) P X (R y).
process_constructor (impl &#39; H &#39; K) P X (and &#39; H &#39; R) :-
 process_constructor K P X R.
process_constructor (P &#39; T) P X (eq &#39;&#39; _ &#39; X &#39; T).

prove_monotonicity_thm (pi F) PREDF APREDF (pi THM) :- !,
 pi A \ prove_monotonicity_thm (F A) PREDF (APREDF &#39;&#39; A) (THM A).
prove_monotonicity_thm (param TY F) PREDF APREDF (forall &#39;&#39; TY &#39; lam TY STM, PROOF) :- !,
 pi x \ prove_monotonicity_thm (F x) PREDF (APREDF &#39; x) (STM x, PROOF).
prove_monotonicity_thm _ PREDF APREDF THM :-
 THM =
  (monotone &#39;&#39; _ &#39; APREDF,
   [ then inv (bind* (then (conv (depth_tac (dd [PREDF]))) auto_monotone)) ]).

state_fixpoint_def (pi F) PREDF (pi DEF) :- !,
 pi A \ state_fixpoint_def (F A) (PREDF &#39;&#39; A) (DEF A).
state_fixpoint_def (param TY F) PREDF (_, lam TY BO) :- !,
 pi x \ state_fixpoint_def (F x) (PREDF &#39; x) (_, BO x).
state_fixpoint_def _ PREDF (_, fixpoint &#39;&#39; _ &#39; PREDF).

prove_fix_intro_thm (pi F) PREDF PRED PREDF_MONOTONE (pi THM) :- !,
 pi A \ prove_fix_intro_thm (F A) (PREDF &#39;&#39; A) (PRED &#39;&#39; A) PREDF_MONOTONE (THM A).
prove_fix_intro_thm (param TY F) PREDF PRED PREDF_MONOTONE (forall &#39;&#39; TY &#39; lam TY STM, [ then forall_i (bind _ PROOF) ]) :- !,
 pi x \ prove_fix_intro_thm (F x) (PREDF &#39; x) (PRED &#39; x) PREDF_MONOTONE (STM x, [ PROOF x ]).
prove_fix_intro_thm _ PREDF PRED PREDF_MONOTONE THM :-
 THM =
  ((! x \ PREDF &#39; PRED &#39; x ==&gt; PRED &#39; x),
   [then forall_i
     (bind _ x13 \
       then (conv (rand_tac (rator_tac dd)))
        (then (conv (land_tac (rator_tac (rand_tac dd))))
          (then inv
            (then (cutth fixpoint_is_prefixpoint)
              (then (lforall PREDF)
                (thenl lapply [applyth PREDF_MONOTONE,
                  then
                   (g
                     (subseteq &#39;&#39; _ &#39;
                       (PREDF &#39; (fixpoint &#39;&#39; _ &#39; PREDF)) &#39;
                       (fixpoint &#39;&#39; _ &#39; PREDF)))
                   (then (conv (depth_tac (dd [subseteq])))
                     (then (conv (depth_tac (dd [in])))
                       (then (conv (depth_tac (dd [in])))(itaut 4))))]))))))]).

prove_fix_elim_thm (pi F) PREDF PRED OPRED (pi THM) :- !,
 pi A \ prove_fix_elim_thm (F A) (PREDF &#39;&#39; A) (PRED &#39;&#39; A) OPRED (THM A).
prove_fix_elim_thm (param TY F) PREDF PRED OPRED (forall &#39;&#39; TY &#39; lam TY STM, [ then forall_i (bind _ PROOF) ]) :- !,
 pi x \ prove_fix_elim_thm (F x) (PREDF &#39; x) (PRED &#39; x) OPRED (STM x, [ PROOF x ]).
prove_fix_elim_thm _ PREDF PRED OPRED THM :-
 THM =
  ((! x13 \
     (! x14 \ PREDF &#39; x13 &#39; x14 ==&gt; x13 &#39; x14) ==&gt;
      (! x14 \ PRED &#39; x14 ==&gt; x13 &#39; x14)) ,
    [then forall_i
      (bind _ x23 \
        then (cutth fixpoint_subseteq_any_prefixpoint)
         (then (lforall PREDF)
           (then (lforall x23)
             (then (conv (depth_tac (dd [OPRED])))
               (then inv
                 (bind _ x24 \
                   then
                    (g
                      (impl &#39; (subseteq &#39;&#39; _ &#39; (PREDF &#39; x23) &#39; x23) &#39;
                        (subseteq &#39;&#39; _ &#39; (fixpoint &#39;&#39; _ &#39; PREDF) &#39; x23)))
                    (then (conv (depth_tac (dd [subseteq])))
                      (then (conv (depth_tac (dd [subseteq])))
                        (then (conv (depth_tac (dd [in])))
                          (then (conv (depth_tac (dd [in])))
                            (then (conv (depth_tac (dd [in])))
                              (then (conv (depth_tac (dd [in])))
                                (then
                                  (w
                                    (impl &#39;
                                      (subseteq &#39;&#39; _ &#39; (PREDF &#39; x23) &#39; x23) &#39;
                                      (subseteq &#39;&#39; _ &#39;
                                        (fixpoint &#39;&#39; _ &#39; PREDF) &#39; x23)))
                                  (then inv
                                    (thenl lapply_last [h,
                                      then (lforall_last x24)
                                       (then lapply_last h)])))))))))))))))]).

prove_intro_thms (pi F) PRED PRED_I INTROTHMS :- !,
 pi A \
  prove_intro_thms (F A) (PRED &#39;&#39; A) PRED_I (OUT A),
  list_map (OUT A)
   (i \ o \ sigma Y \ i = (theorem NAME (P A)), o = theorem NAME (pi P))
   INTROTHMS.
prove_intro_thms (param TY F) PRED PRED_I INTROTHMS :- !,
 pi x \
  prove_intro_thms (F x) (PRED &#39; x) PRED_I (OUT x),
  list_map (OUT x)
   (i \ o \ sigma Y \
     i = (theorem NAME (STM x, [ PROOF x ])),
     o = theorem NAME (forall &#39;&#39; TY &#39; lam TY STM, [ then forall_i (bind TY PROOF) ]))
   INTROTHMS.
prove_intro_thms L PRED PRED_I INTROTHMS :-
 list_map (L PRED) (mk_intro_thm PRED_I) INTROTHMS.

mk_intro_thm PRED_I (NAME,ST)
 (theorem NAME (ST,
   [ daemon /*(then inv (bind* (then (applyth PRED_I) (then (conv dd) (itauteq 6)))))*/ /* TOO MANY GOALS DELAYED ON typ (?): USE daemon INSTEAD */ ])).

inductive_def_pkg PRED PREDF PREDF_MONOTONE PRED_I PRED_E0 PRED_E L OUT :-
 parse_inductive_def_spec L PL,
 build_quantified_predicate PL F,
 prove_monotonicity_thm PL PREDF PREDF MONTHM,
 state_fixpoint_def PL PREDF FIXDEF,
 prove_fix_intro_thm PL PREDF PRED PREDF_MONOTONE INTROTHM,
 prove_intro_thms PL PRED PRED_I INTROTHMS,
 prove_fix_elim_thm PL PREDF PRED PRED ELIMTHM,
 OUT1 =
  [ def PREDF F
  , theorem PREDF_MONOTONE MONTHM
  , def PRED FIXDEF
  , theorem PRED_I INTROTHM
  , theorem PRED_E0 ELIMTHM ],
 append OUT1 INTROTHMS OUT.

/************ library of basic data types ********/
mk_bounded_fresh (bind _ F) (bind _ G) :- !, pi x\ mk_bounded_fresh (F x) (G x).
mk_bounded_fresh _ X.

mk_list_of_bounded_fresh [] [].
mk_list_of_bounded_fresh [S|L] [X|R] :-
 mk_bounded_fresh S X, mk_list_of_bounded_fresh L R.

/* list functions */

list_map [] _ [].
list_map [X|XS] F [Y|YS] :- F X Y, list_map XS F YS.

list_iter_rev [] _.
list_iter_rev [X|XS] F :- list_iter_rev XS F, F X.

mem [ X | _ ] X, !.
mem [ _ | XS ] X :- mem XS X.

mk_constant_list [] _ [].
mk_constant_list [_|L] X [X|R] :- mk_constant_list L X R.

bang P :- P, !.

/********** tacticals ********/

% BUG in runtime.ml if the sigma is uncommented out. It does not matter btw.
/*sigma ff \*/ deftac fail SEQ ff.

ppptac (constant_tacl TACL) (constant_tacl PTACL) :-
 list_map TACL ppptac PTACL.
deftacl (constant_tacl TACL) SEQS TACL.

ppptac (thenl TAC TACL) (thenl PTAC PTACL) :-
 ppptac TAC PTAC, list_map TACL ppptac PTACL. 
deftac (thenl TAC TACL) SEQ XTAC :-
 XTAC = thenll TAC (constant_tacl TACL).

ppptac (all_equals_list TAC) (all_equals_list PTAC) :- ppptac TAC PTAC.
deftacl (all_equals_list TAC2) SEQS TACL :-
 mk_constant_list SEQS TAC2 TACL.

ppptac (then TAC1 TAC2) (then PTAC1 PTAC2) :-
 ppptac TAC1 PTAC1, ppptac TAC2 PTAC2.
deftac (then TAC1 TAC2) SEQ XTAC :-
 XTAC = thenll TAC1 (all_equals_list TAC2).

ppptac (then! TAC1 TAC2) (then! PTAC1 PTAC2) :-
 ppptac TAC1 PTAC1, ppptac TAC2 PTAC2.
deftac (then! TAC1 TAC2) _ (then (! TAC1) TAC2).

ppptac (orelse TAC1 TAC2) (orelse PTAC1 PTAC2) :-
 ppptac TAC1 PTAC1, ppptac TAC2 PTAC2.
deftac (orelse TAC1 TAC2) SEQ XTAC :-
 XTAC = TAC1 ; XTAC = TAC2.

ppptac (orelse! TAC1 TAC2) (orelse! PTAC1 PTAC2) :-
 ppptac TAC1 PTAC1, ppptac TAC2 PTAC2.
deftac (orelse! TAC1 TAC2) _ (orelse (! TAC1) TAC2).

ppptac (bind* TAC) (bind* PTAC) :- ppptac TAC PTAC.
deftac (bind* TAC) SEQ (orelse! (bind _ x \ bind* TAC) TAC).

ppptac (repeat TAC) (repeat PTAC) :- ppptac TAC PTAC.
deftac (repeat TAC) SEQ XTAC :-
 ( XTAC = then TAC (repeat (bind* TAC))
 ; XTAC = id).

ppptac (repeat! TAC) (repeat! PTAC) :- ppptac TAC PTAC.
deftac (repeat! TAC) SEQ (orelse! (then! TAC (repeat! (bind* TAC))) id).

ppptac (pptac TAC) (pptac PTAC) :- ppptac TAC PTAC.
deftac (pptac TAC) SEQ TAC :-
 print &quot;SEQ&quot; SEQ &quot;:=&quot; TAC.

ppptac (time TAC) (time PTAC) :- ppptac TAC PTAC.
deftac (time TAC) SEQ XTAC :-
 $gettimeofday B,
 XTAC = thenll TAC (time_after TAC B).

ppptac (time_after TAC B) (time_after PTAC B) :- ppptac TAC PTAC.
deftacl (time_after TAC B) SEQS TACL :-
 $gettimeofday A,
 D is A - B,
 mk_constant_list SEQS id TACL,
 print &quot;TIME SPENT &quot; D &quot;FOR&quot; TAC.

/* For debugging only (?) For capturing metavariables */
ppptac (inspect (seq Gamma F) TAC) (inspect (seq PGamma PF) PTAC) :-
 list_map SEQ ppp PSEQ, ppp F PF, ppptac TAC PTAC.
deftac (inspect SEQ TAC) SEQ TAC.

/********** tactics ********/

ppptac (w G) (w PG) :- ppp G PG.
deftac (w G) (seq Gamma _) (wl Gamma1) :-
 append Gamma1 [ G | _ ] Gamma.

ppptac h h.
deftac h SEQ (h L).

/*** eq ***/

ppptac sym sym.
deftac sym (seq Gamma (eq &#39;&#39; T &#39; L &#39; R)) TAC :-
 TAC = thenl (m (eq &#39;&#39; T &#39; R &#39; R)) [ thenl c [ thenl c [ r , id ] , r ] , r ].

ppptac eq_true_intro eq_true_intro.
deftac eq_true_intro (seq Gamma (eq &#39;&#39; prop &#39; P &#39; tt)) TAC :-
 TAC = thenl s [ th tt_intro, wl [] ].

/*** true ***/

/*** and ***/

ppptac conj conj.
deftac conj (seq Gamma (and &#39; P &#39; Q)) TAC :-
 TAC =
  then
   (then (conv dd)
     (then k (bind _ x \
       thenl c
        [ thenl c [ r, eq_true_intro ] ,
          eq_true_intro ])))
   ww.

/* Gamma  &quot;|-&quot;  q    ---&gt;   Gamma &quot;|-&quot; and &#39; p &#39; q*/
ppptac (andr P) (andr PP) :- ppp P PP.
deftac (andr P) (seq Gamma Q) TAC :-
 TAC =
  (thenl (m ((lam _ f \ f &#39; P &#39; Q) &#39; (lam _ x \ lam _ y \ y)))
    [ then
       %(repeat (conv (depth_tac b))) ROBUS VERSION LINE BELOW
       (then (conv (land_tac b)) (then (conv (land_tac (rator_tac b))) (conv (land_tac b))))
      r
    , thenl (conv (rator_tac id))
       [ then (thenl (t (lam _ f \ f &#39; tt &#39; tt)) [ id, r ])
          (thenl (m (and &#39; P &#39; Q)) [ dd , id ])
       , then (repeat (conv (depth_tac b))) (th tt_intro) ]]).

/* (and &#39; p &#39; q) :: nil  &quot;|-&quot;  q */
ppptac andr andr.
deftac andr (seq Gamma Q) TAC :-
 mem Gamma (and &#39; P &#39; Q),
 TAC = then (andr P) h.

/* Gamma  &quot;|-&quot;  p    ---&gt;   Gamma &quot;|-&quot; and &#39; p &#39; q*/
ppptac (andl P) (andl PP) :- ppp P PP.
deftac (andl Q) (seq Gamma P) TAC :-
 TAC =
  (thenl (m ((lam _ f \ f &#39; P &#39; Q) &#39; (lam _ x \ lam _ y \ x)))
    [ then
       %(repeat (conv (depth_tac b))) ROBUS VERSION LINE BELOW
       (then (conv (land_tac b)) (then (conv (land_tac (rator_tac b))) (conv (land_tac b))))
      r
    , thenl (conv (rator_tac id))
       [ then (thenl (t (lam _ f \ f &#39; tt &#39; tt)) [ id, r ])
          (thenl (m (and &#39; P &#39; Q)) [ dd , id ])
       , then (repeat (conv (depth_tac b))) (th tt_intro) ]]).

/* (and &#39; p &#39; q) :: nil  &quot;|-&quot;  p */
ppptac andl andl.
deftac andl (seq Gamma P) TAC :-
 mem Gamma (and &#39; P &#39; Q),
 TAC = then (andl Q) h.


/*** forall ***/

/* |- forall &#39; F  --&gt;   |- F &#39; x */
ppptac forall_i forall_i.
deftac forall_i (seq Gamma (forall &#39;&#39; _ &#39; lam _ G)) TAC :-
 TAC = then (conv dd) (then k (bind _ x \ eq_true_intro)).

/* forall &#39; F |- F &#39; T */
ppptac forall_e forall_e.
deftac forall_e (seq Gamma GX) TAC :-
 mem Gamma (forall &#39;&#39; _ &#39; (lam _ G)), GX = G X,
 TAC = thenl (m ((lam _ G) &#39; X)) [ b, thenl (m ((lam _ z \ tt) &#39; X))
  [ thenl c [ then sym (thenl (m (forall &#39;&#39; _ &#39; lam _ G)) [dd,h ]), r ]
  , then (conv b) (th tt_intro) ] ].

/* forall &#39; F |- f  --&gt;  F &#39; a, forall &#39; F |- f */
ppptac (lforall F A) (lforall PF PA) :- ppp F PF, ppp A PA.
deftac (lforall F A) (seq Gamma G) TAC :-
 TAC = thenl (m (impl &#39; (F A) &#39; G))
  [ thenl s [ then mp forall_e, then i h ] , then (w (forall &#39;&#39; _ &#39; lam _ F)) i ].

/* forall &#39; F |- f  --&gt;  F &#39; a, forall &#39; F |- f */
ppptac (lforall A) (lforall PA) :- ppp A PA.
deftac (lforall A) (seq Gamma G) (lforall F A) :-
 mem Gamma (forall &#39;&#39; _ &#39; lam _ F).

/* forall &#39; F |- f  --&gt;  F &#39; a, forall &#39; F |- f */
ppptac lforall lforall.
deftac lforall (seq Gamma G) (lforall A).

/* forall &#39; F |- f  --&gt;  F &#39; a, forall &#39; F |- f */
ppptac (lforall_last A) (lforall_last PA) :- ppp A PA.
deftac (lforall_last A) (seq ((forall &#39;&#39; _ &#39; lam _ F)::Gamma) G) (lforall F A).

/*** false ***/
              
/*** impl ***/

/* |- p=&gt;q  --&gt;  p |- q */
ppptac i i.
deftac i (seq Gamma (impl &#39; P &#39; Q)) TAC :-
 TAC = then (conv dd) (thenl s [ andl, thenl conj [ h [], id ]]).

/* p=&gt;q |- q  --&gt;  |- p */
ppptac (mp P) (mp PP) :- ppp P PP.
deftac (mp P) (seq Gamma Q) TAC :-
 TAC = then (andr P) (thenl (m P) [ then sym (thenl (m (impl &#39; P &#39; Q)) [ dd , h ]) , id ]).

/* p=&gt;q |- q  --&gt;  |- p */
ppptac mp mp.
deftac mp (seq Gamma Q) (mp P) :-
 mem Gamma (impl &#39; P &#39; Q).

/* |- q   --&gt;   p |- q  and  |- p */
ppptac (cut P) (cut PP) :- ppp P PP.
deftac (cut P) (seq Gamma Q) TAC :-
 TAC = then (andr P) (thenl (m P) [then sym (thenl (m (impl &#39; P &#39; Q)) [then (conv (land_tac dd)) r, i] ) , id]). 

/* |-q  --&gt; p |- q   where the theorem T proves p */
ppptac (cutth P) (cutth PP) :- ppp P PP.
deftac (cutth T) SEQ TAC :-
 proves T X,
 TAC = (thenl (cut X) [ id, th T ]).

/* applies the theorem T */
ppptac (applyth P) (applyth PP) :- ppp P PP.
deftac (applyth T) SEQ (then (cutth T) apply_last).

/* impl p q, Gamma |- f   ---&gt;   /*impl q f*/ Gamma |- p  ,  q, Gamma |- f */
ppptac (lapply P Q) (lapply PP PQ) :- ppp P PP, ppp Q PQ.
deftac (lapply P Q) (seq Gamma F) TAC :-
 TAC =
  thenl (m (impl &#39; Q &#39; F)) [ thenl s [ then (mp Q) (then (w (impl &#39; Q &#39; F)) (then (mp P) (w (impl &#39; P &#39; Q)))) , then i (h [A]) ] , then (w (impl &#39; P &#39; Q)) (then i id) ].

/* impl p q, Gamma |- f   ---&gt;   /*impl q f*/ Gamma |- p  ,  q, Gamma |- f */
ppptac lapply lapply.
deftac lapply (seq Gamma F) (lapply P Q) :-
 mem Gamma (impl &#39; P &#39; Q).

/* impl p q, Gamma |- f   ---&gt;   /*impl q f*/ Gamma |- p  ,  q, Gamma |- f */
ppptac lapply_last lapply_last.
deftac lapply_last (seq ((impl &#39; P &#39; Q)::Gamma) F) (lapply P Q).

/* p |- f ---&gt; p |- p ==&gt; f */
ppptac (g P) (g PP) :- ppp P PP.
deftac (g P) (seq _ F) TAC :-
 TAC =
  (thenl (m (impl &#39; P &#39; F)) [thenl s [then mp h , then i h] , id ]).

/*** not ***/

/*** exists ***/

/**** apply, i.e. forall + impl ****/

ppptac (apply X) (apply PX) :- ppp X PX.
deftac (apply X) SEQ h :- var X, !.
deftac (apply X) SEQ h.
deftac (apply (impl &#39; P &#39; Q)) SEQ TAC :-
 TAC = thenl (lapply P Q) [ id, apply_last ].
deftac (apply (forall &#39;&#39; _ &#39; lam _ G)) SEQ TAC :-
 TAC = then (lforall G X) apply_last.

ppptac apply_last apply_last.
deftac apply_last (seq (H::Gamma) F) (apply H).

ppptac apply apply.
deftac apply (seq Gamma F) (apply H) :-
 mem Gamma H.

/********** conversion(als) ***********/

strip_constant (I &#39;&#39; _) H :- !, strip_constant I H.
strip_constant H H.

/* expands definitions, even if applied to arguments */
ppptac (dd L) (dd L).
deftac (dd L) (seq _ (eq &#39;&#39; _ &#39; T &#39; X)) d :- strip_constant T H, bang (mem L H).
deftac (dd L) (seq _ (eq &#39;&#39; _ &#39; (D &#39; T) &#39; X))
 (thenl (t A) [thenl c [dd L , r], b]).

ppptac dd dd.
deftac dd _ (dd L).

ppptac beta_expand beta_expand.
deftac beta_expand (seq _ (eq &#39;&#39; _ &#39; (lam _ x \ F x) &#39; (lam _ x \ (lam _ F) &#39; x))) TAC :-
 TAC = then k (bind _ x \ then sym b).

/* folds a definition, even if applied to arguments */
/* BUG: it seems to fail with restriction errors in some cases */
ppptac f f.
deftac f SEQ (then sym dd).

ppptac (rand_tac C) (rand_tac PC) :- ppptac C PC.
deftac (rand_tac C) SEQ TAC :-
  TAC = thenl c [ r , C ].

ppptac (rator_tac C) (rator_tac PC) :- ppptac C PC.
deftac (rator_tac C) SEQ TAC :-
  TAC = thenl c [ C , r ].

ppptac (abs_tac C) (abs_tac PC) :- ppptac C PC.
deftac (abs_tac C) SEQ TAC :-
  TAC = then k (bind A x \ C).

ppptac (land_tac C) (land_tac PC) :- ppptac C PC.
deftac (land_tac C) SEQ TAC :-
  TAC = thenl c [ thenl c [ r, C ] , r ].

ppptac (sub_tac C) (sub_tac PC) :- ppptac C PC.
deftac (sub_tac C) SEQ TAC :-
  TAC = orelse (rand_tac C) (orelse (rator_tac C) (abs_tac C)).

ppptac (try TAC) (try PTAC) :- ppptac TAC PTAC.
deftac (try TAC) SEQ (orelse TAC id).

ppptac (depth_tac C) (depth_tac PC) :- ppptac C PC.
deftac (depth_tac C) SEQ TAC :-
  TAC = then (try C) (sub_tac (depth_tac C)).

ppptac (conv C) (conv PC) :- ppptac C PC.
deftac (conv C) (seq Gamma F) TAC :-
 TAC = thenl (m G) [ then sym C , id ].

/********** Automation ***********/
/* TODO:
 1) our lforall gets rid of the hypothesis (bad) */
/* left tries to reduce the search space via focusing */
ppptac left left.
deftac left (seq Gamma _) TAC :-
 mem Gamma (not &#39; F),
 TAC =
  (!
   (then (cutth not_e)
    (then (lforall_last F)
     (thenl lapply [ h, (w (not &#39; F)) ])))).
deftac left (seq Gamma _) TAC :-
 /* A bit long because we want to beta-reduce the produced hypothesis.
    Maybe this should be automatized somewhere else. */
 mem Gamma (exists &#39;&#39; _ &#39; F),
 TAC =
  (!
   (then (cutth exists_e)
    (then (lforall_last F)
     (thenl lapply [ h, then (w (exists &#39;&#39; _ &#39; F)) (then apply_last (then forall_i (bind _ x \ then (try (conv (land_tac b))) i))) ])))).
deftac left (seq Gamma H) TAC :-
 mem Gamma (or &#39; F &#39; G),
 TAC =
  (!
   (then (cutth or_e)
    (then (lforall_last F)
     (then (lforall_last G)
      (then (lforall_last H)
       (thenl lapply [ h, then (w (or &#39; F &#39; G)) (then apply_last i)])))))).
deftac left (seq Gamma H) TAC :-
 mem Gamma (and &#39; F &#39; G),
 TAC =
  (!
   (then (cutth and_e)
    (then (lforall_last F)
     (then (lforall_last G)
      (then (lforall_last H)
       (thenl lapply [ h, then (w (and &#39; F &#39; G)) (then apply_last (then i i))])))))).
deftac left (seq Gamma H) TAC :-
 mem Gamma (eq &#39;&#39; TY &#39; F &#39; G),
 not (var TY), TY = prop,
 TAC =
  (then (g (eq &#39;&#39; TY &#39; F &#39; G))
   (then (conv (land_tac (then (applyth eq_to_impl) h)))
     (then i (w (eq &#39;&#39; TY &#39; F &#39; G))))).

ppptac not_i not_i.
deftac not_i (seq _ (not &#39; _)) (applyth not_i).

ppptac inv inv.
deftac inv _ TAC :-
 TAC =
 (then!
  (repeat!
   (orelse! conj (orelse! forall_i (orelse! i (orelse! not_i s)))))
  (bind* (repeat! left))).

ppptac (sync N) (sync N).
deftac (sync N) (seq _ tt) (th tt_intro).
deftac (sync N) (seq Gamma _) (then (applyth ff_elim) h) :-
 mem Gamma ff.
deftac (sync N) (seq _ (or &#39; _ &#39; _))
 (orelse (then (applyth orr) (itaut N)) (then (applyth orl) (itaut N))).
deftac (sync N) (seq _ (exists &#39;&#39; _ &#39; _)) (then (applyth exists_i) (then (conv b) (itaut N2))) :-
 N2 is N - 2.

ppptac (itaut N) (itaut N).
deftac (itaut N) SEQ fail :- N =&lt; 0, !.
deftac (itaut N) SEQ TAC :-
 %print (itaut N) SEQ,
 N1 is N - 1,
 N2 is N - 2,
 TAC =
 (then! inv
  (bind*
   (orelse h
   (orelse (sync N)
   (orelse /* Hypothesis not moved to front */ (then lforall (itaut N2))
   (then lapply (itaut N1))))))).

ppptac (itauteq N) (itauteq N).
deftac (itauteq N) _ (then (cutth eq_reflexive) (itaut N)).

/********** inductive predicates package ********/

ppptac monotone monotone.
deftac monotone (seq _ (impl &#39; X &#39; X)) (! (then i h)) :- !.
deftac monotone (seq [forall &#39;&#39; _ &#39; lam _ x \ impl &#39; (F &#39; x) &#39; (G &#39; x)] (impl &#39; (F &#39; T) &#39; (G &#39; T))) (! apply) :- !.
deftac monotone (seq _ (impl &#39; (and &#39; _ &#39; _) &#39; _)) TAC :-
 TAC = then (applyth and_monotone) monotone.
deftac monotone (seq _ (impl &#39; (or &#39; _ &#39; _) &#39; _)) TAC :-
 TAC = then (applyth or_monotone) monotone.
deftac monotone (seq _ (impl &#39; (impl &#39; _ &#39; _) &#39; _)) TAC :-
 TAC = then (applyth impl_monotone) monotone.
deftac monotone (seq _ (impl &#39; (not &#39; _) &#39; _)) TAC :-
 TAC = then (applyth not_monotone) monotone.
deftac monotone (seq _ (impl &#39; (forall &#39;&#39; _ &#39; lam _ _) &#39; _)) TAC :-
 TAC =
  then (conv (land_tac (rand_tac beta_expand)))
   (then (conv (rand_tac (rand_tac beta_expand)))
     (then (applyth forall_monotone) (then forall_i (bind _ x \
       then (conv (depth_tac b)) (then (conv (depth_tac b)) monotone))))).
deftac monotone (seq _ (impl &#39; (exists &#39;&#39; _ &#39; lam _ _) &#39; _)) TAC :-
 TAC =
  then (conv (land_tac (rand_tac beta_expand)))
   (then (conv (rand_tac (rand_tac beta_expand)))
     (then (applyth exists_monotone) (then forall_i (bind _ x \
       then (conv (depth_tac b)) (then (conv (depth_tac b)) monotone))))).

/* expands &quot;monotone &#39; (lam _ f \ lam _ x \ X f x)&quot; into
   &quot;! x \ p &#39; x ==&gt; q &#39; x |- X p y ==&gt; X q y&quot;
   and then calls the monotone tactic */
ppptac auto_monotone auto_monotone.
deftac auto_monotone _ TAC :-
 TAC =
  then (conv dd)
   (then forall_i (bind _ p \ (then forall_i (bind _ q \
     then (conv (land_tac dd))
      (then (conv (land_tac (depth_tac (dd [in]))))
        (then (conv (land_tac (depth_tac (dd [in]))))
          (then i
            (then (conv dd)
              (then forall_i (bind _ x \
                (then (conv (land_tac dd))
                  (then (conv (rand_tac dd))
                    (then (conv (land_tac (rator_tac b)))
                      (then (conv (land_tac b))
                        (then (conv (rand_tac (rator_tac b)))
                          (then (conv (rand_tac b))
                            monotone)))))))))))))))).

/********** the library ********/

main :- the_library L, append L [stop] Lstop, check Lstop.

go :- the_library L, check L.

the_library L :-
 L =
  [ /******** Primivite operators hard-coded in the kernel ******/
  % decl eq (pi A \ A --&gt; A --&gt; prop)

  /********** Axiomatization of choice over types ********/
    decl choose (pi A \ A)

  /*********** Connectives and quantifiers ********/
  , def tt (prop,((lam prop x \ x) = (lam prop x \ x)))
  , def forall (pi A \ ((A --&gt; prop) --&gt; prop),
     (lam (A --&gt; prop) f \ f = (lam A g \ tt)))
  , def ff (prop,(! x \ x))
  , def and ((prop --&gt; prop --&gt; prop),
     (lam _ x \ lam _ y \ (lam (prop --&gt; prop --&gt; prop) f \ f &#39; x &#39; y) = (lam _ f \ f &#39; tt &#39; tt)))
  , def impl ((prop --&gt; prop --&gt; prop),(lam _ a \ lam _ b \ a &amp;&amp; b &lt;=&gt; a))
  , def exists (pi A \ ((A --&gt; prop) --&gt; prop),
     (lam (A --&gt; prop) f \ ! c \ (! a \ f &#39; a ==&gt; c) ==&gt; c))
  , def not ((prop --&gt; prop),(lam _ x \ x ==&gt; ff))
  , def or ((prop --&gt; prop --&gt; prop),
     (lam _ x \ lam _ y \ ! c \ (x ==&gt; c) ==&gt; (y ==&gt; c) ==&gt; c))
  , theorem tt_intro (tt,[then (conv dd) (then k (bind _ x12 \ r))])
  , theorem ff_elim ((! p \ ff ==&gt; p),
    [then forall_i (bind prop x3\ then (conv (land_tac dd)) (then i forall_e))])
  , theorem sym ((! p \ ! q \ p = q ==&gt; q = p),
    [then forall_i
     (bind prop x12 \
       then forall_i
        (bind prop x13 \
          then i (then sym h)))])
  , theorem not_e ((! p \ not &#39; p ==&gt; p ==&gt; ff),
     [then forall_i (bind prop x3 \ then (conv (land_tac dd)) (then i h))])
  , theorem conj ((! p \ ! q \ p ==&gt; q ==&gt; p &amp;&amp; q),
    [then forall_i
     (bind prop x12 \
      then forall_i (bind prop x13 \ then i (then i (then conj h))))])
  , theorem andl ((! p \ ! q \ p &amp;&amp; q ==&gt; p),
    [then forall_i
     (bind prop x12 \
      then forall_i (bind prop x13 \ then i (then (andl x13) h)))])
  , theorem andr ((! p \ ! q \ p &amp;&amp; q ==&gt; q),
    [then forall_i
     (bind prop x12 \
      then forall_i (bind prop x13 \ then i (then (andr x12) h)))])
  , theorem and_e ((! p \ ! q \ ! c \ p &amp;&amp; q ==&gt; (p ==&gt; q ==&gt; c) ==&gt; c),
     [then forall_i
       (bind prop x12 \
         then forall_i
          (bind prop x13 \
            then forall_i
             (bind prop x14 \ then i (then i (thenl apply [andl, andr])))))])
  , theorem not_i ((! p \ (p ==&gt; ff) ==&gt; not &#39; p),
     [then forall_i (bind prop x2 \ then i (then (conv dd) h))])
  , theorem orl ((! p \ ! q \ p ==&gt; p `or q),
      [then forall_i
        (bind prop x12 \
          then forall_i
           (bind prop x13 \
             then i
              (then (conv dd)
                (then forall_i (bind prop x14 \ then i (then i (then apply h)))))))])
  , theorem orr ((! p \ ! q \ q ==&gt; p `or q),
      [then forall_i
        (bind prop x12 \
          then forall_i
           (bind prop x13 \
             then i
              (then (conv dd)
                (then forall_i (bind prop x14 \ then i (then i (then apply h)))))))])
  , theorem or_e ((! p \ ! q \ ! c \ p `or q ==&gt; (p ==&gt; c) ==&gt; (q ==&gt; c) ==&gt; c),
     [then forall_i
       (bind prop x12 \
         then forall_i
          (bind prop x13 \
            then forall_i
             (bind prop x14 \ then (conv (land_tac dd)) (then i forall_e))))])
  , theorem exists_e (pi T \
     (! f \ (exists &#39;&#39; T &#39; f) ==&gt; (! c \ (! x \ f &#39; x ==&gt; c) ==&gt; c)),
     [then forall_i (bind (T --&gt; prop) x12 \ then (conv (land_tac dd)) (then i h))])
 , theorem exists_i (pi T \ (! f \ ! w \ f &#39; w ==&gt; (exists &#39;&#39; T &#39; f)),
    [then forall_i
     (bind (T --&gt; prop) x12 \
       then forall_i
        (bind T x13 \
          then i
           (then (conv dd)
             (then forall_i
               (bind prop x14 \ then i (then (lforall x13) (then apply h)))))))])
  , theorem eq_to_impl
     ((! x13 \ ! x14 \ (x13 = x14) = ((x13 ==&gt; x14) &amp;&amp; (x14 ==&gt; x13))),
     [thenl inv [(bind prop x13 \ bind prop x14 \ then (conv (then sym h)) h),
       (bind prop x13 \ bind prop x14 \ then (conv h) h),
       (bind prop x13 \ bind prop x14 \ itaut 2),
       (bind prop x13 \ bind prop x14 \ itaut 2)]])

 /*********** Axiomatization of disjoint union ********/
  , decl inj1_disj_union (pi A \pi B \ A --&gt; disj_union &#39;&#39; A &#39;&#39; B)
  , decl inj2_disj_union (pi A \ pi B \ B --&gt; disj_union &#39;&#39; A &#39;&#39; B)
  , decl case_disj_union (pi A \pi B \ pi C \ disj_union &#39;&#39; A &#39;&#39; B --&gt; (A --&gt; C) --&gt; (B --&gt; C) --&gt; C)
  , axiom case_disj_union_inj1 (pi A \ pi B \ pi C \ (! b \ ! (A --&gt; C) e1 \ ! (B --&gt; C) e2  \
    case_disj_union &#39;&#39; A &#39;&#39; B &#39;&#39; C &#39; (inj1_disj_union &#39;&#39; A &#39;&#39; B &#39; b) &#39; e1 &#39; e2 = e1 &#39; b))
  , axiom case_disj_union_inj2 (pi A \ pi B \ pi C \ (! b \ ! (A --&gt; C) e1 \ ! (B --&gt; C) e2  \
    case_disj_union &#39;&#39; A &#39;&#39; B &#39;&#39; C &#39; (inj2_disj_union &#39;&#39; A &#39;&#39; B &#39; b) &#39; e1 &#39; e2 = e2 &#39; b))

 /*********** Axiomatization of the universe ********/
 , decl injection_univ (pi A \pi B \ A --&gt; univ &#39;&#39; A &#39;&#39; B)
 , decl ejection_univ (pi A \pi B \ univ &#39;&#39; A &#39;&#39; B --&gt; A)
 , decl inject_limit_univ (pi A \pi B \ (B --&gt; univ &#39;&#39; A &#39;&#39; B) --&gt; univ &#39;&#39; A &#39;&#39; B)
 , decl eject_limit_univ (pi A \ pi B \ univ &#39;&#39; A &#39;&#39; B --&gt; (B --&gt; univ &#39;&#39; A &#39;&#39; B))
 , decl pair_univ (pi A \pi B \ univ &#39;&#39; A &#39;&#39; B --&gt; univ &#39;&#39; A &#39;&#39; B --&gt; univ &#39;&#39; A &#39;&#39; B)
 , decl proj1_univ (pi A \ pi B \ univ &#39;&#39; A &#39;&#39; B --&gt; univ &#39;&#39; A &#39;&#39; B)
 , decl proj2_univ (pi A \pi B \ univ &#39;&#39; A &#39;&#39; B --&gt; univ &#39;&#39; A &#39;&#39; B)
 , decl inj1_univ (pi A \pi B \ univ &#39;&#39; A &#39;&#39; B --&gt; univ &#39;&#39; A &#39;&#39; B)
 , decl inj2_univ (pi A \pi B \ univ &#39;&#39; A &#39;&#39; B --&gt; univ &#39;&#39; A &#39;&#39; B)
 , decl case_univ (pi A \pi B \ pi C \ univ &#39;&#39; A &#39;&#39; B --&gt; (univ &#39;&#39; A &#39;&#39; B --&gt; C) --&gt; (univ &#39;&#39; A &#39;&#39; B --&gt; C) --&gt; C)
 , axiom ejection_injection_univ (pi A \ pi B \
    ! A p \ ejection_univ &#39;&#39; A &#39;&#39; B &#39; (injection_univ &#39;&#39; A &#39;&#39; B &#39; p) = p)
 , axiom eject_inject_limit_univ (pi A \ pi B \
    ! (B --&gt; univ &#39;&#39; A &#39;&#39; B) p \ eject_limit_univ &#39;&#39; A &#39;&#39; B &#39; (inject_limit_univ &#39;&#39; A &#39;&#39; B &#39; p) = p)
 , axiom proj1_pair_univ (pi A \ pi B \ ! (univ &#39;&#39; A &#39;&#39; B) p1 \ ! p2 \
    proj1_univ &#39;&#39; A &#39;&#39; B &#39; (pair_univ &#39;&#39; A &#39;&#39; B &#39; p1 &#39; p2) = p1)
 , axiom proj2_pair_univ (pi A \ pi B \ ! p1 \ ! (univ &#39;&#39; A &#39;&#39; B) p2 \
    proj2_univ &#39;&#39; A &#39;&#39; B &#39; (pair_univ &#39;&#39; A &#39;&#39; B &#39; p1 &#39; p2) = p2)
 , axiom case_univ_inj1 (pi A \ pi B \ pi C \ (! b \ ! (univ &#39;&#39; A &#39;&#39; B --&gt; C) e1 \ ! e2  \
    case_univ &#39;&#39; A &#39;&#39; B &#39;&#39; C &#39; (inj1_univ &#39;&#39; A &#39;&#39; B &#39; b) &#39; e1 &#39; e2 = e1 &#39; b))
 , axiom case_univ_inj2 (pi A \ pi B \ pi C \ (! b \ ! (univ &#39;&#39; A &#39;&#39; B --&gt; C) e1 \ ! e2 \
    case_univ &#39;&#39; A &#39;&#39; B &#39;&#39; C &#39; (inj2_univ &#39;&#39; A &#39;&#39; B &#39; b) &#39; e1 &#39; e2 = e2 &#39; b))

 /******************* Equality *****************/
 , theorem eq_reflexive (pi A \ ((! A a \ a = a),
   [ then forall_i (bind A x \ r) ]))

 /******************* Logic *****************/
 , theorem or_commutative ((! a \ ! b \ a `or b &lt;=&gt; b `or a),
   [itaut 1])
 , theorem or_ff ((! a \ a `or ff &lt;=&gt; a),
   [itaut 1])
 , theorem or_tt ((! a \ a `or tt &lt;=&gt; tt),
   [itaut 1])
 , theorem or_idempotent ((! a \ a `or a &lt;=&gt; a),
   [itaut 1])
 , theorem or_associative ((! a \ ! b \ ! c \ a `or (b `or c) &lt;=&gt; (a `or b) `or c),
   [itaut 1])
 , theorem and_commutative ((! a \ ! b \ a &amp;&amp; b &lt;=&gt; b &amp;&amp; a),
   [itaut 1])
 , theorem and_tt ((! a \ a &amp;&amp; tt &lt;=&gt; a),
   [itaut 1])
 , theorem and_ff ((! a \ a &amp;&amp; ff &lt;=&gt; ff),
   [itaut 1])
 , theorem and_idempotent ((! a \ a &amp;&amp; a &lt;=&gt; a),
   [itaut 1])
 , theorem and_associative ((! a \ ! b \ ! c \ a &amp;&amp; (b &amp;&amp; c) &lt;=&gt; (a &amp;&amp; b) &amp;&amp; c),
   [itaut 1])
 , theorem and_or ((! a \ ! b \ ! c \ a &amp;&amp; (b `or c) &lt;=&gt; (a &amp;&amp; b) `or (a &amp;&amp; c)),
   [itaut 1])
 , theorem or_and ((! a \ ! b \ ! c \ a `or (b &amp;&amp; c) &lt;=&gt; (a `or b) &amp;&amp; (a `or c)),
   [itaut 1])
 , theorem ads_or_and ((! a \ ! b \ (a &amp;&amp; b) `or b &lt;=&gt; b),
   [itaut 1])
 , theorem ads_and_or ((! a \ ! b \ (a `or b) &amp;&amp; b &lt;=&gt; b),
   [itaut 1])
 , theorem not_or ((! a \ ! b \ not &#39; a &amp;&amp; not &#39; b &lt;=&gt; not &#39; (a `or b)),
   [itaut 2])
 , theorem not_and ((! a \ ! b \ not &#39; a `or not &#39; b ==&gt; not &#39; (a &amp;&amp; b)),
   [itaut 2])
 , theorem not_not_not ((! p \ not &#39; (not &#39; (not &#39; p)) &lt;=&gt; not &#39; p),
   [itaut 3])
 , theorem impl_not_not ((! a \ ! b \ (a ==&gt; b) ==&gt; (not &#39; b ==&gt; not &#39; a)),
   [itaut 3])
 , theorem eq_to_impl_f ((! p \ ! q \ (p &lt;=&gt; q) ==&gt; p ==&gt; q),
    [itaut 2])
 , theorem eq_to_impl_b ((! p \ ! q \ (p &lt;=&gt; q) ==&gt; q ==&gt; p),
    [itaut 2])

/*************** Properties inj/disj/univ ***********/
 , theorem pair_univ_inj_l 
   (pi A \ pi B \ (! (univ &#39;&#39; A &#39;&#39; B) x20 \ ! x21 \ ! x22 \ ! x23 \ pair_univ &#39;&#39; A &#39;&#39; B &#39; x20 &#39; x22 = pair_univ &#39;&#39; A &#39;&#39; B &#39; x21 &#39; x23 ==&gt; x20 = x21) ,
   [then (repeat forall_i)
     (bind (univ &#39;&#39; A &#39;&#39; B) x22 \
       bind (univ &#39;&#39; A &#39;&#39; B) x23 \
        bind (univ &#39;&#39; A &#39;&#39; B) x24 \
         bind (univ &#39;&#39; A &#39;&#39; B) x25 \
          then i
           (then (cutth proj1_pair_univ)
             (then (lforall x22)
               (then (conv (land_tac (then sym apply)))
                 (then (conv (depth_tac h)) (applyth proj1_pair_univ))))))])
 , theorem pair_univ_inj_r 
   (pi A \ pi B \ (! (univ &#39;&#39; A &#39;&#39; B) x20 \ ! x21 \ ! x22 \ ! x23 \ pair_univ &#39;&#39; A &#39;&#39; B &#39; x20 &#39; x22 = pair_univ &#39;&#39; A &#39;&#39; B &#39; x21 &#39; x23 ==&gt; x22 = x23) ,
   [then (repeat forall_i)
     (bind (univ &#39;&#39; A &#39;&#39; B) x22 \
       bind (univ &#39;&#39; A &#39;&#39; B) x23 \
        bind (univ &#39;&#39; A &#39;&#39; B) x24 \
         bind (univ &#39;&#39; A &#39;&#39; B) x25 \
          then i
           (then (cutth proj2_pair_univ)
             (then (lforall x22)
               (then (conv (land_tac (then sym apply)))
                 (then (conv (depth_tac h)) (applyth proj2_pair_univ))))))])
 , theorem injection_univ_inj
   (pi A \ pi B \ (! A x20 \ ! x21 \ injection_univ &#39;&#39; A &#39;&#39; B &#39; x20 = injection_univ &#39;&#39; A &#39;&#39; B &#39; x21 ==&gt; x20 = x21) ,
    [then forall_i
     (bind A x20 \
       then forall_i
        (bind A x21 \
          then (then (cutth ejection_injection_univ) (lforall x21))
           (then (then (cutth ejection_injection_univ) (lforall x20))
             (then i
               (thenl
                 (cut
                   (ejection_univ &#39;&#39; A &#39;&#39; B &#39; (injection_univ &#39;&#39; A &#39;&#39; B &#39; x20) =
                     ejection_univ &#39;&#39; A &#39;&#39; B &#39; (injection_univ &#39;&#39; A &#39;&#39; B &#39; x21)))
                 [thenl
                   (cut
                     ((ejection_univ &#39;&#39; A &#39;&#39; B &#39; (injection_univ &#39;&#39; A &#39;&#39; B &#39; x20) =
                        ejection_univ &#39;&#39; A &#39;&#39; B &#39; (injection_univ &#39;&#39; A &#39;&#39; B &#39; x21)) =
                       (x20 = x21)))
                   [then (conv (depth_tac (then sym h))) h,
                   thenl c [thenl c [r, h], h]], thenl c [r, h]])))))])
 , theorem inj1_univ_inj
   (pi A \ pi B \ (! (univ &#39;&#39; A &#39;&#39; B) x20 \ ! x21 \ inj1_univ &#39;&#39; A &#39;&#39; B &#39; x20 = inj1_univ &#39;&#39; A &#39;&#39; B &#39; x21 ==&gt; x20 = x21) ,
    [then inv
     (bind (univ &#39;&#39; A &#39;&#39; B) x20 \ bind (univ &#39;&#39; A &#39;&#39; B) x21 \
        thenl (t (case_univ &#39;&#39; A &#39;&#39; B &#39;&#39; (univ &#39;&#39; A &#39;&#39; B) &#39; (inj1_univ &#39;&#39; A &#39;&#39; B &#39; x20) &#39;
             (lam (univ &#39;&#39; A &#39;&#39; B) x22 \ x22) &#39;
             (lam (univ &#39;&#39; A &#39;&#39; B) x22 \ x22)))
         [then sym
           (then (conv (land_tac (applyth case_univ_inj1)))
             (then (conv (land_tac b)) r)),
         then (conv (depth_tac h))
          (then (conv (land_tac (applyth case_univ_inj1)))
            (then (conv (land_tac b)) r))])])
 , theorem inj2_univ_inj
   (pi A \ pi B \ (! (univ &#39;&#39; A &#39;&#39; B) x22 \ ! x23 \ inj2_univ &#39;&#39; A &#39;&#39; B &#39; x22 = inj2_univ &#39;&#39; A &#39;&#39; B &#39; x23 ==&gt; x22 = x23) ,
    [then inv
     (bind (univ &#39;&#39; A &#39;&#39; B) x20 \ bind (univ &#39;&#39; A &#39;&#39; B) x21 \
        thenl (t (case_univ &#39;&#39; A &#39;&#39; B &#39;&#39; (univ &#39;&#39; A &#39;&#39; B) &#39; (inj2_univ &#39;&#39; A &#39;&#39; B &#39; x20) &#39;
             (lam (univ &#39;&#39; A &#39;&#39; B) x22 \ x22) &#39;
             (lam (univ &#39;&#39; A &#39;&#39; B) x22 \ x22)))
         [then sym
           (then (conv (land_tac (applyth case_univ_inj2)))
             (then (conv (land_tac b)) r)),
         then (conv (depth_tac h))
          (then (conv (land_tac (applyth case_univ_inj2)))
            (then (conv (land_tac b)) r))])])
 , theorem not_eq_inj1_inj2_univ 
   (pi A \ pi B \ (! (univ &#39;&#39; A &#39;&#39; B) x22 \ ! x23 \ inj1_univ &#39;&#39; A &#39;&#39; B &#39; x22 = inj2_univ &#39;&#39; A &#39;&#39; B &#39; x23 ==&gt; ff) ,
    [then inv
     (bind (univ &#39;&#39; A &#39;&#39; B) x22 \
       bind (univ &#39;&#39; A &#39;&#39; B) x23 \
        then (cutth case_univ_inj1)
         (then (lforall x22)
           (then (lforall (lam (univ &#39;&#39; A &#39;&#39; B) x24 \ ff))
             (then (lforall (lam (univ &#39;&#39; A &#39;&#39; B) x24 \ tt))
               (thenl (m ((lam (univ &#39;&#39; A &#39;&#39; B) x24 \ ff) &#39; x22)) [b,
                 then (conv (then sym h))
                  (then (wl [])
                    (then (conv (depth_tac h))
                      (then (wl [])
                        (then (conv (applyth case_univ_inj2))
                          (then (conv b) (itaut 1))))))])))))])
 , theorem inj1_disj_union_inj (pi A \ pi B \
    ((! x \ ! y \
     inj1_disj_union &#39;&#39; A &#39;&#39; B &#39; x = inj1_disj_union &#39;&#39; A &#39;&#39; B &#39; y ==&gt; x = y) ,
    [then inv
      (bind A x23 \
        bind A x24 \
         then (cutth case_disj_union_inj1)
          (then (lforall x23)
            (then (lforall (lam A x25 \ x25))
              (then (lforall (lam B x25 \ choose &#39;&#39; A))
                (thenl (t ((lam A x25 \ x25) &#39; x23))
                  [then (conv (rand_tac b)) r,
                  then (conv (land_tac (then sym h)))
                   (then (wl [])
                     (then (conv (depth_tac h))
                       (then (wl [])
                         (then (conv (land_tac (applyth case_disj_union_inj1)))
                           b))))])))))]))
 , theorem inj2_disj_union_inj (pi A \ pi B \
    ((! x \ ! y \
     inj2_disj_union &#39;&#39; A &#39;&#39; B &#39; x = inj2_disj_union &#39;&#39; A &#39;&#39; B &#39; y ==&gt; x = y) ,
    [then inv
      (bind B x23 \
        bind B x24 \
         then (cutth case_disj_union_inj2)
          (then (lforall x23)
            (then (lforall (lam A x25 \ choose &#39;&#39; B))
              (then (lforall (lam B x25 \ x25))
                (thenl (t ((lam B x25 \ x25) &#39; x23))
                  [then (conv (rand_tac b)) r,
                  then (conv (land_tac (then sym h)))
                   (then (wl [])
                     (then (conv (depth_tac h))
                       (then (wl [])
                         (then (conv (land_tac (applyth case_disj_union_inj2)))
                           b))))])))))]))

 /********** Monotonicity of logical connectives *********/
 , theorem and_monotone ((! a1 \ ! b1 \ ! a2 \ ! b2 \
    (a1 ==&gt; b1) ==&gt; (a2 ==&gt; b2) ==&gt; a1 &amp;&amp; a2 ==&gt; b1 &amp;&amp; b2),
    [itaut 2])
 , theorem or_monotone ((! a1 \ ! b1 \ ! a2 \ ! b2 \
    (a1 ==&gt; b1) ==&gt; (a2 ==&gt; b2) ==&gt; a1 `or a2 ==&gt; b1 `or b2),
    [itaut 2])
 , theorem impl_monotone ((! a1 \ ! b1 \ ! a2 \ ! b2 \
    (b1 ==&gt; a1) ==&gt; (a2 ==&gt; b2) ==&gt; (a1 ==&gt; a2) ==&gt; (b1 ==&gt; b2)),
    [itaut 3])
 , theorem not_monotone ((! p \ ! q \ (p ==&gt; q) ==&gt; (not &#39; q) ==&gt; (not &#39; p)),
    [itaut 3])
 , theorem forall_monotone (pi A \ (! p \ ! q \
    (! A x \ p &#39; x ==&gt; q &#39; x) ==&gt; (! x \ p &#39; x) ==&gt; (! x \ q &#39; x)),
    [itaut 6])
 , theorem exists_monotone (pi A \ (! p \ ! q \
    (! A x \ p &#39; x ==&gt; q &#39; x) ==&gt; (? x \ p &#39; x) ==&gt; (? x \ q &#39; x)),
    [itaut 6])

 /********** Knaster-Tarski theorem *********/
  , def in (pi A \ (A --&gt; (A --&gt; prop) --&gt; prop),
     (lam A x \ lam (A --&gt; prop) j \ j &#39; x))
  , def subseteq (pi A \ ((A --&gt; prop) --&gt; (A --&gt; prop) --&gt; prop),
     (lam (A --&gt; prop) x \ lam (A --&gt; prop) y \ ! z \ z #in x ==&gt; z #in y))
  , theorem in_subseteq (pi A \ 
     (! s \ ! t \ ! x \ s &lt;&lt;= t ==&gt; x #in s ==&gt; x #in t),
     [then forall_i
       (bind (A --&gt; prop) x9 \
         then forall_i
          (bind (A --&gt; prop) x10 \
            then forall_i (bind A x11 \ then (conv (land_tac dd)) (itaut 4))))])
  , def monotone (pi A \ (((A --&gt; prop) --&gt; (A --&gt; prop)) --&gt; prop),
      (lam (_ A) f \ ! x \ ! y \ x &lt;&lt;= y ==&gt; f &#39; x &lt;&lt;= f &#39; y))
  , def is_fixpoint (pi A \ (((A --&gt; prop) --&gt; (A --&gt; prop)) --&gt; ((A --&gt; prop) --&gt; prop)),
     (lam (_ A) f \ lam (_ A) x \ (f &#39; x) &lt;&lt;= x &amp;&amp; x &lt;&lt;= (f &#39; x)))
  , def fixpoint (pi A \ (((A --&gt; prop) --&gt; (A --&gt; prop)) --&gt; (A --&gt; prop)),
     (lam (_ A) f \ lam A a \ ! e \ f &#39; e &lt;&lt;= e ==&gt; a #in e))
  , theorem fixpoint_subseteq_any_prefixpoint (pi A \
     (! f \ ! x\ f &#39; x &lt;&lt;= x ==&gt; fixpoint &#39;&#39; A &#39; f &lt;&lt;= x),
     [then inv
       (bind ((A --&gt; prop) --&gt; (A --&gt; prop)) x9 \
         (bind (A --&gt; prop) x10 \
           then (conv (land_tac dd))
            (then (conv dd)
              (then forall_i
                (bind A x11 \
                  then (conv (land_tac dd))
                   (then (conv (land_tac b)) (itaut 4)))))))])
  , theorem fixpoint_subseteq_any_fixpoint (pi A \
     (! f \ ! x\ is_fixpoint &#39;&#39; A &#39; f &#39; x ==&gt; fixpoint &#39;&#39; A &#39; f &lt;&lt;= x),
     [then forall_i
       (bind ((A --&gt; prop) --&gt; (A --&gt; prop)) x9 \
         then forall_i
          (bind (A --&gt; prop) x10 \
            then (conv (land_tac dd))
             (then (cutth fixpoint_subseteq_any_prefixpoint) (itaut 8))))])
  , theorem prefixpoint_to_prefixpoint (pi A \
     (! f \ ! x \ monotone &#39;&#39; A &#39; f ==&gt; f &#39; x &lt;&lt;= x ==&gt; f &#39; (f &#39; x) &lt;&lt;= f &#39; x),
    [then forall_i
      (bind ((A --&gt; prop) --&gt; (A --&gt; prop)) x9 \
        then forall_i
         (bind (A --&gt; prop) x10 \ then (conv (land_tac dd)) (itaut 6)))])
  , theorem fixpoint_is_prefixpoint (pi A \
     (! f \ monotone &#39;&#39; A &#39; f ==&gt; f &#39; (fixpoint &#39;&#39; A &#39; f)&lt;&lt;= fixpoint &#39;&#39; A &#39; f),
     [then inv
       (bind ((A --&gt; prop) --&gt; (A --&gt; prop)) x9 \
         then (conv dd)
          (then inv
            (bind A x10 \
              then (conv (depth_tac (dd [fixpoint])))
               (then (conv dd)
                 (then (conv b)
                   (then inv
                     (bind (A --&gt; prop) x11 \
                       thenl (cut (fixpoint &#39;&#39; A &#39; x9 &lt;&lt;= x11))
                        [thenl
                          (cut (x9 &#39; (fixpoint &#39;&#39; A &#39; x9) &lt;&lt;= x9 &#39; x11))
                          [then (cutth in_subseteq)
                            (then (lforall_last (x9 &#39; x11))
                              (then (lforall_last x11)
                                (thenl apply_last [h,
                                  then (cutth in_subseteq) (itaut 10)]))),
                          thenl
                           (m (monotone &#39;&#39; A &#39; x9 ==&gt; x9 &#39; (fixpoint &#39;&#39; A &#39; x9) &lt;&lt;= x9 &#39; x11))
                           [itaut 10, then (conv (land_tac dd)) (itaut 10)]],
                        then (applyth fixpoint_subseteq_any_prefixpoint) h])))))))])
  , theorem fixpoint_is_fixpoint (pi A \
    (! f \ monotone &#39;&#39; A &#39; f ==&gt; is_fixpoint &#39;&#39; A &#39; f &#39; (fixpoint &#39;&#39; A &#39; f)),
    [then inv
      (bind ((A --&gt; prop) --&gt; (A --&gt; prop)) x9 \
        then (conv (depth_tac (dd [is_fixpoint])))
         (thenl inv [then (applyth fixpoint_is_prefixpoint) h,
           then (applyth fixpoint_subseteq_any_prefixpoint)
            (then (g (monotone &#39;&#39; A &#39; x9))
              (then (conv (land_tac dd))
                (then inv
                  (then apply (then (applyth fixpoint_is_prefixpoint) h)))))]))])

 /*********** Axiomatization of well-founded recursion ********/
 , decl rec (pi A \pi B \ ((A --&gt; B) --&gt; (A --&gt; B)) --&gt; (A --&gt; B))
 , inductive_def acc accF accF_monotone acc_i0 acc_e0 acc_e
    (pi A \ param (A --&gt; A --&gt; prop) lt \ acc \
     [ (acc_i, ! x \ (! y \ lt &#39; y &#39; x ==&gt; acc &#39; y) ==&gt; acc &#39; x) ])

 , def well_founded (pi A \ ((A --&gt; A --&gt; prop) --&gt; prop,
    lam (_ A) lt \ ! x \ acc &#39;&#39; A &#39; lt &#39; x))

 , axiom rec_is_fixpoint (pi A \ pi B \
   (! lt \ well_founded &#39;&#39; A &#39; lt ==&gt;
    ! ((A --&gt; B) --&gt; (A --&gt; B)) h \
     (! f \ ! g \ ! i \
       (! p \ lt &#39; p &#39; i ==&gt; f &#39; p = g &#39; p) ==&gt; h &#39; f &#39; i = h &#39; g &#39; i) ==&gt;
     rec &#39;&#39; A &#39;&#39; B &#39; h = h &#39; (rec &#39;&#39; A &#39;&#39; B &#39; h)))
 /******************* TESTS *****************/
 /* The first three tests are commented out because they require extra-hacks
    in the kernel to avoid quantifying over p, q and g.
 , theorem test_apply (p ==&gt; (p ==&gt; p ==&gt; q) ==&gt; q,
    [then i (then i (then apply h))])
 , theorem test_apply2 (p ==&gt; (! x \ ! y \ x ==&gt; x ==&gt; y) ==&gt; q,
    [then i (then i (then apply h))])
 , theorem test_itaut_1 (((? x \ g x) ==&gt; ! x \ (! y \ g y ==&gt; x) ==&gt; x),
   [itaut 4])*/
 , theorem test_monotone1 (monotone &#39;&#39; _ &#39; (lam _ p \ lam _ x \ not &#39; (p &#39; x) ==&gt; tt &amp;&amp; p &#39; tt `or p &#39; x),
   [ auto_monotone ])
 , theorem test_monotone2 (monotone &#39;&#39; _ &#39; (lam _ p \ lam _ x \ ? z \ not &#39; (p &#39; x) ==&gt; tt &amp;&amp; p &#39; tt `or z),
   [ auto_monotone ])
 , theorem test_monotone3 (monotone &#39;&#39; _ &#39; (lam _ p \ lam _ x \ ! z \ ? y \ (not &#39; (p &#39; x) ==&gt; z &amp;&amp; p &#39; y `or y)),
   [ auto_monotone ])
 , inductive_def pnn pnnF pnnF_monotone pnn_i pnn_e0 pnn_e (pnn \
     [ (pnn_tt, pnn &#39; tt)
     , (pnn_not, ! x \ pnn &#39; x ==&gt; pnn &#39; (not &#39; x))])
 , theorem pnn_e
    ((! x13 \
       x13 &#39; tt &amp;&amp; (! x14 \ x13 &#39; x14 ==&gt; x13 &#39; (not &#39; x14)) ==&gt;
        (! x14 \ pnn &#39; x14 ==&gt; x13 &#39; x14)) ,
   [then forall_i
     (bind (prop --&gt; prop) x13 \
       then (cutth pnn_e0)
        (then (lforall x13)
          (then i
            (thenl lapply
              [then (conv (depth_tac (dd [pnnF])))
                (then forall_i
                  (bind prop x14 \
                    then i
                     % from now on the proof is ad-hoc + fragile
                     (thenl left [then (conv (depth_tac h)) (itaut 1),
                       then left
                        (bind prop x15 \
                          then left (then (conv (depth_tac h)) (itaut 8)))]))),
              h]))))])
 , theorem pnn_has_two_values
    ((! x13 \ pnn &#39; x13 ==&gt; x13 = tt `or x13 = ff) ,
    % applying an elimination principle is hard: it should be automatized
    [then (cutth pnn_e)
      (then (lforall (lam prop x13 \ or &#39; (eq &#39;&#39; prop &#39; x13 &#39; tt) &#39; (eq &#39;&#39; prop &#39; x13 &#39; ff)))
        (thenl lapply
          [thenl conj [then (conv b) (itaut 1),
            then (repeat (conv (depth_tac b)))
             (then forall_i (bind prop x13 \ then i (then left (itaut 8))))],
          then inv
           (bind prop x13 \
             then (lforall x13)
              (thenl lapply [h,
                then
                 (g
                   ((lam prop x14 \ or &#39; (eq &#39;&#39; prop &#39; x14 &#39; tt) &#39; (eq &#39;&#39; prop &#39; x14 &#39; ff)) &#39;
                     x13))
                 (then (repeat (conv (depth_tac b)))
                   (then
                     (w
                       ((lam prop x14 \ or &#39; (eq &#39;&#39; prop &#39; x14 &#39; tt) &#39; (eq &#39;&#39; prop &#39; x14 &#39; ff))
                         &#39; x13)) (then (w (pnn &#39; x13)) (itaut 2))))]))]))])
 , inductive_def in_two in_twoF in_twoF_monotone in_two_i in_two_e0 in_two_e (in_two \
     [ (in_two_tt, in_two &#39; tt)
     , (in_two_ff, in_two &#39; ff) ])
 , new_basic_type bool2 myrep2 myabs2 myrepabs2 myabsrep2 myproprep2
    (pnn,
    [then (cutth pnn_tt) (then (applyth exists_i) h)])
 , def mytt (bool2,(myabs2 &#39; tt))
 , def mynot ((bool2 --&gt; bool2),(lam _ x \ myabs2 &#39; (not &#39; (myrep2 &#39; x))))
 , theorem mytt_transfer
   (myrep2 &#39; mytt = tt ,
     [then (conv (depth_tac (dd [mytt])))
       (then (applyth myrepabs2) (applyth pnn_tt))])
 , theorem mynot_transfer
   ((! x18 \ myrep2 &#39; (mynot &#39; x18) = not &#39; (myrep2 &#39; x18)) ,
     [then (conv (depth_tac (dd [mynot])))
       (then forall_i
         (bind bool2 x18 \
           then (applyth myrepabs2)
            (then (applyth pnn_not) (applyth myproprep2))))])
 , theorem mybool2_e
 ((! x18 \
    x18 &#39; mytt &amp;&amp; (! x19 \ x18 &#39; x19 ==&gt; x18 &#39; (mynot &#39; x19)) ==&gt;
     (! x19 \ x18 &#39; x19)) ,
   [thenl
     (cut
       (forall &#39;&#39; (bool2 --&gt; prop) &#39;
         (lam (bool2 --&gt; prop) x18 \
           impl &#39;
            (and &#39; (x18 &#39; (myabs2 &#39; (myrep2 &#39; mytt))) &#39;
              (forall &#39;&#39; bool2 &#39;
                (lam bool2 x19 \
                  impl &#39; (x18 &#39; (myabs2 &#39; (myrep2 &#39; x19))) &#39;
                   (x18 &#39;
                     (myabs2 &#39;
                       (myrep2 &#39; (mynot &#39; (myabs2 &#39; (myrep2 &#39; x19)))))))))
            &#39;
            (forall &#39;&#39; bool2 &#39;
              (lam bool2 x19 \ x18 &#39; (myabs2 &#39; (myrep2 &#39; x19)))))))
     [then
       (g
         (forall &#39;&#39; (bool2 --&gt; prop) &#39;
           (lam (bool2 --&gt; prop) x18 \
             impl &#39;
              (and &#39; (x18 &#39; (myabs2 &#39; (myrep2 &#39; mytt))) &#39;
                (forall &#39;&#39; bool2 &#39;
                  (lam bool2 x19 \
                    impl &#39; (x18 &#39; (myabs2 &#39; (myrep2 &#39; x19))) &#39;
                     (x18 &#39;
                       (myabs2 &#39;
                         (myrep2 &#39; (mynot &#39; (myabs2 &#39; (myrep2 &#39; x19)))))))))
              &#39;
              (forall &#39;&#39; bool2 &#39;
                (lam bool2 x19 \ x18 &#39; (myabs2 &#39; (myrep2 &#39; x19)))))))
       (then
         (w
           (forall &#39;&#39; (bool2 --&gt; prop) &#39;
             (lam (bool2 --&gt; prop) x18 \
               impl &#39;
                (and &#39; (x18 &#39; (myabs2 &#39; (myrep2 &#39; mytt))) &#39;
                  (forall &#39;&#39; bool2 &#39;
                    (lam bool2 x19 \
                      impl &#39; (x18 &#39; (myabs2 &#39; (myrep2 &#39; x19))) &#39;
                       (x18 &#39;
                         (myabs2 &#39;
                           (myrep2 &#39; (mynot &#39; (myabs2 &#39; (myrep2 &#39; x19)))))))))
                &#39;
                (forall &#39;&#39; bool2 &#39;
                  (lam bool2 x19 \ x18 &#39; (myabs2 &#39; (myrep2 &#39; x19)))))))
         (then (repeat (conv (depth_tac (applyth myabsrep2)))) (then i h))),
     then forall_i
      (bind (bool2 --&gt; prop) x18 \
        then (cutth pnn_e)
         (then
           (lforall
             (lam prop x19 \
               exists &#39;&#39; bool2 &#39;
                (lam bool2 x20 \
                  and &#39; (eq &#39;&#39; _ &#39; x19 &#39; (myrep2 &#39; x20)) &#39;
                   (x18 &#39; (myabs2 &#39; x19)))))
           (then inv
             (bind bool2 x19 \
               thenl
                (cut
                  ((lam prop x20 \
                     exists &#39;&#39; bool2 &#39;
                      (lam bool2 x21 \
                        and &#39; (eq &#39;&#39; _ &#39; x20 &#39; (myrep2 &#39; x21)) &#39;
                         (x18 &#39; (myabs2 &#39; x20)))) &#39; (myrep2 &#39; x19)))
                [then
                  (g
                    ((lam prop x20 \
                       exists &#39;&#39; bool2 &#39;
                        (lam bool2 x21 \
                          and &#39; (eq &#39;&#39; _ &#39; x20 &#39; (myrep2 &#39; x21)) &#39;
                           (x18 &#39; (myabs2 &#39; x20)))) &#39; (myrep2 &#39; x19)))
                  (then (conv (depth_tac b)) inv),
                thenl apply
                 [then (repeat (conv (depth_tac b)))
                   (thenl inv
                     [then (cutth exists_i)
                       (then
                         (lforall_last
                           (lam bool2 x20 \
                             and &#39; (eq &#39;&#39; _ &#39; tt &#39; (myrep2 &#39; x20)) &#39;
                              (x18 &#39; (myabs2 &#39; tt))))
                         (then (lforall_last mytt)
                           (then apply_last (then (conv b)
                            (thenl inv
                             [then (cutth mytt_transfer)
                               (then (conv (depth_tac h)) (applyth tt_intro)),
                             (applyth tt_intro),
                             then (cutth mytt_transfer)
                              (then (g (x18 &#39; (myabs2 &#39; (myrep2 &#39; mytt))))
                                (then (conv (depth_tac h)) (then i h)))]))))),
                     (bind prop x20 \
                       bind bool2 x21 \
                        then (cutth exists_i)
                         (then
                           (lforall_last
                             (lam bool2 x22 \
                               and &#39; (eq &#39;&#39; _ &#39; (not &#39; x20) &#39; (myrep2 &#39; x22)) &#39;
                                (x18 &#39; (myabs2 &#39; (not &#39; x20)))))
                           (then (lforall_last (mynot &#39; x21))
                             (then apply_last (then (conv b)
    (thenl inv
     [then (conv (applyth mynot_transfer))
       (then (conv (depth_tac (dd [not]))) (then inv (itaut 3))),
     then (g (myrep2 &#39; (mynot &#39; x21)))
      (then (conv (land_tac (applyth mynot_transfer)))
        (then (conv (depth_tac (dd [not]))) (then inv (itaut 3)))),
     then (lforall (myabs2 &#39; x20))
      (thenl lapply [then (conv (depth_tac (applyth myabsrep2))) h,
        then
         (g
           (x18 &#39;
             (myabs2 &#39;
               (myrep2 &#39; (mynot &#39; (myabs2 &#39; (myrep2 &#39; (myabs2 &#39; x20))))))))
         (then (conv (depth_tac (applyth myabsrep2)))
           (then (conv (depth_tac (applyth myabsrep2)))
             (thenl (cut (x20 = myrep2 &#39; x21))
               [then (conv (depth_tac h))
                 (then (conv (depth_tac h))
                   (then (conv (depth_tac (applyth myabsrep2)))
                     (then i
                       (then
                         (conv
                           (rand_tac
                             (rand_tac (then sym (applyth mynot_transfer)))))
                         (then (conv (depth_tac (applyth myabsrep2))) h))))),
               itaut 2])))])]))))))]),
                 applyth myproprep2]]))))]])

, theorem step0
    ((! x13 \ mynot &#39; (mynot &#39; (mynot &#39; x13)) = mynot &#39; x13) ,
     [then inv
      (bind bool2 x13 \
        then (repeat (conv (depth_tac (dd [mynot]))))
         (thenl (conv (land_tac (rand_tac (rand_tac (applyth myrepabs2)))))
          [then (cutth pnn_not)
            (then (lforall (myrep2 &#39; (myabs2 &#39; (not &#39; (myrep2 &#39; x13)))))
              (then (cutth myproprep2)
                (then (lforall (myabs2 &#39; (not &#39; (myrep2 &#39; x13))))
                  (then apply h)))),
          thenl
           (conv
             (land_tac
               (rand_tac (rand_tac (rand_tac (applyth myrepabs2))))))
           [then (cutth pnn_not)
             (then (lforall (myrep2 &#39; x13))
               (then (cutth myproprep2)
                 (then (lforall x13) (then apply h)))),
           then (conv (land_tac (rand_tac (applyth not_not_not)))) r]]))])
 , theorem mynot_mynot_mytt
    (mynot &#39; (mynot &#39; mytt) = mytt ,
     [then (conv (depth_tac (dd [mynot])))
      (then (cutth mynot_transfer)
        (then (lforall mytt)
          (then (conv (depth_tac h))
            (then (cutth mytt_transfer)
              (then (conv (depth_tac h))
                (then (conv (depth_tac (dd [mytt]))) (thenl c [r, itaut 3])))))))])
 , theorem step1
    ((! x18 \ x18 = mytt `or x18 = mynot &#39; mytt) ,
     [then forall_i
      (bind bool2 x18 \
       then (cutth mybool2_e)
        (thenl
          (cut
            ((lam bool2 x19 \
               or &#39; (eq &#39;&#39; _ &#39; x19 &#39; mytt) &#39; (eq &#39;&#39; _ &#39; x19 &#39; (mynot &#39; mytt))) &#39; x18))
          [then
            (g
              ((lam bool2 x19 \
                 or &#39; (eq &#39;&#39; _ &#39; x19 &#39; mytt) &#39; (eq &#39;&#39; _ &#39; x19 &#39; (mynot &#39; mytt))) &#39;
                x18)) (then (conv (depth_tac b)) (then i h)),
          then apply
           (then (repeat (conv (depth_tac b)))
             (thenl conj [then (applyth orl) r,
               thenl inv
                [(bind bool2 x19 \
                   then (applyth orr) (then (conv (depth_tac h)) r)),
                (bind bool2 x19 \
                  then (applyth orl) (then (conv (depth_tac h)) (applyth mynot_mynot_mytt)))]]))]))])

 /******* Cartesian product of types ******/
 /* TODO: this is an inductive type as well: generalize
    inductive_type to type abstractions */
 , def is_pair (pi A \ pi B \
  (univ &#39;&#39; (disj_union &#39;&#39; A &#39;&#39; B) &#39;&#39; prop --&gt; prop),
  lam (_ A B) p \ ? A a \ ? B b \
   p =
    pair_univ &#39;&#39; (_ A B) &#39;&#39; _ &#39;
     (injection_univ &#39;&#39; (_ A B) &#39;&#39; _ &#39; (inj1_disj_union &#39;&#39; A &#39;&#39; B &#39; a)) &#39;
     (injection_univ &#39;&#39; (_ A B) &#39;&#39; _ &#39; (inj2_disj_union &#39;&#39; A &#39;&#39; B &#39; b)))
 , new_basic_type prod prod_rep prod_abs prod_repabs prod_absrep prod_proprep
    (pi A \ pi B \ is_pair &#39;&#39; A &#39;&#39; B, [daemon])
 , def pair (pi A \ pi B \
    (A --&gt; B --&gt; prod &#39;&#39; A &#39;&#39; B,
    lam A a \ lam B b \
     prod_abs &#39;&#39; A &#39;&#39; B &#39;
      (pair_univ &#39;&#39; (_ A B) &#39;&#39; _ &#39;
       (injection_univ &#39;&#39; (_ A B) &#39;&#39; _ &#39; (inj1_disj_union &#39;&#39; A &#39;&#39; B &#39; a)) &#39;
       (injection_univ &#39;&#39; (_ A B) &#39;&#39; _ &#39; (inj2_disj_union &#39;&#39; A &#39;&#39; B &#39; b)))
    ))
 /* TODO: define fst and snd and prove the usual lemmas
    fst &#39; (pair &#39; a &#39; b) = a */

  /************* Natural numbers ***************/
 , inductive_def is_nat is_natF is_nat_monotone is_nat_i is_nat_e0 is_nat_e
   (is_nat \
     [ (is_nat_z, is_nat &#39; (inj1_univ &#39;&#39; prop &#39;&#39; prop &#39; (injection_univ &#39;&#39; prop &#39;&#39; prop &#39; ff)))
     , (is_nat_s, ! x \ is_nat &#39; x ==&gt; is_nat &#39; (inj2_univ &#39;&#39; prop &#39;&#39; prop &#39; x))])
 , new_basic_type nat nat_rep nat_abs nat_repabs nat_absrep nat_proprep
    (is_nat,
    [then (cutth is_nat_z) (then (applyth exists_i) h)])
 , def z (nat, nat_abs &#39; (inj1_univ &#39;&#39; prop &#39;&#39; prop &#39; (injection_univ &#39;&#39; prop &#39;&#39; prop &#39; ff)))
 , def s (nat --&gt; nat,
    (lam _ x \ nat_abs &#39; (inj2_univ &#39;&#39; prop &#39;&#39; prop &#39; (nat_rep &#39; x))))
 /* TODO: consequence of is_nat_e by transfer principles */
 , theorem nat_e ((! p \ p &#39; z ==&gt; (! n \ p &#39; n ==&gt; p &#39; (s &#39; n)) ==&gt; ! n \ p &#39; n), [ daemon ])
 , theorem nat_abs_inj
   ((! x18 \
      ! x19 \
       is_nat &#39; x18 ==&gt;
        is_nat &#39; x19 ==&gt; nat_abs &#39; x18 = nat_abs &#39; x19 ==&gt; x18 = x19) ,
     [then inv
       (bind _ x18 \
         bind _ x19 \
          thenl (conv (land_tac (then sym (applyth nat_repabs)))) [h,
           thenl (conv (rand_tac (then sym (applyth nat_repabs)))) [h,
            then (conv (depth_tac h)) r]])])
 , theorem nat_rep_inj
   ((! x18 \ ! x19 \ nat_rep &#39; x18 = nat_rep &#39; x19 ==&gt; x18 = x19) ,
     [then inv
       (bind nat x18 \
         bind nat x19 \
          then (conv (land_tac (then sym (applyth nat_absrep))))
           (then (conv (rand_tac (then sym (applyth nat_absrep))))
             (then (conv (depth_tac h)) r)))])
 , theorem s_inj ((! x18 \ ! x19 \ s &#39; x18 = s &#39; x19 ==&gt; x18 = x19) ,
     [then (repeat (conv (depth_tac (dd [s]))))
       (then inv
         (bind nat x18 \
           bind nat x19 \
            then (applyth nat_rep_inj)
             (then (applyth inj2_univ_inj)
               (thenl (applyth nat_abs_inj)
                 [then (applyth is_nat_s) (applyth nat_proprep),
                 then (applyth is_nat_s) (applyth nat_proprep), h]))))])
 , theorem not_equal_z_s ((! x20 \ not &#39; (z = s &#39; x20)) ,
     [then (repeat (conv (depth_tac (dd [z]))))
       (then (repeat (conv (depth_tac (dd [s]))))
         (then (repeat (conv (depth_tac (dd [not]))))
           (then inv
             (bind nat x20 \
               then (applyth not_eq_inj1_inj2_univ)
                (thenl (thenl (applyth nat_abs_inj) [id, id, h])
                  [applyth is_nat_z,
                  then (applyth is_nat_s) (applyth nat_proprep)])))))])
 , def nat_case (pi A \ (nat --&gt; A --&gt; (nat --&gt; A) --&gt; A,
    lam _ n \ lam (_ A) a \ lam (_ A) f \
     case_univ &#39;&#39; prop &#39;&#39; prop &#39;&#39; A &#39; (nat_rep &#39; n) &#39; (lam _ x \ a) &#39; (lam _ p \ f &#39; (nat_abs &#39; p))))
 , theorem nat_case_z (pi A \ ((! x21 \ ! x22 \ nat_case &#39;&#39; A &#39; z &#39; x21 &#39; x22 = x21) ,
      [then (conv (depth_tac (dd [nat_case])))
        (then (conv (depth_tac (dd [z])))
          (then forall_i
            (bind A x21 \
              then forall_i
               (bind (nat --&gt; A) x22 \
                 thenl
                  (conv (land_tac (rator_tac (land_tac (applyth nat_repabs)))))
                  [applyth is_nat_z,
                   then (conv (depth_tac (applyth case_univ_inj1)))
                    (then (conv (depth_tac b)) r)]))))]))
 , theorem nat_case_s
   (pi A \ (! x21 \ ! x22 \ ! x23 \
     nat_case &#39;&#39; A &#39; (s &#39; x21) &#39; x22 &#39; x23 = x23 &#39; x21),
     [then (conv (depth_tac (dd [nat_case])))
       (then (conv (depth_tac (dd [s])))
         (then forall_i
           (bind nat x21 \
             then forall_i
              (bind A x22 \
                then forall_i
                 (bind (nat --&gt; A) x23 \
                   thenl
                    (conv (land_tac (rator_tac (land_tac (applyth nat_repabs)))))
                    [then (applyth is_nat_s) (applyth nat_proprep),
                     then (conv (depth_tac (applyth case_univ_inj2)))
                     (then (conv (depth_tac b))
                       (then (conv (depth_tac (applyth nat_absrep))) r))])))))])


 , theorem pred_well_founded
   (well_founded &#39;&#39; nat &#39; (lam nat x21 \ lam nat x22 \ x22 = s &#39; x21) ,
   [then (conv dd)
     (then forall_i
       (bind nat x21 \
         thenl (applyth nat_e)
          [then (applyth acc_i)
            (then (repeat (conv (depth_tac b)))
              (then inv
                (bind nat x22 \
                  then (applyth ff_elim) (then (cutth not_equal_z_s) (itaut 4))))),
          then inv
           (bind nat x22 \
             then (applyth acc_i)
              (then (repeat (conv (depth_tac b)))
                (then inv
                  (bind nat x23 \
                    then (cutth s_inj)
                     (then (lforall x22)
                       (then (lforall x23)
                         (thenl lapply [h,
                           then (conv (rand_tac (then sym h))) h])))))))]))])
 , def nat_recF (pi A \
    A --&gt; (nat --&gt; A --&gt; A) --&gt; (nat --&gt; A) --&gt; (nat --&gt; A)
    , lam A a \ lam (_ A) f \ lam (_ A) rec \ lam _ n \
       nat_case &#39;&#39; A &#39; n &#39; a &#39; (lam _ p \ f &#39; p &#39; (rec &#39; p)))
 , def nat_rec (pi A \
    A --&gt; (nat --&gt; A --&gt; A) --&gt; nat --&gt; A
    , lam A a \ lam (_ A) f \ rec &#39;&#39; nat &#39;&#39; A &#39; (nat_recF &#39;&#39; A &#39; a &#39; f))
 , theorem nat_rec_ok0 (pi A \
   ((! a \ ! f \
     nat_rec &#39;&#39; A &#39; a &#39; f = nat_recF &#39;&#39; A &#39; a &#39; f &#39; (nat_rec &#39;&#39; A &#39; a &#39; f)) ,
   [then inv
     (bind A x22 \
       bind (nat --&gt; A --&gt; A) x23 \
        then (repeat (conv (depth_tac (dd [nat_rec]))))
         (thenl (applyth rec_is_fixpoint) [applyth pred_well_founded,
           then (repeat (conv (depth_tac b)))
            (then (repeat (conv (depth_tac (dd [nat_recF]))))
              (then forall_i
                (bind (nat --&gt; A) x24 \
                  then forall_i
                   (bind (nat --&gt; A) x25 \
                     then (conv (rand_tac beta_expand))
                      (thenl (applyth nat_e)
                        [then (conv (depth_tac b))
                          (then inv
                            (then (conv (land_tac (applyth nat_case_z)))
                              (then (conv (rand_tac (applyth nat_case_z))) r))),
                        then (repeat (conv (depth_tac b)))
                         (then inv
                           (bind nat x26 \
                             then (conv (rand_tac (applyth nat_case_s)))
                              (then (conv (land_tac (applyth nat_case_s)))
                                (then (repeat (conv (depth_tac b)))
                                  (then (lforall x26)
                                    (thenl lapply [r,
                                      then (conv (land_tac (rand_tac h))) r]))))))])))))]))]))
 , theorem nat_rec_ok (pi A \
   (! a \ ! f \ ! n \
     nat_rec &#39;&#39; A &#39; a &#39; f &#39; n =
      nat_case &#39;&#39; A &#39; n &#39; a &#39; (lam _ p \ f &#39; p &#39; (nat_rec &#39;&#39; A &#39; a &#39; f &#39; p))),
   [then inv
     (bind A x22 \
       bind (nat --&gt; A --&gt; A) x23 \
        bind nat x24 \
         then (conv (land_tac (rator_tac (applyth nat_rec_ok0))))
          (then (conv (depth_tac (dd [nat_recF]))) r))])

 /************* Arithmetics: plus ***************/
 , def plus (nat --&gt; nat --&gt; nat,
    lam _ n \ lam _ m \
     nat_rec &#39;&#39; _ &#39; m &#39; (lam _ p \ lam _ sum \ s &#39; sum)&#39; n)
 , theorem plus_z ((! n \ z + n = n),
   [then (conv (depth_tac (dd [plus])))
     (then inv
       (bind nat x21 \
         then (conv (land_tac (applyth nat_rec_ok)))
          (then (conv (land_tac (applyth nat_case_z))) r)))])
 , theorem plus_s ((! n \ ! m \  s &#39; n + m = s &#39; (n + m)),
   [then (repeat (conv (depth_tac (dd [plus]))))
     (then inv
       (bind nat x21 \
         bind nat x22 \
          then (conv (land_tac (applyth nat_rec_ok)))
           (then (conv (land_tac (applyth nat_case_s)))
             (then (repeat (conv (depth_tac b))) r))))])
 , theorem plus_n_z ((! n \ n + z = n),
   [then (conv (rand_tac beta_expand))
     (thenl (applyth nat_e) [then (conv b) (applyth plus_z),
       then (repeat (conv (depth_tac b)))
        (then inv
          (bind nat x21 \
            then (conv (land_tac (applyth plus_s)))
             (then (conv (depth_tac h)) r)))])])
 , theorem plus_n_s ((! n \ ! m \ n + (s &#39; m) = s &#39; (n + m)),
   [then (conv (rand_tac beta_expand))
     (thenl (applyth nat_e)
       [then (conv b)
         (then inv
           (bind nat x21 \ then (repeat (conv (depth_tac (applyth plus_z)))) r)),
       then (repeat (conv (depth_tac b)))
        (then inv
          (bind nat x21 \
            bind nat x22 \
             then (conv (land_tac (applyth plus_s)))
              (thenl c [r,
                then (conv (land_tac apply)) (then sym (applyth plus_s))])))])])
 , theorem plus_comm ((! n \ ! m \ n + m = m + n),
   [then (conv (rand_tac beta_expand))
     (thenl (applyth nat_e)
       [then (conv b)
         (then inv
           (bind nat x21 \
             then (conv (land_tac (applyth plus_z)))
              (then sym (applyth plus_n_z)))),
       then (repeat (conv (depth_tac b)))
        (then inv
          (bind nat x21 \
            bind nat x22 \
             then (conv (land_tac (applyth plus_s)))
              (then sym
                (then (conv (land_tac (applyth plus_n_s)))
                  (thenl c [r, then sym apply])))))])])

 ].

/* Status and dependencies of the tactics:
+dd:
+sym:
+eq_true_intro: (th tt_intro)
+forall_i: dd eq_true_intro
+conj: dd eq_true_intro
+andr: dd tt_intro
+andl: dd tt_intro
+forall_e: sym dd
+mp: andr sym dd
+i: dd andl conj
+cut: andr sym dd i
+cutth: cut
+lapply*: mp
+lforall*: mp forall_e
+apply*: lapply lforall
+applyth: cutth apply*

- f converional sometimes fails
- conv (depth_tac) diverges when applied to terms that contain
  metavariables
- repeat is not implemented using progress, that is not even there
*/

/*
-2.5) in the proof for myprop, at the end I provide the
  witness (and X X) where X remains free (and it is not even pi-quantified).
  If prop was empty, then X could not exist. On the other hand, if X was
  empty, then there would be no need to provide the proof at all.
  In any case, the symptom for X remaining free at the end of a proof is
  one or more goals delayed on it. We never check for them and we have
  no way atm to do that. See bug -3)

-2) the test apply_2 is very slow: why?
    same for the witness for myprop

0) definitions must not be recursive; typing should capture it
   (but not if declare_constraint is commented out...)

0.25) occurr check in bind case still missing :-(

0.50) case AppUvar vs AppUVar in unification is bugged (e.g.)
      X^2 x0 x1 = X^2 x0 x1

2) we need to fix the ELPI problems about handling of metavariables.
 I have already discussed with Enrico about them and he could have a
 shot at them. Namely:
 a) occur check + optimization to avoid it when possible (IN PROGRESS)
 b) unimplemented cases of restriction (IN PROGRESS)

3) once we let metavariables reach the goals, the current HOL-light 
 tactic implementation becomes too fragile. We should let the user 
 refer to hypotheses at least by number if not by name. But we better
 have a bidirectional successor/predecessor via declare_constraint

5) we could implement an automated theorem prover in lambdaProlog
 that works or is interfaced with the HOL-light code. There are
 complete provers like leanCOP 2.0 that are only 10 lines of code,
 but use some Prolog tricks.

6) we should do a small formalization, possibly developing a tactic,
 to prove that everything is working. For example, a decision procedure
 for rings or for linear inequations.

*/
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/hollight_legacy.elpi&quot;, line 3, column 0, character 24:</span>
<span class="go">Mixfix directives are not supported by this parser.</span>

<span class="go">The parser is based on token families.</span>
<span class="go">A family is identified by some starting characters, for example</span>
<span class="go">a token &#39;+--&gt;&#39; belongs to the family of &#39;+&#39;. There is no need</span>
<span class="go">to declare it.</span>

<span class="go">All the tokens of a family are parsed with the same precedence and</span>
<span class="go">associativity, for example &#39;x +--&gt; y *--&gt; z&#39; is parsed as</span>
<span class="go">&#39;x +--&gt; (y *--&gt; z)&#39; since the family of &#39;*&#39; has higher precedence</span>
<span class="go">than the family of &#39;+&#39;.</span>

<span class="go">Here the table of tokens and token families.</span>
<span class="go">Token families are represented by the start symbols followed by &#39;..&#39;.</span>
<span class="go">Tokens of families marked with [*] cannot end with the starting symbol,</span>
<span class="go">eg `foo` is not an infix, while `foo is.</span>
<span class="go">The listing is ordered by increasing precedence.</span>

<span class="go">fixity                     | tokens / token families</span>
<span class="go">-------------------------- + -----------------------------------</span>
<span class="go">Infix   not   associative  | :-  ?-</span>
<span class="go">Infix   right associative  | ;</span>
<span class="go">Infix   right associative  | ,  &amp;</span>
<span class="go">Infix   right associative  | -&gt;</span>
<span class="go">Infix   right associative  | =&gt;</span>
<span class="go">Infix   not   associative  | =  ==  =&lt;  r&lt;  i&lt;  s&lt;  r=&lt;  i=&lt;  s=&lt;</span>
<span class="go">                             &lt;..  r&gt;  i&gt;  s&gt;  r&gt;=  i&gt;=  s&gt;=  &gt;..</span>
<span class="go">                             is</span>
<span class="go">Infix   right associative  | ::</span>
<span class="go">Infix   not   associative  | &#39;.. [*]</span>
<span class="go">Infix   left  associative  | ^..  r+  i+  s+  +..  -  r-  i-  s-</span>
<span class="go">Infix   left  associative  | r*  i*  s*  *..  /  div  mod</span>
<span class="go">Infix   right associative  | --..</span>
<span class="go">Infix   not   associative  | `.. [*]</span>
<span class="go">Infix   right associative  | ==..</span>
<span class="go">Infix   right associative  | ||..</span>
<span class="go">Infix   right associative  | &amp;&amp;..</span>
<span class="go">Infix   left  associative  | #..</span>
<span class="go">Prefix  not   associative  | r~  i~  ~..</span>
<span class="go">Postfix not   associative  | ?..</span>

<span class="go">If the token is a valid mixfix, and you want the file to stay compatible</span>
<span class="go">with Teyjus, you can ask Elpi to skip the directive. Eg:</span>

<span class="gp">% </span>elpi:skip <span class="m">2</span>  // skips the next two lines
<span class="go">infixr ==&gt; 120.</span>
<span class="go">infixr || 120.</span>

<span class="go">As a debugging facility one can ask Elpi to print the AST in order to</span>
<span class="go">verify how the text was parsed. Eg:</span>

<span class="go">echo &#39;MyFormula = a || b ==&gt; c &amp;&amp; d&#39; | elpi -parse-term</span>
</pre></div>
</div>
<p><strong>../../tests/sources/hyp_uvar.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">any</span>.<span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>(f<span class="w"> </span><span class="kd">uvar</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;ok&quot;</span><span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>(f<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>not<span class="o">(</span>f<span class="w"> </span><span class="mi">1</span><span class="o">))</span><span class="kd">,</span><span class="w"> </span>var<span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ok</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.062</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/impl.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% q X Y shoud yield X=ok Y=ok</span>

q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(r<span class="w"> </span>a<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>p<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>f<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">.</span><span class="w"></span>

f<span class="w"> </span>ok<span class="w"> </span>ko<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>r<span class="w"> </span>a<span class="o">.</span><span class="w"></span>
f<span class="w"> </span>ok<span class="w"> </span>ok<span class="o">.</span><span class="w"></span>

p<span class="w"> </span>ko<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>r<span class="w"> </span>a<span class="o">.</span><span class="w"></span>
p<span class="w"> </span>ok<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>r<span class="w"> </span>a<span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/impl.elpi&quot;, line 3, column 0, character 31:</span>
<span class="go"> Warning:</span>
<span class="go"> constant r has no declared type. Did you mean std.set.private.remove-min-binding std.set.private.remove std.set.remove std.map.private.remove-min-binding std.map.private.remove std.map.remove std.rev rex.replace std.string.map.remove std.int.map.remove std.loc.map.remove std.string.set.remove std.int.set.remove std.loc.set.remove ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/impl.elpi&quot;, line 3, column 0, character 31:</span>
<span class="go"> Warning: constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/impl.elpi&quot;, line 3, column 0, character 31:</span>
<span class="go"> Warning:</span>
<span class="go"> constant p has no declared type. Did you mean std.set.private.set std.set.private.empty std.set.private.node std.set.private.height std.set.private.create std.set.private.bal std.set.private.add std.set.private.mem std.set.private.remove-min-binding std.set.private.min-binding std.set.private.merge std.set.private.remove std.set.private.cardinal std.set.private.elements std.map.private.map std.map.private.empty std.map.private.node std.map.private.height std.map.private.create std.map.private.bal std.map.private.add std.map.private.find std.map.private.remove-min-binding std.map.private.min-binding std.map.private.merge std.map.private.remove std.map.private.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/impl.elpi&quot;, line 5, column 0, character 62:</span>
<span class="go"> Warning: constant ko has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/impl.elpi&quot;, line 3, column 0, character 31:</span>
<span class="go"> Warning:</span>
<span class="go"> constant f has no declared type. Did you mean std.map.private.find std.map.find std.fatal-error std.fatal-error-w-data std.fold std.fold2 std.fold-map std.forall std.forall-ok std.forall2 std.filter std.flatten std.flip std.findall loc.fields std.string.map.find std.int.map.find std.loc.map.find gc.full ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/impl.elpi&quot;, line 3, column 0, character 31:</span>
<span class="go"> Warning:</span>
<span class="go"> constant a has no declared type. Did you mean std.set.private.add std.set.add std.map.private.add std.map.add std.assert! std.assert-ok! std.append std.appendR std.any-&gt;string std.string.map.add std.int.map.add std.loc.map.add std.string.set.add std.int.set.add std.loc.set.add ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.084</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/impl2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% q X yields X=ok</span>

q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(a<span class="kd">,</span><span class="w"> </span><span class="o">(</span>b<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>a<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="o">(</span>a<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>c<span class="o">))</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>(b<span class="kd">,</span>c<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>r<span class="w"> </span>ok<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>r<span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/impl2.elpi&quot;, line 3, column 0, character 19:</span>
<span class="go"> Warning:</span>
<span class="go"> constant r has no declared type. Did you mean std.set.private.remove-min-binding std.set.private.remove std.set.remove std.map.private.remove-min-binding std.map.private.remove std.map.remove std.rev rex.replace std.string.map.remove std.int.map.remove std.loc.map.remove std.string.set.remove std.int.set.remove std.loc.set.remove ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/impl2.elpi&quot;, line 3, column 0, character 19:</span>
<span class="go"> Warning: constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/impl2.elpi&quot;, line 3, column 0, character 19:</span>
<span class="go"> Warning:</span>
<span class="go"> constant c has no declared type. Did you mean std.set.private.create std.set.private.cardinal std.set.cardinal std.map.private.create std.string.concat std.string.set.cardinal std.int.set.cardinal std.loc.set.cardinal trace.counter gc.compact ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/impl2.elpi&quot;, line 3, column 0, character 19:</span>
<span class="go"> Warning:</span>
<span class="go"> constant b has no declared type. Did you mean std.set.private.bal std.map.private.bal std.map.private.bindings std.map.bindings std.string.map.bindings std.int.map.bindings std.loc.map.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/impl2.elpi&quot;, line 3, column 0, character 19:</span>
<span class="go"> Warning:</span>
<span class="go"> constant a has no declared type. Did you mean std.set.private.add std.set.add std.map.private.add std.map.add std.assert! std.assert-ok! std.append std.appendR std.any-&gt;string std.string.map.add std.int.map.add std.loc.map.add std.string.set.add std.int.set.add std.loc.set.add ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.081</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/index2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% to be traced</span>

<span class="k k-Mode">:index</span><span class="w">(</span><span class="mi">_ _ _ _ _ _ _ _ 1</span>)<span class="w"></span>
<span class="kd">pred</span><span class="w"> </span><span class="nf">p</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>.<span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w"></span>

iter<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">P</span><span class="kd">,</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">-</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"> </span>iter<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">P</span><span class="o">.</span><span class="w"></span>
iter<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nv">_</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>iter<span class="w"> </span><span class="mi">999999</span><span class="w"> </span>(p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/index2.elpi&quot;, line 111, column 0, character 2318:</span>
<span class="go"> Warning: constant iter has no declared type.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.001</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.078</span>

<span class="go">Success:</span>

<span class="go">Time: 1.341</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/io_colon.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">i</span>\<span class="w"> </span>f<span class="w"> </span>i<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>true<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>f<span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/io_colon.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning:</span>
<span class="go"> constant f has no declared type. Did you mean std.map.private.find std.map.find std.fatal-error std.fatal-error-w-data std.fold std.fold2 std.fold-map std.forall std.forall-ok std.forall2 std.filter std.flatten std.flip std.findall loc.fields std.string.map.find std.int.map.find std.loc.map.find gc.full ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.065</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/lambda.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% test Z yields Z=impl(impl A B) (impl A B)</span>

<span class="c">% Type inference for simply typed lambda terms</span>
<span class="c">% Syntax: t ::= appl t t | abs F    where F is a function t -&gt; t</span>
<span class="c">% Syntax: ty ::= impl ty ty</span>

of<span class="w"> </span>(appl<span class="w"> </span><span class="nv">T1</span><span class="w"> </span><span class="nv">T2</span><span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>of<span class="w"> </span><span class="nv">T1</span><span class="w"> </span>(impl<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>of<span class="w"> </span><span class="nv">T2</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span><span class="w"></span>
of<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(impl<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>of<span class="w"> </span>x<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>of<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="o">.</span><span class="w"></span>

test<span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>of<span class="w"> </span>(lam<span class="w"> </span><span class="nv">f\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">a\</span><span class="w"> </span>appl<span class="w"> </span>f<span class="w"> </span>a<span class="o">)</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>test<span class="w"> </span><span class="nv">Z</span><span class="kd">,</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>impl<span class="w"> </span>(impl<span class="w"> </span>a<span class="w"> </span>b<span class="o">)</span><span class="w"> </span>(impl<span class="w"> </span>a<span class="w"> </span>b<span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda.elpi&quot;, line 10, column 0, character 288:</span>
<span class="go"> Warning: constant test has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda.elpi&quot;, line 7, column 0, character 186:</span>
<span class="go"> Warning: constant of has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda.elpi&quot;, line 8, column 0, character 234:</span>
<span class="go"> Warning: constant lam has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda.elpi&quot;, line 7, column 0, character 186:</span>
<span class="go"> Warning: constant impl has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda.elpi&quot;, line 12, column 0, character 330:</span>
<span class="go"> Warning:</span>
<span class="go"> constant b has no declared type. Did you mean std.set.private.bal std.map.private.bal std.map.private.bindings std.map.bindings std.string.map.bindings std.int.map.bindings std.loc.map.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda.elpi&quot;, line 7, column 0, character 186:</span>
<span class="go"> Warning: constant appl has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda.elpi&quot;, line 12, column 0, character 330:</span>
<span class="go"> Warning:</span>
<span class="go"> constant a has no declared type. Did you mean std.set.private.add std.set.add std.map.private.add std.map.add std.assert! std.assert-ok! std.append std.appendR std.any-&gt;string std.string.map.add std.int.map.add std.loc.map.add std.string.set.add std.int.set.add std.loc.set.add ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.087</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/lambda2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% q X yields X=ok</span>

q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>r<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>p<span class="w"> </span>x<span class="o">).</span><span class="w"></span>

r<span class="w"> </span>ko<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>g<span class="w"> </span>x<span class="o">).</span><span class="w"></span>
r<span class="w"> </span>ok<span class="w"> </span>(<span class="nv">y\</span><span class="w"> </span>p<span class="w"> </span>y<span class="o">).</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda2.elpi&quot;, line 3, column 0, character 19:</span>
<span class="go"> Warning:</span>
<span class="go"> constant r has no declared type. Did you mean std.set.private.remove-min-binding std.set.private.remove std.set.remove std.map.private.remove-min-binding std.map.private.remove std.map.remove std.rev rex.replace std.string.map.remove std.int.map.remove std.loc.map.remove std.string.set.remove std.int.set.remove std.loc.set.remove ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda2.elpi&quot;, line 3, column 0, character 19:</span>
<span class="go"> Warning: constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda2.elpi&quot;, line 3, column 0, character 19:</span>
<span class="go"> Warning:</span>
<span class="go"> constant p has no declared type. Did you mean std.set.private.set std.set.private.empty std.set.private.node std.set.private.height std.set.private.create std.set.private.bal std.set.private.add std.set.private.mem std.set.private.remove-min-binding std.set.private.min-binding std.set.private.merge std.set.private.remove std.set.private.cardinal std.set.private.elements std.map.private.map std.map.private.empty std.map.private.node std.map.private.height std.map.private.create std.map.private.bal std.map.private.add std.map.private.find std.map.private.remove-min-binding std.map.private.min-binding std.map.private.merge std.map.private.remove std.map.private.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda2.elpi&quot;, line 5, column 0, character 41:</span>
<span class="go"> Warning: constant ko has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda2.elpi&quot;, line 5, column 0, character 41:</span>
<span class="go"> Warning: constant g has no declared type. Did you mean gc.get ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.080</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/lambda3.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">%%%module lambda3.</span>

of<span class="w"> </span>(appl<span class="w"> </span><span class="nv">T1</span><span class="w"> </span><span class="nv">T2</span><span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>of<span class="w"> </span><span class="nv">T1</span><span class="w"> </span>(impl<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>of<span class="w"> </span><span class="nv">T2</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span><span class="w"></span>
of<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(impl<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>of<span class="w"> </span>x<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>of<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="o">.</span><span class="w"></span>

append<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XS</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L1</span><span class="o">)</span><span class="w">  </span><span class="kd">:-</span><span class="w"> </span>append<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="o">.</span><span class="w"></span>
append<span class="w"> </span>xnil<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="o">.</span><span class="w"></span>

termify<span class="w"> </span>xnil<span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\</span>x<span class="o">).</span><span class="w"></span>
termify<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XS</span><span class="o">)</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">c</span>\<span class="w"> </span>termify<span class="w"> </span><span class="nv">XS</span><span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>c<span class="o">).</span><span class="w"></span>

test<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>
<span class="w">  </span><span class="nv">X1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(xcons<span class="w"> </span>x0<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x1<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x2<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x3<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x4<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x5<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x6<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x7<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x8<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x9<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x10<span class="w"> </span>xnil<span class="o">)))))))))))</span><span class="kd">,</span><span class="w"> </span>
<span class="w">  </span>append<span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>append<span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>append<span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>append<span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="nv">X5</span><span class="w"> </span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>append<span class="w"> </span><span class="nv">X5</span><span class="w"> </span><span class="nv">X5</span><span class="w"> </span><span class="nv">X6</span><span class="w"> </span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="c">% append X6 X6 X7 ,</span>
<span class="w">  </span><span class="c">% append X7 X7 X8 ,</span>
<span class="w">  </span><span class="c">% append X8 X8 X9 ,</span>
<span class="w">  </span><span class="c">% append X9 X9 X10 ,</span>
<span class="w">  </span><span class="c">% append X10 X10 X11 ,</span>
<span class="w">  </span><span class="c">% append X11 X11 X12 ,</span>
<span class="w">  </span><span class="c">% append X12 X12 X13 ,</span>
<span class="w">  </span><span class="c">% append X13 X13 X14 ,</span>
<span class="w">   </span><span class="c">% append X14 X14 X15 ,</span>
<span class="w">   </span><span class="c">% append X15 X15 X16 ,</span>
<span class="w">   </span><span class="c">% append X16 X16 X17 ,</span>
<span class="w">   </span><span class="c">% append X17 X17 X18 ,</span>
<span class="w">   </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X6</span><span class="w"> </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>termify<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L</span><span class="o">.</span><span class="w"></span>

once<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>of<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span><span class="w"></span>

iter<span class="w"> </span>zero<span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>
iter<span class="w"> </span>(s<span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>iter<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

plus<span class="w"> </span>zero<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>
plus<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">S</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>plus<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">S</span><span class="o">.</span><span class="w"></span>

mult<span class="w"> </span>zero<span class="w"> </span><span class="nv">X</span><span class="w"> </span>zero<span class="o">.</span><span class="w"></span>
mult<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>mult<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">K</span><span class="kd">,</span><span class="w"> </span>plus<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span><span class="w"></span>

exp<span class="w"> </span>zero<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">).</span><span class="w"></span>
exp<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>exp<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">K</span><span class="kd">,</span><span class="w"> </span>mult<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w"> </span><span class="nv">TEN</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>s<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">)))))))))</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>exp<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">)))</span><span class="w"> </span><span class="nv">TEN</span><span class="w"> </span><span class="nv">THOUSAND</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>test<span class="w"> </span><span class="nv">L</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>iter<span class="w"> </span><span class="nv">THOUSAND</span><span class="w"> </span>(once<span class="w"> </span><span class="nv">L</span><span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda3.elpi&quot;, line 36, column 0, character 866:</span>
<span class="go"> Warning: constant zero has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda3.elpi&quot;, line 7, column 0, character 178:</span>
<span class="go"> Warning: constant xnil has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda3.elpi&quot;, line 6, column 0, character 122:</span>
<span class="go"> Warning: constant xcons has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda3.elpi&quot;, line 12, column 0, character 278:</span>
<span class="go"> Warning: constant x9 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda3.elpi&quot;, line 12, column 0, character 278:</span>
<span class="go"> Warning: constant x8 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda3.elpi&quot;, line 12, column 0, character 278:</span>
<span class="go"> Warning: constant x7 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda3.elpi&quot;, line 12, column 0, character 278:</span>
<span class="go"> Warning: constant x6 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda3.elpi&quot;, line 12, column 0, character 278:</span>
<span class="go"> Warning: constant x5 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda3.elpi&quot;, line 12, column 0, character 278:</span>
<span class="go"> Warning: constant x4 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda3.elpi&quot;, line 12, column 0, character 278:</span>
<span class="go"> Warning: constant x3 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda3.elpi&quot;, line 12, column 0, character 278:</span>
<span class="go"> Warning: [suppressing 29 warnings]</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda3.elpi&quot;, line 10, column 0, character 221:</span>
<span class="go"> Warning: X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda3.elpi&quot;, line 34, column 0, character 847:</span>
<span class="go"> Warning: Z is linear: name it _Z (discard) or Z_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda3.elpi&quot;, line 36, column 0, character 866:</span>
<span class="go"> Warning: X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda3.elpi&quot;, line 42, column 0, character 959:</span>
<span class="go"> Warning: X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/lambda3.elpi&quot;, line 45, column 0, character 1020:</span>
<span class="go"> Warning: X is linear: name it _X (discard) or X_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.101</span>

<span class="go">Success:</span>

<span class="go">Time: 0.311</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/list_as_conj.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">type</span><span class="w"> </span><span class="nf">a,b</span><span class="w"> </span><span class="kt">prop</span>.<span class="w"></span>
f<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">[</span>print<span class="w"> </span>a<span class="kd">,</span><span class="w"> </span>print<span class="w"> </span>b<span class="kd">,</span><span class="w"> </span>a<span class="kd">]</span><span class="o">.</span><span class="w"></span>
a<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(b<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">[</span>print<span class="w"> </span><span class="s2">&quot;done&quot;</span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>b<span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/list_as_conj.elpi&quot;, line 2, column 0, character 15:</span>
<span class="go"> Warning:</span>
<span class="go"> constant f has no declared type. Did you mean std.map.private.find std.map.find std.fatal-error std.fatal-error-w-data std.fold std.fold2 std.fold-map std.forall std.forall-ok std.forall2 std.filter std.flatten std.flip std.findall loc.fields std.string.map.find std.int.map.find std.loc.map.find gc.full ?</span>
<span class="go">a</span>
<span class="go">b</span>
<span class="go">done</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.081</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/list_comma.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="nv">L1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="mi">1</span><span class="kd">,</span><span class="mi">2</span><span class="kd">,</span><span class="mi">3</span><span class="kd">,],</span><span class="w"></span>
<span class="w">  </span><span class="nv">L2</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="mi">1</span><span class="kd">,</span><span class="mi">2</span><span class="kd">,</span><span class="mi">3</span><span class="kd">],</span><span class="w"></span>
<span class="w">  </span>std.length<span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>std.length<span class="w"> </span><span class="nv">L2</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.003</span>

<span class="go">Typechecking time: 0.093</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/llam.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span>spy X :-  counter &quot;run&quot; N, print N &quot;test &quot; X, 
  not(not(X)).

type test ((A -&gt; A -&gt; prop) -&gt; B -&gt; prop) -&gt; B -&gt; prop.
test P T :-
  spy(P (x\y\x = y) F, F = T),
  spy(P (x\y\y = x) F, F = T),
  spy(pi dummy\ sigma F\ P (x\y\x = y) F, F = T),
  spy(pi dummy\ sigma F\ P (x\y\y = x) F, F = T)
  , print &quot;----------------------------------------&quot;
  .

clause (x\y\F y x) :- F = a\b\b.
clause1 (x\y\x).
clause2 (x\y\X x, F y (X x)) :- F = a\b\b.

type r A -&gt; B.
prune_arg (r F).
prune_arg2 (r (x\F x)).
prune_arg3 (r (x\y\F y x)).

main :-
  test (eq\F\        pi x\ pi y\ eq (F y x) x)             (a\b\b),
  test (eq\F\   not (pi x\ pi y\ eq (F x) y))              whatever,
  test (eq\F\        pi x\ pi y\ eq (F y x) (r (w\h w x))) (a\b\r (x\h x b)),
  test (eq\F\        pi x\ pi y\ sigma R\ R = x, eq (F y x) R)             (a\b\b),
  test (eq\F\   not (pi x\ pi y\ sigma R\ R = x, eq (F R) y))              whatever,
  test (eq\F\        pi x\ pi y\ sigma R\ R = x, eq (F y x) (r (w\h w R))) (a\b\r (x\h x b)),
  spy (pi dummy\ clause (x\y\x)),
  (pi dummy\ clause1 (x\y\F y x), F = a\b\b),
  (pi dummy\ clause2 (x\y\x,x)),
  (clause3 (x\y\G y x) =&gt; pi dummy\ clause3 (x\y\x)), (G = a\b\b),
  test (eq\F\        sigma H\pi x\ pi y\ eq (F y) (r (H y x)), H x x = x, H x y = x)   (a\r a),

  % this is hard because F&lt;H but is applied to y that H can see, so H is restricted to the
  % level of F (that alone would prune y) but applied to y, so H 1 = y works
  test (eq\F\        pi x\ pi y\ sigma H\ pi z\pi w\eq (F y) (r (H w)),
                                                    spy(H 1 = y), not(H 2 = x))
       (a\r whatever),
  test (eq\F\        pi x\ pi y\ sigma H\ pi w\eq (F y x) (r (H w)),
                                               H 1 = f x y)
       (a\b\r (f b a)),
 
  test (eq\F\        pi x\pi y\prune_arg (F y x))  (a\b\r (v a b)),
  test (eq\F\        pi x\pi y\prune_arg2 (F y x)) (a\b\r (x\v a b)),
  test (eq\F\        pi x\pi y\prune_arg3 (F y x)) (a\b\r (x\y\v a b)),
 
  true.
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llam.elpi&quot;, line 22, column 0, character 529:</span>
<span class="go"> Warning: constant whatever has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llam.elpi&quot;, line 22, column 0, character 529:</span>
<span class="go"> Warning: constant v has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llam.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go"> Warning: constant spy has no declared type. Did you mean std.spy std.spy! std.spy-do! ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llam.elpi&quot;, line 20, column 0, character 500:</span>
<span class="go"> Warning: constant prune_arg3 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llam.elpi&quot;, line 19, column 0, character 476:</span>
<span class="go"> Warning: constant prune_arg2 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llam.elpi&quot;, line 18, column 0, character 459:</span>
<span class="go"> Warning: constant prune_arg has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llam.elpi&quot;, line 22, column 0, character 529:</span>
<span class="go"> Warning: constant h has no declared type. Did you mean std.set.private.height std.map.private.height ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llam.elpi&quot;, line 22, column 0, character 529:</span>
<span class="go"> Warning:</span>
<span class="go"> constant f has no declared type. Did you mean std.map.private.find std.map.find std.fatal-error std.fatal-error-w-data std.fold std.fold2 std.fold-map std.forall std.forall-ok std.forall2 std.filter std.flatten std.flip std.findall loc.fields std.string.map.find std.int.map.find std.loc.map.find gc.full ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llam.elpi&quot;, line 22, column 0, character 529:</span>
<span class="go"> Warning: constant clause3 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llam.elpi&quot;, line 15, column 0, character 400:</span>
<span class="go"> Warning: constant clause2 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llam.elpi&quot;, line 14, column 0, character 383:</span>
<span class="go"> Warning: [suppressing 2 warnings]</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llam.elpi&quot;, line 18, column 0, character 459:</span>
<span class="go"> Warning: F is linear: name it _F (discard) or F_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llam.elpi&quot;, line 19, column 0, character 476:</span>
<span class="go"> Warning: F is linear: name it _F (discard) or F_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llam.elpi&quot;, line 20, column 0, character 500:</span>
<span class="go"> Warning: F is linear: name it _F (discard) or F_ (fresh variable)</span>
<span class="go">0 test  pi c0 \ pi c1 \ X0 c1 c0 = c0 , X0 = (c0 \ c1 \ c1)</span>
<span class="go">0 test  pi c0 \ pi c1 \ c0 = X0 c1 c0 , X0 = (c0 \ c1 \ c1)</span>
<span class="go">0 test  pi c0 \ sigma c1 \ pi c2 \ pi c3 \ c1 c3 c2 = c2 , c1 = (c2 \ c3 \ c3)</span>
<span class="go">0 test  pi c0 \ sigma c1 \ pi c2 \ pi c3 \ c2 = c1 c3 c2 , c1 = (c2 \ c3 \ c3)</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test  not (pi c0 \ pi c1 \ X1 c0 = c1) , X1 = whatever</span>
<span class="go">0 test  not (pi c0 \ pi c1 \ c1 = X1 c0) , X1 = whatever</span>
<span class="go">0 test  pi c0 \ sigma c1 \ not (pi c2 \ pi c3 \ c1 c2 = c3) , c1 = whatever</span>
<span class="go">0 test  pi c0 \ sigma c1 \ not (pi c2 \ pi c3 \ c3 = c1 c2) , c1 = whatever</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test  pi c0 \ pi c1 \ X2 c1 c0 = r c2 \ h c2 c0 , X2 = (c0 \ c1 \ r c2 \ h c2 c1)</span>
<span class="go">0 test  pi c0 \ pi c1 \ r c2 \ h c2 c0 = X2 c1 c0 , X2 = (c0 \ c1 \ r c2 \ h c2 c1)</span>
<span class="go">0 test  pi c0 \ sigma c1 \ pi c2 \ pi c3 \ c1 c3 c2 = r c4 \ h c4 c2 , c1 = (c2 \ c3 \ r c4 \ h c4 c3)</span>
<span class="go">0 test  pi c0 \ sigma c1 \ pi c2 \ pi c3 \ r c4 \ h c4 c2 = c1 c3 c2 , c1 = (c2 \ c3 \ r c4 \ h c4 c3)</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test  pi c0 \ pi c1 \ sigma c2 \ c2 = c0 , X3 c1 c0 = c2 , X3 = (c0 \ c1 \ c1)</span>
<span class="go">0 test  pi c0 \ pi c1 \ sigma c2 \ c2 = c0 , c2 = X3 c1 c0 , X3 = (c0 \ c1 \ c1)</span>
<span class="go">0 test  pi c0 \ sigma c1 \ pi c2 \ pi c3 \ sigma c4 \ c4 = c2 , c1 c3 c2 = c4 , c1 = (c2 \ c3 \ c3)</span>
<span class="go">0 test  pi c0 \ sigma c1 \ pi c2 \ pi c3 \ sigma c4 \ c4 = c2 , c4 = c1 c3 c2 , c1 = (c2 \ c3 \ c3)</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test  not (pi c0 \ pi c1 \ sigma c2 \ c2 = c0 , X4 c2 = c1) , X4 = whatever</span>
<span class="go">0 test  not (pi c0 \ pi c1 \ sigma c2 \ c2 = c0 , c1 = X4 c2) , X4 = whatever</span>
<span class="go">0 test  pi c0 \ sigma c1 \ not (pi c2 \ pi c3 \ sigma c4 \ c4 = c2 , c1 c4 = c3) , c1 = whatever</span>
<span class="go">0 test  pi c0 \ sigma c1 \ not (pi c2 \ pi c3 \ sigma c4 \ c4 = c2 , c3 = c1 c4) , c1 = whatever</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test  pi c0 \ pi c1 \ sigma c2 \ c2 = c0 , X5 c1 c0 = r c3 \ h c3 c2 , X5 = (c0 \ c1 \ r c2 \ h c2 c1)</span>
<span class="go">0 test  pi c0 \ pi c1 \ sigma c2 \ c2 = c0 , r c3 \ h c3 c2 = X5 c1 c0 , X5 = (c0 \ c1 \ r c2 \ h c2 c1)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ sigma c4 \ c4 = c2 , c1 c3 c2 = r c5 \ h c5 c4 , c1 = (c2 \ c3 \ r c4 \ h c4 c3)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ sigma c4 \ c4 = c2 , r c5 \ h c5 c4 = c1 c3 c2 , c1 = (c2 \ c3 \ r c4 \ h c4 c3)</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test  pi c0 \ clause c1 \ c2 \ c1</span>
<span class="go">0 test</span>
<span class="go"> sigma c0 \ pi c1 \ pi c2 \ , (X6 c2 = r (c0 c2 c1)) (c0 c1 c1 = c1) (c0 c1 c2 = c1) , X6 = (c0 \ r c0)</span>
<span class="go">0 test</span>
<span class="go"> sigma c0 \ pi c1 \ pi c2 \ , (r (c0 c2 c1) = X6 c2) (c0 c1 c1 = c1) (c0 c1 c2 = c1) , X6 = (c0 \ r c0)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   sigma c2 \ pi c3 \ pi c4 \ , (c1 c4 = r (c2 c4 c3)) (c2 c3 c3 = c3) (c2 c3 c4 = c3) , c1 = (c2 \ r c2)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   sigma c2 \ pi c3 \ pi c4 \ , (r (c2 c4 c3) = c1 c4) (c2 c3 c3 = c3) (c2 c3 c4 = c3) , c1 = (c2 \ r c2)</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \ pi c1 \ sigma c2 \ pi c3 \ pi c4 \ , (X7 c1 = r (c2 c4)) (spy (c2 1 = c1)) (not (c2 2 = c0)) ,</span>
<span class="go">  X7 = (c0 \ r whatever)</span>
<span class="go">0 test  X8 c1 = c1</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \ pi c1 \ sigma c2 \ pi c3 \ pi c4 \ , (r (c2 c4) = X7 c1) (spy (c2 1 = c1)) (not (c2 2 = c0)) ,</span>
<span class="go">  X7 = (c0 \ r whatever)</span>
<span class="go">0 test  X9 c1 = c1</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ sigma c4 \ pi c5 \ pi c6 \ , (c1 c3 = r (c4 c6)) (spy (c4 1 = c3)) (not (c4 2 = c2)) ,</span>
<span class="go">    c1 = (c2 \ r whatever)</span>
<span class="go">0 test  X10^1 c2 = c2</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ sigma c4 \ pi c5 \ pi c6 \ , (r (c4 c6) = c1 c3) (spy (c4 1 = c3)) (not (c4 2 = c2)) ,</span>
<span class="go">    c1 = (c2 \ r whatever)</span>
<span class="go">0 test  X11^1 c2 = c2</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \ pi c1 \ sigma c2 \ pi c3 \ X12 c1 c0 = r (c2 c3) , c2 1 = f c0 c1 , X12 = (c0 \ c1 \ r (f c1 c0))</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \ pi c1 \ sigma c2 \ pi c3 \ r (c2 c3) = X12 c1 c0 , c2 1 = f c0 c1 , X12 = (c0 \ c1 \ r (f c1 c0))</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ sigma c4 \ pi c5 \ c1 c3 c2 = r (c4 c5) , c4 1 = f c2 c3 , c1 = (c2 \ c3 \ r (f c3 c2))</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ sigma c4 \ pi c5 \ r (c4 c5) = c1 c3 c2 , c4 1 = f c2 c3 , c1 = (c2 \ c3 \ r (f c3 c2))</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test  pi c0 \ pi c1 \ prune_arg (X13 c1 c0) , X13 = (c0 \ c1 \ r (v c0 c1))</span>
<span class="go">0 test  pi c0 \ pi c1 \ prune_arg (X13 c1 c0) , X13 = (c0 \ c1 \ r (v c0 c1))</span>
<span class="go">0 test  pi c0 \ sigma c1 \ pi c2 \ pi c3 \ prune_arg (c1 c3 c2) , c1 = (c2 \ c3 \ r (v c2 c3))</span>
<span class="go">0 test  pi c0 \ sigma c1 \ pi c2 \ pi c3 \ prune_arg (c1 c3 c2) , c1 = (c2 \ c3 \ r (v c2 c3))</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test  pi c0 \ pi c1 \ prune_arg2 (X14 c1 c0) , X14 = (c0 \ c1 \ r c2 \ v c0 c1)</span>
<span class="go">0 test  pi c0 \ pi c1 \ prune_arg2 (X14 c1 c0) , X14 = (c0 \ c1 \ r c2 \ v c0 c1)</span>
<span class="go">0 test  pi c0 \ sigma c1 \ pi c2 \ pi c3 \ prune_arg2 (c1 c3 c2) , c1 = (c2 \ c3 \ r c4 \ v c2 c3)</span>
<span class="go">0 test  pi c0 \ sigma c1 \ pi c2 \ pi c3 \ prune_arg2 (c1 c3 c2) , c1 = (c2 \ c3 \ r c4 \ v c2 c3)</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test  pi c0 \ pi c1 \ prune_arg3 (X15 c1 c0) , X15 = (c0 \ c1 \ r c2 \ c3 \ v c0 c1)</span>
<span class="go">0 test  pi c0 \ pi c1 \ prune_arg3 (X15 c1 c0) , X15 = (c0 \ c1 \ r c2 \ c3 \ v c0 c1)</span>
<span class="go">0 test  pi c0 \ sigma c1 \ pi c2 \ pi c3 \ prune_arg3 (c1 c3 c2) , c1 = (c2 \ c3 \ r c4 \ c5 \ v c2 c3)</span>
<span class="go">0 test  pi c0 \ sigma c1 \ pi c2 \ pi c3 \ prune_arg3 (c1 c3 c2) , c1 = (c2 \ c3 \ r c4 \ c5 \ v c2 c3)</span>
<span class="go">----------------------------------------</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.122</span>

<span class="go">Success:</span>

<span class="go">Time: 0.002</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/llamchr.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span>mode (term i o).

term (app X Y) B :- term X (arr A B), term Y A.
term (lam A F) (arr A B) :- pi x\ term x A =&gt; term (F x) B.
term (uvar as X) A :- declare_constraint (term X A) [X].
term true bool.
term false bool.
term zero nat.
term succ (arr nat nat).

constraint term {
  rule (GX ?- term (uvar K LX) TX)
     \ (GY ?- term (uvar K LY) TY)
     | (compatible GX LX GY LY CTXCONSTR)
   &lt;=&gt; [ TX = TY , CTXCONSTR ].
}

% resilient to dummy ctx variables
both_or_none P Q :- P, !, Q.
both_or_none P Q :- not P, not Q.

compatible _ [] _ [] [] :- !.
compatible GX [X|XS] GY [Y|YS] [TX = TY | K] :-
 both_or_none (GX =&gt; term X TX) (GY =&gt; term Y TY),
 !,
 compatible GX XS GY YS K.
compatible _ _ _ _ [false].

spy P :- print &quot;[&quot; P, P, print &quot;]ok&quot;, !.
spy P :- print &quot;]fail&quot;, fail.

mode (watch i).
watch (uvar as X) :- declare_constraint (print &quot;watch&quot; X) [X], !.
watch X :- print &quot;watch&quot; X.

main :- 
  % this is tricky becasuse X sees w, so CHR has to deal with a dirty context
  pi w\ (sigma X A B C A&#39; B&#39; T1 T2 \ pi v\
    term b2n (arr bool nat) =&gt;
      (T1 = (lam _ x \ lam _ y\ X x y),
       T2 = (lam _ x \ lam _ y\ X y x),
       term T1 (arr A (arr B nat)),
       term T2 (arr A&#39; (arr B&#39; C)),
       print A A&#39; B B&#39; C &quot;|&quot; T1 &quot;|&quot; T2,
       spy (X = x\y\ x),
       print A A&#39; B B&#39; C &quot;|&quot; T1 &quot;|&quot; T2,
       spy (term (app T2 false) _),
       print A A&#39; B B&#39; C &quot;|&quot; T1 &quot;|&quot; T2)),
  true.

% vim: set ft=lprolog:
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llamchr.elpi&quot;, line 8, column 0, character 216:</span>
<span class="go"> Warning: constant zero has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llamchr.elpi&quot;, line 33, column 0, character 798:</span>
<span class="go"> Warning: constant watch has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llamchr.elpi&quot;, line 3, column 0, character 18:</span>
<span class="go"> Warning: constant term has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llamchr.elpi&quot;, line 9, column 0, character 231:</span>
<span class="go"> Warning: constant succ has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llamchr.elpi&quot;, line 29, column 0, character 710:</span>
<span class="go"> Warning: constant spy has no declared type. Did you mean std.spy std.spy! std.spy-do! ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llamchr.elpi&quot;, line 8, column 0, character 216:</span>
<span class="go"> Warning: constant nat has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llamchr.elpi&quot;, line 4, column 0, character 66:</span>
<span class="go"> Warning: constant lam has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llamchr.elpi&quot;, line 22, column 0, character 521:</span>
<span class="go"> Warning: constant compatible has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llamchr.elpi&quot;, line 19, column 0, character 457:</span>
<span class="go"> Warning: constant both_or_none has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llamchr.elpi&quot;, line 36, column 0, character 893:</span>
<span class="go"> Warning: constant b2n has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llamchr.elpi&quot;, line 3, column 0, character 18:</span>
<span class="go"> Warning: [suppressing 2 warnings]</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/llamchr.elpi&quot;, line 30, column 0, character 751:</span>
<span class="go"> Warning: P is linear: name it _P (discard) or P_ (fresh variable)</span>
<span class="go">X0 X1 X1 X0 nat | lam X0 c2 \ lam X1 c3 \ X2 c0 c2 c3 | lam X1 c2 \ lam X0 c3 \ X2 c0 c3 c2</span>
<span class="go">[ (c2 \ c3 \ X2 c0 c2 c3) = (c2 \ c3 \ c2)</span>
<span class="go">]ok</span>
<span class="go">nat X1 X1 nat nat | lam nat c2 \ lam X1 c3 \ c2 | lam X1 c2 \ lam nat c3 \ c3</span>
<span class="go">[ term (app (lam X1 c2 \ lam nat c3 \ c3) false) _</span>
<span class="go">]ok</span>
<span class="go">nat bool bool nat nat | lam nat c2 \ lam bool c3 \ c2 | lam bool c2 \ lam nat c3 \ c3</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.003</span>

<span class="go">Typechecking time: 0.135</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/map.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">pred</span><span class="w"> </span><span class="nf">build</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">std.map</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">std.map</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int</span>.<span class="w"></span>
build<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
build<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>std.map.add<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XR</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>build<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">XR</span><span class="w"> </span><span class="nv">X1</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">test</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.<span class="w"></span>
test<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
test<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>std.assert!<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;not found&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>test<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">test2</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.<span class="w"></span>
test2<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
test2<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>std.assert!<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;not found&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>test2<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X1</span><span class="o">.</span><span class="w"></span>

macro<span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="mi">4096</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>std.time<span class="w"> </span>(build<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>{std.map.make<span class="w"> </span>cmp_term} <span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time0</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w">  </span>std.time<span class="w"> </span>(test<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>std.map.find<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time1</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w">  </span>std.map.bindings<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>std.assert!<span class="w"> </span>({std.length<span class="w"> </span><span class="nv">B</span>} <span class="kd">=</span><span class="w"> </span><span class="kd">@</span>iters<span class="kd">,</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span>pr<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="kd">|</span><span class="nv">_</span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;bindings broken&quot;</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w">  </span>std.time<span class="w"> </span>(test2<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>std.map.remove<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time2</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="nv">Time0</span><span class="w"> </span><span class="s2">&quot;+&quot;</span><span class="w"> </span><span class="nv">Time1</span><span class="w"> </span><span class="s2">&quot;+&quot;</span><span class="w"> </span><span class="nv">Time2</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1.442109 + 0.056953 + 0.879852</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.086</span>

<span class="go">Success:</span>

<span class="go">Time: 2.580</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/map_list.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">kind</span><span class="w"> </span><span class="nf">l</span><span class="w"> </span><span class="kt">type</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">n</span><span class="w"> </span><span class="kt">l</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">c</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">l</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">l</span>.<span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">add</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">l</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">l</span>.<span class="w"></span>
add<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span>n<span class="w"> </span>(c<span class="w"> </span><span class="o">(</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="o">)</span><span class="w"> </span>n<span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
add<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span>(c<span class="w"> </span><span class="o">(</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span>(c<span class="w"> </span><span class="o">(</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
add<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span>(c<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span>(c<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>add<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">bindings</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">l</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>.<span class="w"></span>
bindings<span class="w"> </span>n<span class="w"> </span><span class="kd">[]</span><span class="o">.</span><span class="w"></span>
bindings<span class="w"> </span>(c<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">L1</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>bindings<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">assoc</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">l</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>.<span class="w"></span>
assoc<span class="w"> </span><span class="nv">K</span><span class="w"> </span>(c<span class="w"> </span><span class="o">(</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="o">)</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
assoc<span class="w"> </span><span class="nv">K</span><span class="w"> </span>(c<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>assoc<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">remove</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">l</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">l</span>.<span class="w"></span>
remove<span class="w"> </span><span class="nv">K</span><span class="w"> </span>(c<span class="w"> </span><span class="o">(</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
remove<span class="w"> </span><span class="nv">K</span><span class="w"> </span>(c<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span>(c<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>remove<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">build</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">l</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">l</span>.<span class="w"></span>
build<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
build<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>add<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XR</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>build<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">XR</span><span class="w"> </span><span class="nv">X1</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">test</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.<span class="w"></span>
test<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
test<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>std.assert!<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;not found&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>test<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">test2</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.<span class="w"></span>
test2<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
test2<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>std.assert!<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;not found&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>test2<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X1</span><span class="o">.</span><span class="w"></span>

macro<span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="mi">4096</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>std.time<span class="w"> </span>(build<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>n<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time0</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w">  </span>std.time<span class="w"> </span>(test<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>assoc<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time1</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w">  </span>bindings<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>std.assert!<span class="w"> </span>({std.length<span class="w"> </span><span class="nv">B</span>} <span class="kd">=</span><span class="w"> </span><span class="kd">@</span>iters<span class="kd">,</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span>pr<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="kd">|</span><span class="nv">_</span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;bindings broken&quot;</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w">  </span>std.time<span class="w"> </span>(test2<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>remove<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time2</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="nv">Time0</span><span class="w"> </span><span class="s2">&quot;+&quot;</span><span class="w"> </span><span class="nv">Time1</span><span class="w"> </span><span class="s2">&quot;+&quot;</span><span class="w"> </span><span class="nv">Time2</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">5.807471 + 2.439019 + 0.247891</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.003</span>

<span class="go">Typechecking time: 0.080</span>

<span class="go">Success:</span>

<span class="go">Time: 8.500</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/map_list_opt.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">pred</span><span class="w"> </span><span class="nf">add</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>.<span class="w"></span>
add<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
add<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">[</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">_</span><span class="kd">|</span><span class="w"> </span><span class="nv">L</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="kd">|</span><span class="w"> </span><span class="nv">L</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
add<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="w"> </span><span class="nv">L</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="w"> </span><span class="nv">L1</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>add<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">bindings</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>.<span class="w"></span>
bindings<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">assoc</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>.<span class="w"></span>
assoc<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="kd">[</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="kd">|</span><span class="w"> </span><span class="nv">_</span><span class="kd">]</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
assoc<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">|</span><span class="w"> </span><span class="nv">L</span><span class="kd">]</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>assoc<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">remove</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>.<span class="w"></span>
remove<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="kd">[</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">_</span><span class="kd">|</span><span class="w"> </span><span class="nv">L</span><span class="kd">]</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
remove<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="w"> </span><span class="nv">L</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="w"> </span><span class="nv">L1</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>remove<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">build</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>.<span class="w"></span>
build<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
build<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>add<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XR</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>build<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">XR</span><span class="w"> </span><span class="nv">X1</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">test</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.<span class="w"></span>
test<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
test<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>std.assert!<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;not found&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>test<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">test2</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.<span class="w"></span>
test2<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
test2<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>std.assert!<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;not found&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>test2<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X1</span><span class="o">.</span><span class="w"></span>

macro<span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="mi">4096</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>std.time<span class="w"> </span>(build<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time0</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w">  </span>std.time<span class="w"> </span>(test<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>assoc<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time1</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w">  </span>bindings<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>std.assert!<span class="w"> </span>({std.length<span class="w"> </span><span class="nv">B</span>} <span class="kd">=</span><span class="w"> </span><span class="kd">@</span>iters<span class="kd">,</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span>pr<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="kd">|</span><span class="nv">_</span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;bindings broken&quot;</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w">  </span>std.time<span class="w"> </span>(test2<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>remove<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time2</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="nv">Time0</span><span class="w"> </span><span class="s2">&quot;+&quot;</span><span class="w"> </span><span class="nv">Time1</span><span class="w"> </span><span class="s2">&quot;+&quot;</span><span class="w"> </span><span class="nv">Time2</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">4.876869 + 2.744173 + 0.234223</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.073</span>

<span class="go">Success:</span>

<span class="go">Time: 7.861</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/name_builtin.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">f x y</span>\<span class="w"></span>
<span class="w">    </span>name<span class="w"> </span><span class="o">(</span>f<span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="w"> </span>f<span class="w"> </span><span class="kd">[</span>x<span class="kd">,</span><span class="w"> </span>y<span class="kd">]</span><span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>name<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">[]</span><span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">f x y</span>\<span class="w"></span>
<span class="w">    </span>name<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span>f<span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="w"> </span>f<span class="w"> </span><span class="kd">[</span>x<span class="kd">,</span>y<span class="kd">],</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;A=&quot;</span><span class="w"> </span><span class="nv">A</span><span class="kd">,</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span>f<span class="w"> </span>x<span class="w"> </span>y<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="o">(</span>f<span class="w"> </span>x<span class="w"> </span>y<span class="o">))</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>name<span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>x<span class="w"> </span><span class="kd">[],</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;B=&quot;</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span>x<span class="w"> </span><span class="kd">=</span><span class="w"> </span>x<span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/name_builtin.elpi&quot;, line 1, column 0, character 0: Error:</span>
<span class="go"> (c2) has type any but is applied to c3 c4</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.087</span>
<span class="go">Type error. To ignore it, pass -no-tc.</span>
</pre></div>
</div>
<p><strong>../../tests/sources/named_clauses00.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><span class="k k-Mode">:name</span><span class="w"> </span><span class="s2">&quot;name1&quot;</span><span class="w"></span>
c1<span class="o">.</span><span class="w"></span>

<span class="k k-Mode">:name</span><span class="w"> </span><span class="s2">&quot;name1&quot;</span><span class="w"></span>
c2<span class="o">.</span><span class="w"></span>

main<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Fatal error: File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/named_clauses00.elpi&quot;, line 4, column 0, character 19:a clause named name1 already exists at File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/named_clauses00.elpi&quot;, line 1, column 0, character 0:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/named_clauses01.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><span class="k k-Mode">:before</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="w"></span>
c1<span class="w"> </span>

main<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Fatal error: File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/named_clauses01.elpi&quot;, line 2, column 0, character 1:unable to graft this clause: no clause named c</span>
</pre></div>
</div>
<p><strong>../../tests/sources/named_clauses02.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><span class="k k-Mode">:name</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="w"></span>
c<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>fail<span class="o">.</span><span class="w"></span>

<span class="k k-Mode">:before</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="w"></span>
c<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>true<span class="o">.</span><span class="w"></span>

<span class="k k-Mode">:before</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="w"></span>
c<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>fail<span class="kd">,</span><span class="w"> </span>fail<span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>c<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/named_clauses02.elpi&quot;, line 5, column 0, character 26: Warning:</span>
<span class="go"> constant c has no declared type. Did you mean std.set.private.create std.set.private.cardinal std.set.cardinal std.map.private.create std.string.concat std.string.set.cardinal std.int.set.cardinal std.loc.set.cardinal trace.counter gc.compact ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.089</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/namespaces00.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">namespace</span><span class="w"> </span>rev<span class="w"> </span>{
<span class="w">  </span><span class="kd">pred</span><span class="w"> </span><span class="nf">aux</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>.<span class="w"></span>
<span class="w">  </span>aux<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">ACC</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>aux<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">ACC</span><span class="kd">]</span><span class="w"> </span><span class="nv">R</span><span class="o">.</span><span class="w"></span>
<span class="w">  </span>aux<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L</span><span class="o">.</span><span class="w"></span>
}
<span class="kd">pred</span><span class="w"> </span><span class="nf">rev</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>.<span class="w"></span>
rev<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">RL</span><span class="w">  </span><span class="kd">:-</span><span class="w"> </span>rev.aux<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">[]</span><span class="w">  </span><span class="nv">RL</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>rev<span class="w"> </span><span class="kd">[</span><span class="mi">1</span><span class="kd">,</span><span class="mi">2</span><span class="kd">,</span><span class="mi">3</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span><span class="mi">3</span><span class="kd">,</span><span class="mi">2</span><span class="kd">,</span><span class="mi">1</span><span class="kd">],</span><span class="w"> </span>not(aux<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>rev.aux<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/namespaces00.elpi&quot;, line 9, column 0, character 174: Warning:</span>
<span class="go"> constant aux has no declared type. Did you mean rev.aux ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.093</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/namespaces01.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span>toto<span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w"></span>

<span class="c">% We test toto is not put inside the namespace</span>
<span class="kd">namespace</span><span class="w"> </span>foo<span class="w"> </span>{
<span class="w">  </span>bar<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>toto<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>baz<span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>
<span class="w">  </span>baz<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>toto<span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>
}
main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>foo.bar<span class="w"> </span><span class="mi">2</span><span class="kd">,</span><span class="w"> </span>foo.baz<span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/namespaces01.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant toto has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/namespaces01.elpi&quot;, line 5, column 3, character 75: Warning:</span>
<span class="go"> constant foo.baz has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/namespaces01.elpi&quot;, line 5, column 3, character 75: Warning:</span>
<span class="go"> constant foo.bar has no declared type.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.090</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/namespaces02.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">namespace</span><span class="w"> </span>x<span class="w"> </span>{
<span class="w">  </span><span class="kd">namespace</span><span class="w"> </span>acc<span class="w"> </span>{ <span class="kd">accumulate</span><span class="w"> </span>namespaces00<span class="o">.</span><span class="w"> </span>}
<span class="w">  </span>foo<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>rev.aux<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span><span class="w"> </span><span class="c">% does not exists, since it is inside acc</span>
}

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>x.acc.rev<span class="w"> </span><span class="kd">[</span><span class="mi">1</span><span class="kd">,</span><span class="mi">2</span><span class="kd">,</span><span class="mi">3</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span><span class="mi">3</span><span class="kd">,</span><span class="mi">2</span><span class="kd">,</span><span class="mi">1</span><span class="kd">],</span><span class="w"> </span>x.acc.rev.aux<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[],</span><span class="w"> </span>not(x.foo<span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/namespaces02.elpi&quot;, line 3, column 3, character 62: Warning:</span>
<span class="go"> constant x.foo has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/namespaces00.elpi&quot;, line 9, column 0, character 174: Warning:</span>
<span class="go"> constant x.acc.main has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/namespaces00.elpi&quot;, line 9, column 0, character 174: Warning:</span>
<span class="go"> constant aux has no declared type. Did you mean x.acc.rev.aux ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.087</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/namespaces03.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">namespace</span><span class="w"> </span>a<span class="w"> </span>{

<span class="w">  </span>foo1<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>b.c.foo<span class="o">.</span><span class="w"></span>
<span class="w">  </span>foo2<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>b.foo1<span class="kd">,</span><span class="w"> </span>b.foo2<span class="o">.</span><span class="w"></span>

<span class="w">  </span><span class="kd">namespace</span><span class="w"> </span>b<span class="w"> </span>{

<span class="w">    </span>foo1<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>c.foo<span class="o">.</span><span class="w"></span>

<span class="w">    </span><span class="kd">namespace</span><span class="w"> </span>c<span class="w"> </span>{
<span class="w"> </span>
<span class="w">      </span>foo<span class="o">.</span><span class="w"></span>
<span class="w">   </span>
<span class="w">    </span>}

<span class="w">    </span>foo2<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>c.foo<span class="o">.</span><span class="w"></span>

<span class="w">  </span>}

<span class="w">  </span>foo3<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>b.c.foo<span class="o">.</span><span class="w"></span>
<span class="w">  </span>foo4<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>b.foo1<span class="kd">,</span><span class="w"> </span>b.foo2<span class="o">.</span><span class="w"></span>

}

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>a.foo1<span class="kd">,</span><span class="w"> </span>a.foo2<span class="kd">,</span><span class="w"> </span>a.foo3<span class="kd">,</span><span class="w"> </span>a.foo4<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/namespaces03.elpi&quot;, line 21, column 3, character 187: Warning:</span>
<span class="go"> constant a.foo4 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/namespaces03.elpi&quot;, line 20, column 3, character 168: Warning:</span>
<span class="go"> constant a.foo3 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/namespaces03.elpi&quot;, line 4, column 3, character 37: Warning:</span>
<span class="go"> constant a.foo2 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/namespaces03.elpi&quot;, line 3, column 3, character 18: Warning:</span>
<span class="go"> constant a.foo1 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/namespaces03.elpi&quot;, line 4, column 3, character 37: Warning:</span>
<span class="go"> constant a.b.foo2 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/namespaces03.elpi&quot;, line 4, column 3, character 37: Warning:</span>
<span class="go"> constant a.b.foo1 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/namespaces03.elpi&quot;, line 3, column 3, character 18: Warning:</span>
<span class="go"> constant a.b.c.foo has no declared type.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.003</span>

<span class="go">Typechecking time: 0.119</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/nil_cons.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>nil<span class="kd">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>cons<span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.075</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/notation.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span>module<span class="w"> </span>test<span class="o">.</span><span class="w"></span>
<span class="c">/*</span>
infixl<span class="w"> </span>x+<span class="kd">,</span>y+<span class="w"> </span><span class="mi">190</span><span class="o">.</span><span class="w"></span>
infixr<span class="w"> </span>x++<span class="w"> </span><span class="mi">191</span><span class="o">.</span><span class="w"></span>
prefixr<span class="w"> </span>z+<span class="w"> </span><span class="mi">191</span><span class="o">.</span><span class="w"></span>
postfixl<span class="w"> </span>w+<span class="w"> </span><span class="mi">190</span><span class="o">.</span><span class="w"></span>
infixl<span class="w"> </span>x*<span class="w"> </span><span class="mi">200</span><span class="o">.</span><span class="w"></span>
<span class="kd">*/</span><span class="w"></span>
<span class="nv">X</span><span class="w"> </span><span class="kd">+</span>x<span class="w"> </span><span class="nv">D</span><span class="o">.</span><span class="w"></span>

foo<span class="w"> </span>xx<span class="w"> </span>uu<span class="o">.</span><span class="w"></span>

<span class="kd">~</span>z<span class="w"> </span>x<span class="w"> </span>?w<span class="o">.</span><span class="w"></span>

x<span class="w"> </span><span class="kd">*</span>x<span class="w"> </span>y<span class="w"> </span><span class="kd">+</span>x<span class="w"> </span>z<span class="w"> </span><span class="kd">*</span>x<span class="w"> </span>w<span class="o">.</span><span class="w"></span>

a<span class="w"> </span><span class="kd">+</span>x<span class="w"> </span>b<span class="w"> </span><span class="kd">+</span>x<span class="w"> </span>c<span class="w"> </span><span class="kd">+</span>x<span class="w"> </span>d<span class="w"> </span><span class="kd">+</span>x<span class="w"> </span>e<span class="o">.</span><span class="w"></span>
a<span class="w"> </span><span class="kd">++</span>x<span class="w"> </span>b<span class="w"> </span><span class="kd">++</span>x<span class="w"> </span>c<span class="w"> </span><span class="kd">++</span>x<span class="w"> </span>d<span class="w"> </span><span class="kd">++</span>x<span class="w"> </span>e<span class="o">.</span><span class="w"></span>

<span class="kd">type</span><span class="w"> </span><span class="nf">a</span><span class="w"> </span><span class="kt">A</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">d</span><span class="w"> </span><span class="kt">A</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">(+x)</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">C</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">(+y)</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">C</span>.<span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span>(a<span class="w"> </span>a<span class="w"> </span><span class="kd">+</span>x<span class="w"> </span><span class="kd">[</span>b<span class="kd">]</span><span class="w"> </span><span class="kd">+</span>y<span class="w"> </span>d<span class="o">)</span><span class="kd">,</span><span class="w"> </span>cd<span class="w"> </span><span class="kd">+</span>x<span class="w"> </span>d<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/notation.elpi&quot;, line 13, column 0, character 122: Warning:</span>
<span class="go"> constant ~z has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/notation.elpi&quot;, line 15, column 0, character 132: Warning:</span>
<span class="go"> constant z has no declared type. Did you mean std.zip ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/notation.elpi&quot;, line 15, column 0, character 132: Warning:</span>
<span class="go"> constant y has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/notation.elpi&quot;, line 11, column 0, character 110: Warning:</span>
<span class="go"> constant xx has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/notation.elpi&quot;, line 13, column 0, character 122: Warning:</span>
<span class="go"> constant x has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/notation.elpi&quot;, line 15, column 0, character 132: Warning:</span>
<span class="go"> constant w has no declared type. Did you mean std.while-ok-do! ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/notation.elpi&quot;, line 11, column 0, character 110: Warning:</span>
<span class="go"> constant uu has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/notation.elpi&quot;, line 11, column 0, character 110: Warning:</span>
<span class="go"> constant foo has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/notation.elpi&quot;, line 17, column 0, character 151: Warning:</span>
<span class="go"> constant e has no declared type. Did you mean std.set.private.empty std.set.private.elements std.set.elements std.map.private.empty std.exists std.exists2 std.string.map.empty std.int.map.empty std.loc.map.empty std.string.set.empty std.string.set.equal std.string.set.elements std.int.set.empty std.int.set.equal std.int.set.elements std.loc.set.empty std.loc.set.equal std.loc.set.elements ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/notation.elpi&quot;, line 25, column 0, character 269: Warning:</span>
<span class="go"> constant cd has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/notation.elpi&quot;, line 17, column 0, character 151: Warning:</span>
<span class="go"> [suppressing 5 warnings]</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/notation.elpi&quot;, line 9, column 0, character 101: Warning:</span>
<span class="go"> D is linear: name it _D (discard) or D_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/notation.elpi&quot;, line 9, column 0, character 101: Warning:</span>
<span class="go"> X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">a a +x [b] +y d</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.113</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/notation_error.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span>infix<span class="w"> </span>foo<span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/notation_error.elpi&quot;, line 1, column 0, character 0:</span>
<span class="go">Mixfix directives are not supported by this parser.</span>

<span class="go">The parser is based on token families.</span>
<span class="go">A family is identified by some starting characters, for example</span>
<span class="go">a token &#39;+--&gt;&#39; belongs to the family of &#39;+&#39;. There is no need</span>
<span class="go">to declare it.</span>

<span class="go">All the tokens of a family are parsed with the same precedence and</span>
<span class="go">associativity, for example &#39;x +--&gt; y *--&gt; z&#39; is parsed as</span>
<span class="go">&#39;x +--&gt; (y *--&gt; z)&#39; since the family of &#39;*&#39; has higher precedence</span>
<span class="go">than the family of &#39;+&#39;.</span>

<span class="go">Here the table of tokens and token families.</span>
<span class="go">Token families are represented by the start symbols followed by &#39;..&#39;.</span>
<span class="go">Tokens of families marked with [*] cannot end with the starting symbol,</span>
<span class="go">eg `foo` is not an infix, while `foo is.</span>
<span class="go">The listing is ordered by increasing precedence.</span>

<span class="go">fixity                     | tokens / token families</span>
<span class="go">-------------------------- + -----------------------------------</span>
<span class="go">Infix   not   associative  | :-  ?-</span>
<span class="go">Infix   right associative  | ;</span>
<span class="go">Infix   right associative  | ,  &amp;</span>
<span class="go">Infix   right associative  | -&gt;</span>
<span class="go">Infix   right associative  | =&gt;</span>
<span class="go">Infix   not   associative  | =  ==  =&lt;  r&lt;  i&lt;  s&lt;  r=&lt;  i=&lt;  s=&lt;</span>
<span class="go">                             &lt;..  r&gt;  i&gt;  s&gt;  r&gt;=  i&gt;=  s&gt;=  &gt;..</span>
<span class="go">                             is</span>
<span class="go">Infix   right associative  | ::</span>
<span class="go">Infix   not   associative  | &#39;.. [*]</span>
<span class="go">Infix   left  associative  | ^..  r+  i+  s+  +..  -  r-  i-  s-</span>
<span class="go">Infix   left  associative  | r*  i*  s*  *..  /  div  mod</span>
<span class="go">Infix   right associative  | --..</span>
<span class="go">Infix   not   associative  | `.. [*]</span>
<span class="go">Infix   right associative  | ==..</span>
<span class="go">Infix   right associative  | ||..</span>
<span class="go">Infix   right associative  | &amp;&amp;..</span>
<span class="go">Infix   left  associative  | #..</span>
<span class="go">Prefix  not   associative  | r~  i~  ~..</span>
<span class="go">Postfix not   associative  | ?..</span>

<span class="go">If the token is a valid mixfix, and you want the file to stay compatible</span>
<span class="go">with Teyjus, you can ask Elpi to skip the directive. Eg:</span>

<span class="gp">% </span>elpi:skip <span class="m">2</span>  // skips the next two lines
<span class="go">infixr ==&gt; 120.</span>
<span class="go">infixr || 120.</span>

<span class="go">As a debugging facility one can ask Elpi to print the AST in order to</span>
<span class="go">verify how the text was parsed. Eg:</span>

<span class="go">echo &#39;MyFormula = a || b ==&gt; c &amp;&amp; d&#39; | elpi -parse-term</span>
</pre></div>
</div>
<p><strong>../../tests/sources/notation_legacy.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span>module<span class="w"> </span>test<span class="o">.</span><span class="w"></span>

infixl<span class="w"> </span>x+<span class="kd">,</span>y+<span class="w"> </span><span class="mi">190</span><span class="o">.</span><span class="w"></span>
infixr<span class="w"> </span>x++<span class="w"> </span><span class="mi">191</span><span class="o">.</span><span class="w"></span>
prefixr<span class="w"> </span>z+<span class="w"> </span><span class="mi">191</span><span class="o">.</span><span class="w"></span>
postfixl<span class="w"> </span>w+<span class="w"> </span><span class="mi">190</span><span class="o">.</span><span class="w"></span>
infixl<span class="w"> </span>x*<span class="w"> </span><span class="mi">200</span><span class="o">.</span><span class="w"></span>

<span class="nv">X</span><span class="w"> </span>x+<span class="w"> </span><span class="nv">D</span><span class="o">.</span><span class="w"></span>

foo<span class="w"> </span>xx<span class="w"> </span>uu<span class="o">.</span><span class="w"></span>

z+<span class="w"> </span>x<span class="w"> </span>w+<span class="o">.</span><span class="w"></span>

x<span class="w"> </span>x*<span class="w"> </span>y<span class="w"> </span>x+<span class="w"> </span>z<span class="w"> </span>x*<span class="w"> </span>w<span class="o">.</span><span class="w"></span>

a<span class="w"> </span>x+<span class="w"> </span>b<span class="w"> </span>x+<span class="w"> </span>c<span class="w"> </span>x+<span class="w"> </span>d<span class="w"> </span>x+<span class="w"> </span>e<span class="o">.</span><span class="w"></span>
a<span class="w"> </span>x++<span class="w"> </span>b<span class="w"> </span>x++<span class="w"> </span>c<span class="w"> </span>x++<span class="w"> </span>d<span class="w"> </span>x++<span class="w"> </span>e<span class="o">.</span><span class="w"></span>

<span class="kd">type</span><span class="w"> </span><span class="nf">a</span><span class="w"> </span><span class="kt">A</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">d</span><span class="w"> </span><span class="kt">A</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">(x+)</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">C</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">(y+)</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">C</span>.<span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span>(a<span class="w"> </span>a<span class="w"> </span>x+<span class="w"> </span><span class="kd">[</span>b<span class="kd">]</span><span class="w"> </span>y+<span class="w"> </span>d<span class="o">)</span><span class="kd">,</span><span class="w"> </span>cd<span class="w"> </span>x+<span class="w"> </span>d<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/notation_legacy.elpi&quot;, line 3, column 10, character 24:</span>
<span class="go">Mixfix declaration expected (Teyjus compatibility, ignored by Elpi).</span>
<span class="go">Examples:</span>
<span class="go">infixl and 30.</span>
<span class="go">infixr ++ 45.</span>
<span class="go">prefix - 12.</span>
</pre></div>
</div>
<p><strong>../../tests/sources/patternunif.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% q Y should yield Y = \\\f 2</span>
q<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">b</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">c</span>\<span class="w"> </span>(r<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">a</span>\<span class="w"> </span>s<span class="w"> </span><span class="o">(</span>f<span class="w"> </span>a<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>s<span class="w"> </span><span class="o">(</span><span class="nv">X</span><span class="w"> </span>b<span class="w"> </span>c<span class="w"> </span>a<span class="o">))</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>r<span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">x\y\z\</span>f<span class="w"> </span>z<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/patternunif.elpi&quot;, line 2, column 0, character 30: Warning:</span>
<span class="go"> constant s has no declared type. Did you mean std.set.private.set std.set.private.empty std.set.private.node std.set.private.height std.set.private.create std.set.private.bal std.set.private.add std.set.private.mem std.set.private.remove-min-binding std.set.private.min-binding std.set.private.merge std.set.private.remove std.set.private.cardinal std.set.private.elements std.set.make std.set.mem std.set.add std.set.remove std.set.cardinal std.set.elements std.spy std.spy! std.split-at std.spy-do! rex.split random.self_init std.string.concat std.string.map std.string.map.empty std.string.map.mem std.string.map.add std.string.map.remove std.string.map.find std.string.map.bindings std.string.set std.string.set.empty std.string.set.mem std.string.set.add std.string.set.remove std.string.set.union std.string.set.inter std.string.set.diff std.string.set.equal std.string.set.subset std.string.set.elements std.string.set.cardinal std.int.set std.int.set.empty std.int.set.mem std.int.set.add std.int.set.remove std.int.set.union std.int.set.inter std.int.set.diff std.int.set.equal std.int.set.subset std.int.set.elements std.int.set.cardinal std.loc.set std.loc.set.empty std.loc.set.mem std.loc.set.add std.loc.set.remove std.loc.set.union std.loc.set.inter std.loc.set.diff std.loc.set.equal std.loc.set.subset std.loc.set.elements std.loc.set.cardinal std.set std.set gc.set gc.stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/patternunif.elpi&quot;, line 2, column 0, character 30: Warning:</span>
<span class="go"> constant r has no declared type. Did you mean std.set.private.remove-min-binding std.set.private.remove std.set.remove std.map.private.remove-min-binding std.map.private.remove std.map.remove std.rev rex.replace std.string.map.remove std.int.map.remove std.loc.map.remove std.string.set.remove std.int.set.remove std.loc.set.remove ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/patternunif.elpi&quot;, line 2, column 0, character 30: Warning:</span>
<span class="go"> constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/patternunif.elpi&quot;, line 2, column 0, character 30: Warning:</span>
<span class="go"> constant f has no declared type. Did you mean std.map.private.find std.map.find std.fatal-error std.fatal-error-w-data std.fold std.fold2 std.fold-map std.forall std.forall-ok std.forall2 std.filter std.flatten std.flip std.findall loc.fields std.string.map.find std.int.map.find std.loc.map.find gc.full ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.003</span>

<span class="go">Typechecking time: 0.096</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/patternunif2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% r Y yields Y=\0</span>
q<span class="w"> </span>(<span class="nv">a\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>a<span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>
r<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">c</span>\<span class="w"> </span>q<span class="w"> </span>(<span class="nv">a\</span>a<span class="o">)</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>r<span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">x\</span>x<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/patternunif2.elpi&quot;, line 3, column 0, character 32: Warning:</span>
<span class="go"> constant r has no declared type. Did you mean std.set.private.remove-min-binding std.set.private.remove std.set.remove std.map.private.remove-min-binding std.map.private.remove std.map.remove std.rev rex.replace std.string.map.remove std.int.map.remove std.loc.map.remove std.string.set.remove std.int.set.remove std.loc.set.remove ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/patternunif2.elpi&quot;, line 2, column 0, character 18: Warning:</span>
<span class="go"> constant q has no declared type. Did you mean gc.quick-stat ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.082</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/pi.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% q X yields X=ok</span>

q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>p<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span>r<span class="w"> </span>y<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>z<span class="w"> </span>x<span class="w"> </span>y<span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

z<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span>ko<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>r<span class="w"> </span><span class="nv">A</span><span class="kd">,</span><span class="w"> </span>p<span class="w"> </span><span class="nv">B</span><span class="o">.</span><span class="w"></span>
z<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span>ok<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>p<span class="w"> </span><span class="nv">A</span><span class="kd">,</span><span class="w"> </span>r<span class="w"> </span><span class="nv">B</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pi.elpi&quot;, line 3, column 0, character 19: Warning:</span>
<span class="go"> constant z has no declared type. Did you mean std.zip ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pi.elpi&quot;, line 3, column 0, character 19: Warning:</span>
<span class="go"> constant r has no declared type. Did you mean std.set.private.remove-min-binding std.set.private.remove std.set.remove std.map.private.remove-min-binding std.map.private.remove std.map.remove std.rev rex.replace std.string.map.remove std.int.map.remove std.loc.map.remove std.string.set.remove std.int.set.remove std.loc.set.remove ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pi.elpi&quot;, line 3, column 0, character 19: Warning:</span>
<span class="go"> constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pi.elpi&quot;, line 3, column 0, character 19: Warning:</span>
<span class="go"> constant p has no declared type. Did you mean std.set.private.set std.set.private.empty std.set.private.node std.set.private.height std.set.private.create std.set.private.bal std.set.private.add std.set.private.mem std.set.private.remove-min-binding std.set.private.min-binding std.set.private.merge std.set.private.remove std.set.private.cardinal std.set.private.elements std.map.private.map std.map.private.empty std.map.private.node std.map.private.height std.map.private.create std.map.private.bal std.map.private.add std.map.private.find std.map.private.remove-min-binding std.map.private.min-binding std.map.private.merge std.map.private.remove std.map.private.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pi.elpi&quot;, line 5, column 0, character 62: Warning:</span>
<span class="go"> constant ko has no declared type.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.093</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/pi3.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% q X yields X=\0, i.e. X=b\b</span>

q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span>z<span class="w"> </span>(<span class="nv">w\</span><span class="w"> </span><span class="nv">X</span><span class="o">).</span><span class="w"></span>

z<span class="w"> </span>(<span class="nv">a\</span><span class="w"> </span>a<span class="o">).</span><span class="w"></span>
z<span class="w"> </span>(<span class="nv">a\</span><span class="w"> </span><span class="nv">b\</span><span class="w"> </span>b<span class="o">).</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">b\</span>b<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pi3.elpi&quot;, line 3, column 0, character 31: Warning:</span>
<span class="go"> constant z has no declared type. Did you mean std.zip ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pi3.elpi&quot;, line 3, column 0, character 31: Warning:</span>
<span class="go"> constant q has no declared type. Did you mean gc.quick-stat ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.081</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/pi5.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% q X, r X, s X all yields X=ok</span>

of<span class="w"> </span>stop<span class="o">.</span><span class="w"></span>
of<span class="w"> </span>(bam<span class="w"> </span><span class="nv">x\</span>x<span class="o">).</span><span class="w"></span>
of<span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\F</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">w</span>\<span class="w"> </span>of<span class="w"> </span><span class="nv">F</span><span class="o">.</span><span class="w"></span>

q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>of<span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>bam<span class="w"> </span><span class="nv">y\</span><span class="w"> </span>y<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span><span class="w"></span>
r<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>of<span class="w"> </span>(bam<span class="w"> </span><span class="nv">y\</span><span class="w"> </span>y<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span><span class="w"></span>
s<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>of<span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">y\</span><span class="w"> </span>stop<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>r<span class="w"> </span><span class="nv">S</span><span class="kd">,</span><span class="w"> </span>s<span class="w"> </span><span class="nv">T</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="kd">,</span><span class="w"> </span><span class="nv">S</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="kd">,</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pi5.elpi&quot;, line 9, column 0, character 152: Warning:</span>
<span class="go"> constant s has no declared type. Did you mean std.set.private.set std.set.private.empty std.set.private.node std.set.private.height std.set.private.create std.set.private.bal std.set.private.add std.set.private.mem std.set.private.remove-min-binding std.set.private.min-binding std.set.private.merge std.set.private.remove std.set.private.cardinal std.set.private.elements std.set.make std.set.mem std.set.add std.set.remove std.set.cardinal std.set.elements std.spy std.spy! std.split-at std.spy-do! rex.split random.self_init std.string.concat std.string.map std.string.map.empty std.string.map.mem std.string.map.add std.string.map.remove std.string.map.find std.string.map.bindings std.string.set std.string.set.empty std.string.set.mem std.string.set.add std.string.set.remove std.string.set.union std.string.set.inter std.string.set.diff std.string.set.equal std.string.set.subset std.string.set.elements std.string.set.cardinal std.int.set std.int.set.empty std.int.set.mem std.int.set.add std.int.set.remove std.int.set.union std.int.set.inter std.int.set.diff std.int.set.equal std.int.set.subset std.int.set.elements std.int.set.cardinal std.loc.set std.loc.set.empty std.loc.set.mem std.loc.set.add std.loc.set.remove std.loc.set.union std.loc.set.inter std.loc.set.diff std.loc.set.equal std.loc.set.subset std.loc.set.elements std.loc.set.cardinal std.set std.set gc.set gc.stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pi5.elpi&quot;, line 8, column 0, character 122: Warning:</span>
<span class="go"> constant r has no declared type. Did you mean std.set.private.remove-min-binding std.set.private.remove std.set.remove std.map.private.remove-min-binding std.map.private.remove std.map.remove std.rev rex.replace std.string.map.remove std.int.map.remove std.loc.map.remove std.string.set.remove std.int.set.remove std.loc.set.remove ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pi5.elpi&quot;, line 7, column 0, character 85: Warning:</span>
<span class="go"> constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pi5.elpi&quot;, line 3, column 0, character 33: Warning:</span>
<span class="go"> constant of has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pi5.elpi&quot;, line 5, column 0, character 56: Warning:</span>
<span class="go"> constant lam has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pi5.elpi&quot;, line 4, column 0, character 42: Warning:</span>
<span class="go"> constant bam has no declared type.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.003</span>

<span class="go">Typechecking time: 0.124</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/pnf.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span></pre></div></td><td class="code"><div><pre><span></span>
/*
 * Predicates for transforming formulas into prenex normal form 
 * assuming classical logic equivalences. This is an example of 
 * analyzing formula structure, including recursion over bindings
 * and generating modified structure based on this analysis
 */

%module  pnf.

%type  merge  (form -&gt; form -&gt; o).

type perp, tru formula.
type and, or, imp formula -&gt; formula -&gt; formula.
type adj, path term -&gt; term -&gt; formula.
type all, some (term -&gt; formula) -&gt; formula.

quant_free perp.
quant_free tru.
quant_free A :- atom A.
quant_free (and B C) :- quant_free B, quant_free C.
quant_free (or B C) :- quant_free B, quant_free C.
quant_free (imp B C) :- quant_free B, quant_free C.

atom (path X Y) :- termp X, termp Y.
atom (adj X Y) :- termp X, termp Y.

type a, b, c term.
type f term -&gt; term.

termp a.
termp b.
termp c.
termp (f X) :- termp X.

(prenex B B) :- (quant_free B), !. 
(prenex (and B C) D) :- (prenex B U), (prenex C V), (merge (and U V) D).
(prenex (or B C) D) :- (prenex B U), (prenex C V), (merge (or U V) D).
(prenex (imp B C) D) :- (prenex B U), (prenex C V), (merge (imp U V) D).
(prenex (all B) (all D)) :- (pi x\ ((termp x) =&gt; (prenex (B x) (D x)))).
(prenex (some B) (some D)) :- (pi x\ ((termp x) =&gt; (prenex (B x) (D x)))).


/* This predicate is for moving out quantifiers appearing at the head of the 
immediate subformulas of a formula with a propositional connective as its 
top-level symbol */
(merge (and (all B) (all C)) (all D)) :-
       (pi x\ ((termp x) =&gt; (merge (and (B x) (C x)) (D x)))).
(merge (and (all B) C) (all D)) :- 
       (pi x\ ((termp x) =&gt; (merge (and (B x) C) (D x)))).
(merge (and B (all C)) (all D)) :- 
       (pi x\ ((termp x) =&gt; (merge (and B (C x)) (D x)))).

(merge (and (some B) C) (some D)) :- 
       (pi x\ ((termp x) =&gt; (merge (and (B x) C) (D x)))).
(merge (and B (some C)) (some D)) :-
       (pi x\ ((termp x) =&gt; (merge (and B (C x)) (D x)))).

(merge (or (all B) C) (all D)) :-
       (pi x\ ((termp x) =&gt; (merge (or (B x) C) (D x)))).
(merge (or B (all C)) (all D)) :-
       (pi x\ ((termp x) =&gt; (merge (or B (C x)) (D x)))).
(merge (or (some B) (some C)) (some D)) :-
       (pi x\ ((termp x) =&gt; (merge (or (B x) (C x)) (D x)))).
(merge (or (some B) C) (some D)) :-
       (pi x\ ((termp x) =&gt; (merge (or (B x) C) (D x)))).
(merge (or B (some C)) (some D)) :-
       (pi x\ ((termp x) =&gt; (merge (or B (C x)) (D x)))).

(merge (imp (all B) (some C)) (some D)) :- 
       (pi x\ ((termp x) =&gt; (merge (imp (B x) (C x)) (D x)))).
(merge (imp (all B) C) (some D)) :- 
       (pi x\ ((termp x) =&gt; (merge (imp (B x) C) (D x)))).
(merge (imp (some B) C) (all D)) :-
       (pi x\ ((termp x) =&gt; (merge (imp (B x) C) (D x)))).
(merge (imp B (all C)) (all D)) :-
       (pi x\ ((termp x) =&gt; (merge (imp B (C x)) (D x)))).
(merge (imp B (some C)) (some D)) :-
       (pi x\ ((termp x) =&gt; (merge (imp B (C x)) (D x)))).

(merge B B) :- (quant_free B).

type one, two, three, four term.
type formula term -&gt; formula -&gt; prop.

formula one  (imp (all (x \ (path a x))) tru).
formula two  (imp (some (x \ (path a x))) tru).
formula three  (and (all (x \ (path a x))) (all (y \ (path y a)))).
formula four  (imp (some (x \ (path a x))) ((all (y \ (path a y))))).

(test N F) :- (formula N OF), (prenex OF F).

main :- (test one F1), (test two F2), (test three F3), (test four F4),!.

</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pnf.elpi&quot;, line 91, column 0, character 3225: Warning:</span>
<span class="go"> constant test has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pnf.elpi&quot;, line 25, column 0, character 688: Warning:</span>
<span class="go"> constant termp has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pnf.elpi&quot;, line 18, column 0, character 475: Warning:</span>
<span class="go"> constant quant_free has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pnf.elpi&quot;, line 36, column 0, character 855: Warning:</span>
<span class="go"> constant prenex has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pnf.elpi&quot;, line 37, column 0, character 891: Warning:</span>
<span class="go"> constant merge has no declared type. Did you mean std.set.private.merge std.map.private.merge ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pnf.elpi&quot;, line 20, column 0, character 508: Warning:</span>
<span class="go"> constant atom has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pnf.elpi&quot;, line 93, column 0, character 3271: Warning:</span>
<span class="go"> F4 is linear: name it _F4 (discard) or F4_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pnf.elpi&quot;, line 93, column 0, character 3271: Warning:</span>
<span class="go"> F3 is linear: name it _F3 (discard) or F3_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pnf.elpi&quot;, line 93, column 0, character 3271: Warning:</span>
<span class="go"> F2 is linear: name it _F2 (discard) or F2_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/pnf.elpi&quot;, line 93, column 0, character 3271: Warning:</span>
<span class="go"> F1 is linear: name it _F1 (discard) or F1_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.001</span>

<span class="go">Compilation time: 0.003</span>

<span class="go">Typechecking time: 0.110</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/polymorphic_variants.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span></pre></div></td><td class="code"><div><pre><span></span>% Type inference for a super-constrainted functional langage with
% polymorphic variants
%
% Syntax:    f ::= (&lt;case&gt; constant term)^*    unary functions
%         term ::= constant | &lt;app&gt; funname term
%      program ::= (&lt;fun&gt; funname f)^*
%        types ::= (&lt;fun&gt; funname type type)^*
%         type ::= constant^*
%
%      constant and funnames are distinct lambda-prolog names

% check types program types
% the functions must be listed in the same order in both
%check A B C :- print (check A B C), fail.
check [] [] _.
check [fun F B | BTL] [fun F D C | TTL] ORIGTYS :-
 check_domain B D,
 check_codomain B C ORIGTYS,
 check BTL TTL ORIGTYS.

% check_domain body type
%check_domain A B :- print (check_domain A B), fail.
check_domain B T :- inputs B I, is_subset T I.

%is_subset A B :- print (is_subset A B), fail.
is_subset A B :- var A, !, declare_constraint (is_subset A B) [A].
is_subset A B :- var B, !, declare_constraint (is_subset A B) [B].
is_subset A B :- is_subset_ A B.
is_subset_ [] _.
is_subset_ [X|TL] TL1 :- mem TL1 X, is_subset TL TL1.

mem A B :- var A, !, declare_constraint (mem A B) [A].
mem A B :- mem_ A B.
mem_ [X|_] X :- !.
mem_ [Y|TL] X :- mem TL X.

%check_codomain body type types
%check_codomain A B C :- print (check_codomain A B C), fail.
check_codomain [] _ _.
check_codomain [case _ T | TL] TYS ORIGTYS :-
  check_term T TYS ORIGTYS,
  check_codomain TL TYS ORIGTYS.

%check_term term type
%check_term A B C :- print &quot;CHECK&quot; (check_term A B C), fail.
check_term (app F T) TY ORIGTYS :-
 !,
 find ORIGTYS F D C,
 check_term T D ORIGTYS,
 is_subset C TY.
check_term X TY _ :-
 mem TY X.

find [fun F D C | _] F D C :- !.
find [ _ | TL ] F D C :- find TL F D C.

%inputs A B :- print &quot;INPUT&quot; (inputs A B), fail.
inputs [] [].
inputs [case A _ | TL] [A | TL&#39;] :- inputs TL TL&#39;.

/* Expected output, according to OCaml
Note: I use ref to kill Hindley-Milner polymorphism
# let g = ref (function `A -&gt; `C | `B -&gt; `D);;
# let f = function `A -&gt; `A | `B -&gt; !g `A;;
# f,!g;;
- : (_[&lt; `A | `B ] -&gt; (_[&gt; `A | `C | `D ] as &#39;a)) *
    (_[&lt; `A | `B &gt; `A ] -&gt; &#39;a) */

% This is an interesting propagation rule we would like to add:
% a (non empty) subset of a singleton is a singleton.
% We cannot add the propagation rule now because:
%  1. we match up to unification
%     =&gt; the rule turns constraints of the form (is_subset X a::Y) into
%        (is_subset X [a])
%  2. already unifying the first argument of the rule triggers resumption
%     but there is confusion between the two runtimes and a mess happens
propagate [] [is_subset X [Y]] (X = [Y]).
propagate [is_subset X Y,is_subset Y Z] [] (is_subset X Z).

inter [X | A] L [X | B] :- mem L X, !, inter A L B.
inter [X | A] L B :- inter A L B.
inter [] _ [].
 
union [X | XS] L L1  :- mem L X, !, union XS L L1.
union [X | XS] L [X | L1]  :- union XS L L1.
union [] L L .

is_ground [].
is_ground (_ :: L) :- is_ground L.
 
propagate [] [is_subset X YS, is_subset X XS] (is_subset X INTER) :-
  is_ground YS, is_ground XS, inter YS XS INTER.

propagate [X] [X] true.

propagate [mem X A,is_subset X Y] [] (mem Y A).

propagate [] [mem X A] (is_subset [A] X).
propagate [] [is_subset A X, is_subset B X] (is_subset C X) :-
  is_ground A, is_ground B, union A B C.

main1 :-
 P = [ fun f [ case a a
             , case b (app g a) ]
     , fun g [ case a c
             , case b d ]
     ],
 T = [ fun f [b] [a, c, d, e ]
     , fun g [a, b] [c, d, e]
     ],
 check P T T,
 print &quot;Type-checking ok&quot;,

 I = [ fun f If Of
     , fun g Ig Og
     ],
 check P I I,
 print &quot;Type-inference ok&quot;,
 print &quot;:::&quot; f &quot;:&quot; If &quot;-&gt;&quot; Of,
 print &quot;:::&quot; g &quot;:&quot; Ig &quot;-&gt;&quot; Og,
 print_constraints,
 
 Ig = [a],
 print &quot;Type specialization ok&quot;,
 print &quot;:::&quot; f &quot;:&quot; If &quot;-&gt;&quot; Of,
 print &quot;:::&quot; g &quot;:&quot; Ig &quot;-&gt;&quot; Og,
 print_constraints.

main2 :-
 P&#39; = [ fun f [ case a a
              , case b (app h1 (app g a))
              , case c (app h2 (app g a)) ]
      , fun g  [ case a a ]
      , fun h1 [ case a a
               , case b b
               , case d d ]
      , fun h2 [ case a a
               , case b b
               , case c c ]
      ],
 I&#39; = [ fun f If&#39; Of&#39;
      , fun g Ig&#39; Og&#39;
      , fun h1 Ih1&#39; Oh1&#39;
      , fun h2 Ih2&#39; Oh2&#39;
      ],
 check P&#39; I&#39; I&#39;,
 print &quot;Type-inference ok&quot;,
 print &quot;:::&quot; f &quot;:&quot; If&#39; &quot;-&gt;&quot; Of&#39;,
 print &quot;:::&quot; g &quot;:&quot; Ig&#39; &quot;-&gt;&quot; Og&#39;,
 print &quot;:::&quot; h1 &quot;:&quot; Ih1&#39; &quot;-&gt;&quot; Oh1&#39;,
 print &quot;:::&quot; h2 &quot;:&quot; Ih2&#39; &quot;-&gt;&quot; Oh2&#39;.

main :- (main1, print &quot;xxx failing&quot;, fail) ; print &quot;xxx failed&quot;, main2.

% vim: set ft=lprolog:
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/polymorphic_variants.elpi&quot;, line 84, column 0, character 2748:</span>
<span class="go"> Warning: constant union has no declared type. Did you mean std.string.set.union std.int.set.union std.loc.set.union ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/polymorphic_variants.elpi&quot;, line 77, column 0, character 2542:</span>
<span class="go"> Warning: constant propagate has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/polymorphic_variants.elpi&quot;, line 33, column 0, character 1118:</span>
<span class="go"> Warning: constant mem_ has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/polymorphic_variants.elpi&quot;, line 30, column 0, character 1008:</span>
<span class="go"> Warning:</span>
<span class="go"> constant mem has no declared type. Did you mean std.set.private.mem std.set.mem std.mem! std.mem std.string.map.mem std.int.map.mem std.loc.map.mem std.string.set.mem std.int.set.mem std.loc.set.mem ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/polymorphic_variants.elpi&quot;, line 129, column 0, character 3786:</span>
<span class="go"> Warning: constant main2 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/polymorphic_variants.elpi&quot;, line 102, column 0, character 3251:</span>
<span class="go"> Warning: constant main1 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/polymorphic_variants.elpi&quot;, line 28, column 0, character 958:</span>
<span class="go"> Warning: constant is_subset_ has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/polymorphic_variants.elpi&quot;, line 23, column 0, character 729:</span>
<span class="go"> Warning: constant is_subset has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/polymorphic_variants.elpi&quot;, line 88, column 0, character 2860:</span>
<span class="go"> Warning: constant is_ground has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/polymorphic_variants.elpi&quot;, line 80, column 0, character 2645:</span>
<span class="go"> Warning:</span>
<span class="go"> constant inter has no declared type. Did you mean std.intersperse std.string.set.inter std.int.set.inter std.loc.set.inter ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/polymorphic_variants.elpi&quot;, line 23, column 0, character 729:</span>
<span class="go"> Warning: [suppressing 18 warnings]</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/polymorphic_variants.elpi&quot;, line 35, column 0, character 1158:</span>
<span class="go"> Warning: Y is linear: name it _Y (discard) or Y_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/polymorphic_variants.elpi&quot;, line 81, column 0, character 2697:</span>
<span class="go"> Warning: X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">Type-checking ok</span>
<span class="go">Type-inference ok</span>
<span class="go">::: f : X0 -&gt; X1</span>
<span class="go">::: g : X2 -&gt; X3</span>
<span class="go"> mem X3 d  /* suspended on X3 */  mem X3 c  /* suspended on X3 */  X2 is_subset [a, b]  /* suspended on X2 */</span>
<span class="go"> X3 is_subset X1  /* suspended on X3 */  mem X2 a  /* suspended on X2 */</span>
<span class="go">mem X1 a  /* suspended on X1 */  X0 is_subset [a, b]  /* suspended on X0 */</span>
<span class="go">Type specialization ok</span>
<span class="go">::: f : X0 -&gt; X1</span>
<span class="go">::: g : [a] -&gt; X3</span>
<span class="go"> mem X3 d  /* suspended on X3 */  mem X3 c  /* suspended on X3 */  X3 is_subset X1  /* suspended on X3 */</span>
<span class="go"> mem X1 a  /* suspended on X1 */  X0 is_subset [a, b]  /* suspended on X0 */</span>
<span class="go">xxx failing</span>
<span class="go">xxx failed</span>
<span class="go">Type-inference ok</span>
<span class="go">::: f : X4 -&gt; X5</span>
<span class="go">::: g : X6 -&gt; X7</span>
<span class="go">::: h1 : X8 -&gt; X9</span>
<span class="go">::: h2 : X10 -&gt; X11</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.001</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.124</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>
<span class="go"> mem X11 c  /* suspended on X11 */ mem X11 b  /* suspended on X11 */</span>
<span class="go">mem X11 a  /* suspended on X11 */ X10 is_subset [a, b, c]  /* suspended on X10 */</span>
<span class="go">mem X9 d  /* suspended on X9 */ mem X9 b  /* suspended on X9 */ mem X9 a  /* suspended on X9 */</span>
<span class="go"> X8 is_subset [a, b, d]  /* suspended on X8 */ mem X7 a  /* suspended on X7 */</span>
<span class="go">X6 is_subset [a]  /* suspended on X6 */ X11 is_subset X5  /* suspended on X11 */</span>
<span class="go">X7 is_subset X10  /* suspended on X7 */ mem X6 a  /* suspended on X6 */</span>
<span class="go">X9 is_subset X5  /* suspended on X9 */ X7 is_subset X8  /* suspended on X7 */</span>
<span class="go">mem X6 a  /* suspended on X6 */ mem X5 a  /* suspended on X5 */ X4 is_subset [a, b, c]  /* suspended on X4 */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/printer.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span>(p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>r<span class="w"> </span>x<span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span>f<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">mod</span><span class="w"> </span>r<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span>f<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span>r<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>g<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="o">(</span>f<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span>r<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>g<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span>f<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">^</span><span class="w"> </span>r<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">^</span><span class="w"> </span>g<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="kd">||</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="kd">[</span>f<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>g<span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span>(a<span class="w"> </span><span class="kd">,</span><span class="w"> </span>b<span class="o">)</span><span class="kd">,</span><span class="w"> </span>a<span class="w"> </span><span class="kd">+</span><span class="w"> </span>b<span class="kd">]</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/printer.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant || has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/printer.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant x has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/printer.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant r has no declared type. Did you mean std.set.private.remove-min-binding std.set.private.remove std.set.remove std.map.private.remove-min-binding std.map.private.remove std.map.remove std.rev rex.replace std.string.map.remove std.int.map.remove std.loc.map.remove std.string.set.remove std.int.set.remove std.loc.set.remove ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/printer.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/printer.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant p has no declared type. Did you mean std.set.private.set std.set.private.empty std.set.private.node std.set.private.height std.set.private.create std.set.private.bal std.set.private.add std.set.private.mem std.set.private.remove-min-binding std.set.private.min-binding std.set.private.merge std.set.private.remove std.set.private.cardinal std.set.private.elements std.map.private.map std.map.private.empty std.map.private.node std.map.private.height std.map.private.create std.map.private.bal std.map.private.add std.map.private.find std.map.private.remove-min-binding std.map.private.min-binding std.map.private.merge std.map.private.remove std.map.private.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/printer.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant g has no declared type. Did you mean gc.get ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/printer.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant f has no declared type. Did you mean std.map.private.find std.map.find std.fatal-error std.fatal-error-w-data std.fold std.fold2 std.fold-map std.forall std.forall-ok std.forall2 std.filter std.flatten std.flip std.findall loc.fields std.string.map.find std.int.map.find std.loc.map.find gc.full ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/printer.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant b has no declared type. Did you mean std.set.private.bal std.map.private.bal std.map.private.bindings std.map.bindings std.string.map.bindings std.int.map.bindings std.loc.map.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/printer.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant a has no declared type. Did you mean std.set.private.add std.set.add std.map.private.add std.map.add std.assert! std.assert-ok! std.append std.appendR std.any-&gt;string std.string.map.add std.int.map.add std.loc.map.add std.string.set.add std.int.set.add std.loc.set.add ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/printer.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant ==&gt; has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/printer.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> [suppressing 1 warnings]</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/printer.elpi&quot;, line 1, column 0, character 0: Error:</span>
<span class="go"> (r X) has type prop but is used with type int</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/printer.elpi&quot;, line 1, column 0, character 0: Error:</span>
<span class="go"> (, (q X) (r x)) has type prop but is used with type (list prop)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/printer.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> G is linear: name it _G (discard) or G_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/printer.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> B is linear: name it _B (discard) or B_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.113</span>
<span class="go">Type error. To ignore it, pass -no-tc.</span>
</pre></div>
</div>
<p><strong>../../tests/sources/queens.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% ?- queens(4, Qs).</span>
<span class="c">%   produces</span>
<span class="c">%   Qs = [3,1,4,2] ;</span>
<span class="c">%   Qs = [2,4,1,3]</span>

<span class="c">% queens   +int  -[int]</span>

<span class="c">%%%%module queens.</span>

<span class="c">%spy X :- print start X, X, print ok X.</span>
<span class="c">%spy X :- print ko X, fail.</span>


plus<span class="w"> </span>zero<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>
plus<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">S</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>plus<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">S</span><span class="o">.</span><span class="w"></span>

less<span class="w"> </span>zero<span class="w"> </span>(s<span class="w"> </span><span class="nv">_</span><span class="o">).</span><span class="w"></span>
less<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>less<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">.</span><span class="w"></span>

neq<span class="w"> </span>zero<span class="w"> </span>(s<span class="w"> </span><span class="nv">_</span><span class="o">).</span><span class="w"></span>
neq<span class="w"> </span>(s<span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span>zero<span class="o">.</span><span class="w"></span>
neq<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>neq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">.</span><span class="w"></span>

queens<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">Qs</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>range<span class="w"> </span>(s<span class="w"> </span>zero<span class="o">)</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">Ns</span><span class="kd">,</span><span class="w"> </span>queens_aux<span class="w"> </span><span class="nv">Ns</span><span class="w"> </span>xnil<span class="w"> </span><span class="nv">Qs</span><span class="o">.</span><span class="w"></span>

queens_aux<span class="w"> </span>xnil<span class="w"> </span><span class="nv">Qs</span><span class="w"> </span><span class="nv">Qs</span><span class="o">.</span><span class="w"></span>
queens_aux<span class="w"> </span><span class="nv">UnplacedQs</span><span class="w"> </span><span class="nv">SafeQs</span><span class="w"> </span><span class="nv">Qs</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>
<span class="w">        </span>select<span class="w"> </span><span class="nv">UnplacedQs</span><span class="w"> </span><span class="nv">UnplacedQs1</span><span class="w"> </span><span class="nv">Q</span><span class="kd">,</span><span class="w"></span>
<span class="w">        </span>not_attack<span class="w"> </span><span class="nv">SafeQs</span><span class="w"> </span><span class="nv">Q</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">        </span>queens_aux<span class="w"> </span><span class="nv">UnplacedQs1</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">Q</span><span class="w"> </span><span class="nv">SafeQs</span><span class="o">)</span><span class="w"> </span><span class="nv">Qs</span><span class="o">.</span><span class="w"></span>


not_attack_aux<span class="w"> </span><span class="nv">Xs</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>not_attack<span class="w"> </span><span class="nv">Xs</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">).</span><span class="w"></span>
not_attack<span class="w"> </span>xnil<span class="w"> </span><span class="nv">DUMMY1</span><span class="w"> </span><span class="nv">DUMMY2</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
not_attack<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Ys</span><span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>plus<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">S1</span><span class="kd">,</span><span class="w"> </span>neq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">S1</span><span class="kd">,</span><span class="w"> </span>
<span class="w">                               </span>plus<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">S2</span><span class="kd">,</span><span class="w"> </span>neq<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">S2</span><span class="kd">,</span><span class="w"></span>
<span class="w">                               </span><span class="nv">N1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>
<span class="w">                               </span>not_attack<span class="w"> </span><span class="nv">Ys</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">N1</span><span class="o">.</span><span class="w"></span>

<span class="c">%select A B C :- print first_clause (select A B C), fail.</span>
select<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Xs</span><span class="o">)</span><span class="w"> </span><span class="nv">Xs</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>
<span class="c">%select A B C :- print backtrack (select A B C), fail.</span>
select<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Ys</span><span class="o">)</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Zs</span><span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>select<span class="w"> </span><span class="nv">Ys</span><span class="w"> </span><span class="nv">Zs</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>
<span class="c">%select A B C :- print no_more_chances (select A B C), fail.</span>

range<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">N</span><span class="w"> </span>xnil<span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
range<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">Ns</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>less<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="kd">,</span><span class="w"> </span><span class="nv">M1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">M</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>range<span class="w"> </span><span class="nv">M1</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">Ns</span><span class="o">.</span><span class="w"></span>

once<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>queens<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">))))</span><span class="w"> </span><span class="nv">L</span><span class="kd">,</span><span class="w"> </span>xxx<span class="w"> </span><span class="nv">L</span><span class="o">.</span><span class="w"></span>
xxx<span class="w"> </span>(xcons<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">))</span><span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">))))</span><span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">)</span><span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">)))</span><span class="w"> </span>xnil<span class="o">)))).</span><span class="w"></span>

q<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>queens<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">))))</span><span class="w"> </span><span class="nv">L</span><span class="o">.</span><span class="w"></span>

iter<span class="w"> </span>zero<span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>
iter<span class="w"> </span>(s<span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>iter<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

mult<span class="w"> </span>zero<span class="w"> </span><span class="nv">X</span><span class="w"> </span>zero<span class="o">.</span><span class="w"></span>
mult<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>mult<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">K</span><span class="kd">,</span><span class="w"> </span>plus<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span><span class="w"></span>

exp<span class="w"> </span>zero<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">).</span><span class="w"></span>
exp<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>exp<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">K</span><span class="kd">,</span><span class="w"> </span>mult<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w"> </span><span class="nv">TEN</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>s<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">)))))))))</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>exp<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">))))</span><span class="w"> </span><span class="nv">TEN</span><span class="w"> </span><span class="nv">TENTHOUSAND</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>iter<span class="w"> </span><span class="nv">TENTHOUSAND</span><span class="w"> </span>once<span class="o">.</span><span class="w"></span>

<span class="c">% ----------------------------------------------------------</span>
<span class="c">%queens(N,Qs) :- range(1,N,Ns), queens(Ns,[],Qs).</span>

<span class="c">%queens([],Qs,Qs).</span>
<span class="c">%queens(UnplacedQs,SafeQs,Qs) :-  select(UnplacedQs,UnplacedQs1,Q),</span>
<span class="c">%             not_attack(SafeQs,Q), queens(UnplacedQs1,[Q|SafeQs],Qs).</span>

<span class="c">%not_attack(Xs,X) :- not_attack(Xs,X,1).</span>
<span class="c">%not_attack([],_,_) :- !.</span>
<span class="c">%not_attack([Y|Ys],X,N) :-X =\= Y+N,X =\= Y-N,N1 is N+1,not_attack(Ys,X,N1).</span>

<span class="c">%select([X|Xs],Xs,X).</span>
<span class="c">%select([Y|Ys],[Y|Zs],X) :- select(Ys,Zs,X).</span>

<span class="c">%range(N,N,[N]) :- !.</span>
<span class="c">%range(M,N,[M|Ns]) :- M &lt; N, M1 is M+1, range(M1,N,Ns).</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 14, column 0, character 189: Warning:</span>
<span class="go"> constant zero has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 49, column 0, character 1240: Warning:</span>
<span class="go"> constant xxx has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 24, column 0, character 348: Warning:</span>
<span class="go"> constant xnil has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 27, column 0, character 431: Warning:</span>
<span class="go"> constant xcons has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 27, column 0, character 431: Warning:</span>
<span class="go"> constant select has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 15, column 0, character 204: Warning:</span>
<span class="go"> constant s has no declared type. Did you mean std.set.private.set std.set.private.empty std.set.private.node std.set.private.height std.set.private.create std.set.private.bal std.set.private.add std.set.private.mem std.set.private.remove-min-binding std.set.private.min-binding std.set.private.merge std.set.private.remove std.set.private.cardinal std.set.private.elements std.set.make std.set.mem std.set.add std.set.remove std.set.cardinal std.set.elements std.spy std.spy! std.split-at std.spy-do! rex.split random.self_init std.string.concat std.string.map std.string.map.empty std.string.map.mem std.string.map.add std.string.map.remove std.string.map.find std.string.map.bindings std.string.set std.string.set.empty std.string.set.mem std.string.set.add std.string.set.remove std.string.set.union std.string.set.inter std.string.set.diff std.string.set.equal std.string.set.subset std.string.set.elements std.string.set.cardinal std.int.set std.int.set.empty std.int.set.mem std.int.set.add std.int.set.remove std.int.set.union std.int.set.inter std.int.set.diff std.int.set.equal std.int.set.subset std.int.set.elements std.int.set.cardinal std.loc.set std.loc.set.empty std.loc.set.mem std.loc.set.add std.loc.set.remove std.loc.set.union std.loc.set.inter std.loc.set.diff std.loc.set.equal std.loc.set.subset std.loc.set.elements std.loc.set.cardinal std.set std.set gc.set gc.stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 24, column 0, character 348: Warning:</span>
<span class="go"> constant range has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 24, column 0, character 348: Warning:</span>
<span class="go"> constant queens_aux has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 24, column 0, character 348: Warning:</span>
<span class="go"> constant queens has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 52, column 0, character 1389: Warning:</span>
<span class="go"> constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 14, column 0, character 189: Warning:</span>
<span class="go"> [suppressing 10 warnings]</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 34, column 0, character 649: Warning:</span>
<span class="go"> DUMMY2 is linear: name it _DUMMY2 (discard) or DUMMY2_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 34, column 0, character 649: Warning:</span>
<span class="go"> DUMMY1 is linear: name it _DUMMY1 (discard) or DUMMY1_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 54, column 0, character 1428: Warning:</span>
<span class="go"> X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 57, column 0, character 1471: Warning:</span>
<span class="go"> X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 60, column 0, character 1532: Warning:</span>
<span class="go"> X is linear: name it _X (discard) or X_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.116</span>

<span class="go">Success:</span>

<span class="go">Time: 1.300</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/quote_syntax.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>quote_syntax<span class="w"> </span><span class="s2">&quot;src/builtin.elpi&quot;</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">B</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/quote_syntax.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> A is linear: name it _A (discard) or A_ (fresh variable)</span>
<span class="go">clause File &quot;(quote_syntax): query&quot;, line 1, column 0, character 0: [] (const main)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.071</span>

<span class="go">Success:</span>

<span class="go">Time: 0.011</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/random.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>random.self_init<span class="kd">,</span><span class="w"></span>
<span class="w">  </span>random.int<span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="nv">R</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="nv">R</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="nv">R</span><span class="w"> </span><span class="kd">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="nv">R</span><span class="w"> </span><span class="kd">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">9</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.063</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/reduce_cbn.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">%copy X Y :- print &quot;XXXXXXXXX&quot; (copy X Y), fail.</span>
copy<span class="w"> </span>(app<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span>(app<span class="w"> </span><span class="nv">M2</span><span class="w"> </span><span class="nv">N2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">M2</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N2</span><span class="o">.</span><span class="w"></span>
copy<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">).</span><span class="w"></span>

<span class="c">%cbn X Y :- print &quot;XXXXXXXXX&quot; (cbn X Y), fail.</span>
cbn<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\cbn<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>cbn<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">).</span><span class="w"> </span>
cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>subst<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"> </span>cbn<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">M</span><span class="o">.</span><span class="w"></span>
cbn<span class="w"> </span>(app<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>cbn<span class="w"> </span><span class="nv">M</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="nv">R</span><span class="o">.</span><span class="w"></span>
cbn<span class="w"> </span>(app<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(app<span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="nv">Y2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>cbn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X2</span><span class="kd">,</span><span class="w"> </span>cbn<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Y2</span><span class="o">.</span><span class="w"></span>

<span class="c">%subst F N B :- print &quot;XXXXXXXXX&quot; (subst F N B), fail.</span>
subst<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">B2</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">B2</span><span class="w"> </span>x<span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w"> </span><span class="nv">ZERO</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">s\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">z\</span><span class="w"> </span>z<span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span><span class="nv">SUCC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">n\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">s\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">z\</span><span class="w"> </span>app<span class="w"> </span>s<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>n<span class="w"> </span>s<span class="o">)</span><span class="w"> </span>z<span class="o">))</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="nv">SUCC</span><span class="w"> </span><span class="nv">ZERO</span><span class="o">)</span><span class="w"> </span><span class="nv">ONE</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">n\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">m\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">s\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">z\</span><span class="w"> </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>n<span class="w"> </span>s<span class="o">)</span><span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>m<span class="w"> </span>s<span class="o">)</span><span class="w"> </span>z<span class="o">))</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span><span class="nv">MULT</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">n\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">m\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">s\</span><span class="w"> </span>app<span class="w"> </span>n<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>m<span class="w"> </span>s<span class="o">))</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="nv">SUCC</span><span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">SUCC</span><span class="w"> </span><span class="nv">ZERO</span><span class="o">))</span><span class="w"> </span><span class="nv">TWO</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">))</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">SIX</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">MULT</span><span class="w"> </span><span class="nv">SIX</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">TWELVE</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">n\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">m\</span><span class="w"> </span>app<span class="w"> </span>n<span class="w"> </span>m<span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">ONE</span><span class="o">)</span><span class="w"> </span><span class="nv">THREE</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">THREE</span><span class="o">)</span><span class="w"> </span><span class="nv">NINE</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">MULT</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">FOUR</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">THREE</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">FOUR</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">SIX</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/reduce_cbn.elpi&quot;, line 7, column 0, character 285: Warning:</span>
<span class="go"> constant subst has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/reduce_cbn.elpi&quot;, line 3, column 0, character 101: Warning:</span>
<span class="go"> constant lam has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/reduce_cbn.elpi&quot;, line 2, column 0, character 49: Warning:</span>
<span class="go"> constant copy has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/reduce_cbn.elpi&quot;, line 6, column 0, character 211: Warning:</span>
<span class="go"> constant cbn has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/reduce_cbn.elpi&quot;, line 2, column 0, character 49: Warning:</span>
<span class="go"> constant app has no declared type. Did you mean std.append std.appendR ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/reduce_cbn.elpi&quot;, line 14, column 0, character 563: Warning:</span>
<span class="go"> NINE is linear: name it _NINE (discard) or NINE_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/reduce_cbn.elpi&quot;, line 14, column 0, character 563: Warning:</span>
<span class="go"> TWELVE is linear: name it _TWELVE (discard) or TWELVE_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.092</span>

<span class="go">Success:</span>

<span class="go">Time: 0.241</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/reduce_cbv.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span>copy<span class="w"> </span>(app<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span>(app<span class="w"> </span><span class="nv">M2</span><span class="w"> </span><span class="nv">N2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">M2</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N2</span><span class="o">.</span><span class="w"></span>
copy<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">).</span><span class="w"></span>

cbv<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>cbv<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>cbv<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">).</span><span class="w"></span>
cbv<span class="w"> </span>(app<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="nv">R2</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N2</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">M2</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>beta<span class="w"> </span><span class="nv">M2</span><span class="w"> </span><span class="nv">N2</span><span class="w"> </span><span class="nv">R2</span><span class="o">.</span><span class="w"></span>

beta<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">R2</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="nv">R&#39;</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">R&#39;</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="nv">R2</span><span class="o">.</span><span class="w"></span>
beta<span class="w"> </span><span class="nv">H</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span>(app<span class="w"> </span><span class="nv">H</span><span class="w"> </span><span class="nv">A</span><span class="o">).</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w"> </span><span class="nv">ZERO</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">s\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">z\</span><span class="w"> </span>z<span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span><span class="nv">SUCC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">n\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">s\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">z\</span><span class="w"> </span>app<span class="w"> </span>s<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>n<span class="w"> </span>s<span class="o">)</span><span class="w"> </span>z<span class="o">))</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="nv">SUCC</span><span class="w"> </span><span class="nv">ZERO</span><span class="o">)</span><span class="w"> </span><span class="nv">ONE</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">n\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">m\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">s\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">z\</span><span class="w"> </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>n<span class="w"> </span>s<span class="o">)</span><span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>m<span class="w"> </span>s<span class="o">)</span><span class="w"> </span>z<span class="o">))</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span><span class="nv">MULT</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">n\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">m\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">s\</span><span class="w"> </span>app<span class="w"> </span>n<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>m<span class="w"> </span>s<span class="o">))</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="nv">SUCC</span><span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">SUCC</span><span class="w"> </span><span class="nv">ZERO</span><span class="o">))</span><span class="w"> </span><span class="nv">TWO</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">))</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">SIX</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">MULT</span><span class="w"> </span><span class="nv">SIX</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">TWELVE</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">n\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">m\</span><span class="w"> </span>app<span class="w"> </span>n<span class="w"> </span>m<span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">ONE</span><span class="o">)</span><span class="w"> </span><span class="nv">THREE</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">THREE</span><span class="o">)</span><span class="w"> </span><span class="nv">NINE</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">MULT</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">FOUR</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">THREE</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">FOUR</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">SIX</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span><span class="w"></span>
<span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/reduce_cbv.elpi&quot;, line 2, column 0, character 52: Warning:</span>
<span class="go"> constant lam has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/reduce_cbv.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant copy has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/reduce_cbv.elpi&quot;, line 4, column 0, character 115: Warning:</span>
<span class="go"> constant cbv has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/reduce_cbv.elpi&quot;, line 5, column 0, character 186: Warning:</span>
<span class="go"> constant beta has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/reduce_cbv.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant app has no declared type. Did you mean std.append std.appendR ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/reduce_cbv.elpi&quot;, line 15, column 0, character 351: Warning:</span>
<span class="go"> NINE is linear: name it _NINE (discard) or NINE_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/reduce_cbv.elpi&quot;, line 15, column 0, character 351: Warning:</span>
<span class="go"> TWELVE is linear: name it _TWELVE (discard) or TWELVE_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.095</span>

<span class="go">Success:</span>

<span class="go">Time: 1.133</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/restriction.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% main should fail.</span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span><span class="nv">X</span><span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/restriction.elpi&quot;, line 3, column 0, character 21: Warning:</span>
<span class="go"> X is linear: name it _X (discard) or X_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.003</span>

<span class="go">Typechecking time: 0.069</span>
</pre></div>
</div>
<p><strong>../../tests/sources/restriction3.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">type</span><span class="w">  </span><span class="nf">if</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.<span class="w"></span>
mode<span class="w"> </span>(if<span class="w"> </span>i<span class="w"> </span>i<span class="w"> </span>i<span class="o">).</span><span class="w"></span>
if<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span><span class="w"></span>
if<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">E</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">E</span><span class="o">.</span><span class="w"></span>

<span class="kd">type</span><span class="w"> </span><span class="nf">debug-print</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.<span class="w"></span>
debug-print<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">spy</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">prop</span>.<span class="w"></span>
spy<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>counter<span class="w"> </span><span class="s2">&quot;run&quot;</span><span class="w"> </span><span class="nv">NR</span><span class="kd">,</span><span class="w"> </span>if<span class="w"> </span>(not<span class="o">(</span><span class="nv">NR</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="mi">0</span><span class="o">))</span><span class="w"> </span>(debug-print<span class="w"> </span><span class="s2">&quot;run=&quot;</span><span class="w"> </span><span class="nv">NR</span><span class="o">)</span><span class="w"> </span>true<span class="kd">,</span><span class="w"></span>
<span class="w">         </span>debug-print<span class="w"> </span><span class="s2">&quot;----&lt;&lt;---- enter: &quot;</span><span class="w"> </span><span class="nv">P</span><span class="kd">,</span><span class="w"></span>
<span class="w">         </span><span class="nv">P</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w">         </span>debug-print<span class="w"> </span><span class="s2">&quot;----&gt;&gt;---- exit: &quot;</span><span class="w"> </span><span class="nv">P</span><span class="o">.</span><span class="w"></span>
spy<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>debug-print<span class="w"> </span><span class="s2">&quot;----&gt;&gt;---- fail: &quot;</span><span class="w"> </span><span class="nv">P</span><span class="kd">,</span><span class="w"> </span>fail<span class="o">.</span><span class="w"></span>

<span class="kd">type</span><span class="w"> </span><span class="nf">lam</span><span class="w"> </span><span class="kt">(term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>

foo<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>spy(<span class="nv">A</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">i\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">j\</span><span class="w"> </span><span class="nv">X_</span><span class="w"> </span>i<span class="w"> </span>j<span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>spy(<span class="nv">B</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">i\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">j\</span><span class="w"> </span><span class="nv">Y_</span><span class="w"> </span>i<span class="w"> </span>j<span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>spy(<span class="nv">A</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">i\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">j\</span><span class="w"> </span>i<span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>spy(<span class="nv">B</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">i\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">j\</span><span class="w"> </span>i<span class="o">).</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>foo<span class="w"> </span>(<span class="nv">A_</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">B_</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/restriction3.elpi&quot;, line 18, column 0, character 442: Warning:</span>
<span class="go"> constant foo has no declared type.</span>
<span class="go">----&lt;&lt;---- enter:  X0 c0 = lam c1 \ lam c2 \ X1^1 c1 c2</span>
<span class="go">----&gt;&gt;---- exit:  lam c1 \ lam c2 \ X1^1 c1 c2 = lam c1 \ lam c2 \ X1^1 c1 c2</span>
<span class="go">----&lt;&lt;---- enter:  X2 = lam c1 \ lam c2 \ X3^1 c1 c2</span>
<span class="go">----&gt;&gt;---- exit:  lam c1 \ lam c2 \ X4 c1 c2 = lam c1 \ lam c2 \ X4 c1 c2</span>
<span class="go">----&lt;&lt;---- enter:  lam c1 \ lam c2 \ X1^1 c1 c2 = lam c1 \ lam c2 \ c1</span>
<span class="go">----&gt;&gt;---- exit:  lam c1 \ lam c2 \ c1 = lam c1 \ lam c2 \ c1</span>
<span class="go">----&lt;&lt;---- enter:  lam c1 \ lam c2 \ X4 c1 c2 = lam c1 \ lam c2 \ c1</span>
<span class="go">----&gt;&gt;---- exit:  lam c1 \ lam c2 \ c1 = lam c1 \ lam c2 \ c1</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.068</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/restriction4.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">    </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">Y Z</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"></span>
<span class="w">      </span>std.spy(<span class="nv">X</span><span class="w"> </span>x<span class="w"> </span><span class="kd">=</span><span class="w"> </span>f<span class="w"> </span><span class="o">(</span><span class="nv">Y</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="nv">e\</span><span class="w"> </span><span class="o">(</span><span class="nv">Z</span><span class="w"> </span>y<span class="w"> </span>e<span class="o">)).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/restriction4.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant f has no declared type. Did you mean std.map.private.find std.map.find std.fatal-error std.fatal-error-w-data std.fold std.fold2 std.fold-map std.forall std.forall-ok std.forall2 std.filter std.flatten std.flip std.findall loc.fields std.string.map.find std.int.map.find std.loc.map.find gc.full ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/restriction4.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">----&lt;&lt;---- enter:  X0 c0 = f (X1^1 c1) c2 \ X2^1 c1 c2</span>
<span class="go">----&gt;&gt;---- exit:  f (X3 c0) c2 \ X4 c0 c2 = f (X3 c0) c2 \ X4 c0 c2</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.065</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/restriction5.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x y z u w</span>\<span class="w"></span>
<span class="w">    </span>std.spy(<span class="nv">X</span><span class="w"> </span>x<span class="w"> </span>y<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>u<span class="w"> </span>w<span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">----&lt;&lt;---- enter:  X0 c0 c1 = X0 c3 c4</span>
<span class="go">----&gt;&gt;---- exit:  X1 = X1</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.064</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/restriction6.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">Y</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">Z</span>\<span class="w"></span>
<span class="w">      </span>std.spy(<span class="nv">X</span><span class="w"> </span>x<span class="w"> </span><span class="kd">=</span><span class="w"> </span>f<span class="w"> </span><span class="o">(</span><span class="nv">Y</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="nv">l\e\</span><span class="w"> </span><span class="o">(</span><span class="nv">Z</span><span class="w"> </span>e<span class="o">)).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/restriction6.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant f has no declared type. Did you mean std.map.private.find std.map.find std.fatal-error std.fatal-error-w-data std.fold std.fold2 std.fold-map std.forall std.forall-ok std.forall2 std.filter std.flatten std.flip std.findall loc.fields std.string.map.find std.int.map.find std.loc.map.find gc.full ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/restriction6.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">----&lt;&lt;---- enter:  X0 c0 = f (X1^1 c1) c2 \ c3 \ X2^2 c3</span>
<span class="go">----&gt;&gt;---- exit:  f (X3 c0) c2 \ c3 \ X4^1 c3 = f (X3 c0) c2 \ c3 \ X4^1 c3</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.069</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/rev.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% X10:</span>
<span class="c">%   yap                                     0.027s</span>
<span class="c">%   elpi                                    3.771s</span>
<span class="c">%   one level index hashtbl                 0.528s</span>
<span class="c">%   two level inefficient index             0.681s</span>
<span class="c">%   one level index hashtbl + automatic GC  0.899s</span>
<span class="c">%   one lvl hashtbl + flat + automatic GC   0.763s</span>
<span class="c">%   one lvl hashtbl + flat                  0.629s</span>


<span class="c">% X13:</span>
<span class="c">%   yap                          0.083s</span>
<span class="c">%   elpi                        10.068s</span>
<span class="c">%   one level index hashtbl      3.90s</span>
<span class="c">%   two level inefficient index  4.48s</span>

<span class="c">% X14:</span>
<span class="c">%   ocamlopt                     0.014s</span>
<span class="c">%   ocamlc                       0.024s</span>
<span class="c">%   yap                          0.033s</span>
<span class="c">%   teyjus                       0.257s</span>
<span class="c">%   elpi                         4.72s (setting ulimit -s 81920)</span>
<span class="c">%                                newlazy  lazy   eager   with formula       with terms</span>
<span class="c">%   no index                     2.90s  3.85s  4.74s   4.49s              4.28s</span>
<span class="c">%   one level index hashtbl      2.51s  2.37s  2.35s   2.29s              2.28s</span>
<span class="c">%   two level inefficient index  1.78s  2.19s  3.00s   2.30s              2.34s</span>
<span class="c">%   one level hashtbl + auto GC  3.78s  3.97s  4.67s   3.39s              3.88s</span>
<span class="c">%   one lvl hash+flat+ auto GC   3.10s  3.22s  3.40s   3.38s              3.14s</span>
<span class="c">%   one lvl hashtbl + flat              2.42s  2.43s   2.64s              2.27s</span>
<span class="c">%   one lvl hash+ flat + man GC         2.99s  2.80s   2.83s              2.37s</span>
<span class="c">%   one lvl index map main       2.61s  2.44s  2.60s   2.40s              2.18s</span>
<span class="c">%I  one lvl hashtbl              0.72s  0.61s  -----   0.63s              0.57s</span>
<span class="c">%I  two lvl efficient index      0.36s  0.55s  0.62s</span>
<span class="c">%II two lvl inefficient index    0.70s</span>
<span class="c">%I  desperate two lvl effici     0.19s</span>
<span class="c">%I  desperate.ml                 0.11s  0.14s</span>
<span class="c">%I  desperate2.ml                0.11s</span>
<span class="c">%I  desperate3.ml                0.12s</span>

rev<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">RL</span><span class="w">  </span><span class="kd">:-</span><span class="w"> </span>aux<span class="w"> </span><span class="nv">L</span><span class="w"> </span>xnil<span class="w">  </span><span class="nv">RL</span><span class="w"> </span><span class="o">.</span><span class="w"></span>
aux<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XS</span><span class="o">)</span><span class="w">  </span><span class="nv">ACC</span><span class="w">  </span><span class="nv">R</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>aux<span class="w"> </span><span class="nv">XS</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">ACC</span><span class="o">)</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="o">.</span><span class="w"> </span>
aux<span class="w"> </span>xnil<span class="w">  </span><span class="nv">L</span><span class="w">  </span><span class="nv">L</span><span class="w"> </span><span class="o">.</span><span class="w"></span>

append<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XS</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L1</span><span class="o">)</span><span class="w">  </span><span class="kd">:-</span><span class="w"> </span>append<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="o">.</span><span class="w"></span>
append<span class="w"> </span>xnil<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">    </span><span class="nv">X1</span><span class="w"> </span><span class="kd">=</span><span class="w">  </span>(xcons<span class="w"> </span>x1<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x2<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x3<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x4<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x5<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x6<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x7<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x8<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x9<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x10<span class="w"> </span>xnil<span class="o">))))))))))</span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="nv">X2</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="nv">X3</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="nv">X4</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="nv">X5</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X5</span><span class="w"> </span><span class="nv">X5</span><span class="w"> </span><span class="nv">X6</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X6</span><span class="w"> </span><span class="nv">X6</span><span class="w"> </span><span class="nv">X7</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X7</span><span class="w"> </span><span class="nv">X7</span><span class="w"> </span><span class="nv">X8</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X8</span><span class="w"> </span><span class="nv">X8</span><span class="w"> </span><span class="nv">X9</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X9</span><span class="w"> </span><span class="nv">X9</span><span class="w"> </span><span class="nv">X10</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X10</span><span class="w"> </span><span class="nv">X10</span><span class="w"> </span><span class="nv">X11</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X11</span><span class="w"> </span><span class="nv">X11</span><span class="w"> </span><span class="nv">X12</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X12</span><span class="w"> </span><span class="nv">X12</span><span class="w"> </span><span class="nv">X13</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X13</span><span class="w"> </span><span class="nv">X13</span><span class="w"> </span><span class="nv">X14</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span><span class="c">% append X14 X14 X15  ,</span>
<span class="w">   </span><span class="c">% append X15 X15 X16  ,</span>
<span class="w">   </span><span class="c">% append X16 X16 X17  ,</span>
<span class="w">   </span><span class="c">% append X17 X17 X18  ,</span>
<span class="w">   </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X14</span><span class="w"> </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>rev<span class="w"> </span><span class="nv">X</span><span class="w">  </span><span class="nv">Y</span><span class="kd">,</span><span class="w">   </span>rev<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="kd">,</span><span class="w">  </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev.elpi&quot;, line 40, column 0, character 1827: Warning:</span>
<span class="go"> constant xnil has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev.elpi&quot;, line 41, column 0, character 1857: Warning:</span>
<span class="go"> constant xcons has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev.elpi&quot;, line 47, column 0, character 2004: Warning:</span>
<span class="go"> constant x9 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev.elpi&quot;, line 47, column 0, character 2004: Warning:</span>
<span class="go"> constant x8 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev.elpi&quot;, line 47, column 0, character 2004: Warning:</span>
<span class="go"> constant x7 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev.elpi&quot;, line 47, column 0, character 2004: Warning:</span>
<span class="go"> constant x6 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev.elpi&quot;, line 47, column 0, character 2004: Warning:</span>
<span class="go"> constant x5 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev.elpi&quot;, line 47, column 0, character 2004: Warning:</span>
<span class="go"> constant x4 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev.elpi&quot;, line 47, column 0, character 2004: Warning:</span>
<span class="go"> constant x3 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev.elpi&quot;, line 47, column 0, character 2004: Warning:</span>
<span class="go"> constant x2 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev.elpi&quot;, line 47, column 0, character 2004: Warning:</span>
<span class="go"> [suppressing 17 warnings]</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.004</span>

<span class="go">Typechecking time: 0.103</span>
<span class="go">Fatal error: exception Stack overflow</span>
</pre></div>
</div>
<p><strong>../../tests/sources/rev14.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span>rev<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">RL</span><span class="w">  </span><span class="kd">:-</span><span class="w"> </span>aux<span class="w"> </span><span class="nv">L</span><span class="w"> </span>xnil<span class="w">  </span><span class="nv">RL</span><span class="o">.</span><span class="w"></span>
aux<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XS</span><span class="o">)</span><span class="w">  </span><span class="nv">ACC</span><span class="w">  </span><span class="nv">R</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>aux<span class="w"> </span><span class="nv">XS</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">ACC</span><span class="o">)</span><span class="w"> </span><span class="nv">R</span><span class="o">.</span><span class="w"></span>
aux<span class="w"> </span>xnil<span class="w">  </span><span class="nv">L</span><span class="w">  </span><span class="nv">L</span><span class="o">.</span><span class="w"></span>

append<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XS</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L1</span><span class="o">)</span><span class="w">  </span><span class="kd">:-</span><span class="w"> </span>append<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span><span class="w"></span>
append<span class="w"> </span>xnil<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">    </span><span class="nv">X1</span><span class="w"> </span><span class="kd">=</span><span class="w">  </span>(xcons<span class="w"> </span>x1<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x2<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x3<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x4<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x5<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x6<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x7<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x8<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x9<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x10<span class="w"> </span>xnil<span class="o">))))))))))</span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="nv">X2</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="nv">X3</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="nv">X4</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="nv">X5</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X5</span><span class="w"> </span><span class="nv">X5</span><span class="w"> </span><span class="nv">X6</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X6</span><span class="w"> </span><span class="nv">X6</span><span class="w"> </span><span class="nv">X7</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X7</span><span class="w"> </span><span class="nv">X7</span><span class="w"> </span><span class="nv">X8</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X8</span><span class="w"> </span><span class="nv">X8</span><span class="w"> </span><span class="nv">X9</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X9</span><span class="w"> </span><span class="nv">X9</span><span class="w"> </span><span class="nv">X10</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X10</span><span class="w"> </span><span class="nv">X10</span><span class="w"> </span><span class="nv">X11</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X11</span><span class="w"> </span><span class="nv">X11</span><span class="w"> </span><span class="nv">X12</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X12</span><span class="w"> </span><span class="nv">X12</span><span class="w"> </span><span class="nv">X13</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>append<span class="w"> </span><span class="nv">X13</span><span class="w"> </span><span class="nv">X13</span><span class="w"> </span><span class="nv">X14</span><span class="w">  </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span><span class="c">% append X14 X14 X15  ,</span>
<span class="w">   </span><span class="c">% append X15 X15 X16  ,</span>
<span class="w">   </span><span class="c">% append X16 X16 X17  ,</span>
<span class="w">   </span><span class="c">% append X17 X17 X18  ,</span>
<span class="w">   </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X14</span><span class="w"> </span><span class="kd">,</span><span class="w"></span>
<span class="w">   </span>rev<span class="w"> </span><span class="nv">X</span><span class="w">  </span><span class="nv">Y</span><span class="kd">,</span><span class="w">   </span>rev<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="kd">,</span><span class="w">  </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev14.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant xnil has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev14.elpi&quot;, line 2, column 0, character 29: Warning:</span>
<span class="go"> constant xcons has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev14.elpi&quot;, line 8, column 0, character 171: Warning:</span>
<span class="go"> constant x9 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev14.elpi&quot;, line 8, column 0, character 171: Warning:</span>
<span class="go"> constant x8 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev14.elpi&quot;, line 8, column 0, character 171: Warning:</span>
<span class="go"> constant x7 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev14.elpi&quot;, line 8, column 0, character 171: Warning:</span>
<span class="go"> constant x6 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev14.elpi&quot;, line 8, column 0, character 171: Warning:</span>
<span class="go"> constant x5 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev14.elpi&quot;, line 8, column 0, character 171: Warning:</span>
<span class="go"> constant x4 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev14.elpi&quot;, line 8, column 0, character 171: Warning:</span>
<span class="go"> constant x3 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev14.elpi&quot;, line 8, column 0, character 171: Warning:</span>
<span class="go"> constant x2 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/rev14.elpi&quot;, line 8, column 0, character 171: Warning:</span>
<span class="go"> [suppressing 17 warnings]</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.100</span>
<span class="go">Fatal error: exception Stack overflow</span>
</pre></div>
</div>
<p><strong>../../tests/sources/same_term.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="kd">==</span><span class="w"> </span><span class="mi">3</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>not(<span class="kd">[</span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">_</span><span class="kd">]</span><span class="w"> </span><span class="kd">==</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="kd">]</span><span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>not(<span class="nv">X</span><span class="w"> </span><span class="kd">==</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>(<span class="nv">x\</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">==</span><span class="w"> </span>(<span class="nv">y\</span><span class="w"> </span>y<span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="nv">ID</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(<span class="nv">x\</span>x<span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>(<span class="nv">ID</span><span class="w"> </span><span class="mi">3</span><span class="o">)</span><span class="w"> </span><span class="kd">==</span><span class="w"> </span>(<span class="nv">ID</span><span class="w"> </span><span class="mi">3</span><span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x y</span>\<span class="w"> </span>same_var<span class="w"> </span>(<span class="nv">X</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">X</span><span class="w"> </span>y<span class="o">)</span><span class="kd">,</span><span class="w"> </span>not(same_term<span class="w"> </span><span class="o">(</span><span class="nv">X</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="nv">X</span><span class="w"> </span>y<span class="o">)).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.003</span>

<span class="go">Typechecking time: 0.083</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/self_assignment.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% main should succeed</span>

q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">c</span>\<span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span>q<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>d<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/self_assignment.elpi&quot;, line 3, column 0, character 23: Warning:</span>
<span class="go"> constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/self_assignment.elpi&quot;, line 5, column 0, character 33: Warning:</span>
<span class="go"> constant d has no declared type. Did you mean std.debug-print std.drop std.drop-last std.do! std.do-ok! std.string.set.diff std.int.set.diff std.loc.set.diff ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/self_assignment.elpi&quot;, line 3, column 0, character 23: Warning:</span>
<span class="go"> A is linear: name it _A (discard) or A_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.087</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/set.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">pred</span><span class="w"> </span><span class="nf">build</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">std.set</span><span class="w"> </span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">std.set</span><span class="w"> </span><span class="kt">int</span>.<span class="w"></span>
build<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
build<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>std.set.add<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XR</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>build<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">XR</span><span class="w"> </span><span class="nv">X1</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">test</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.<span class="w"></span>
test<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
test<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>std.assert!<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;not found&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>test<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">test2</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">A</span>.<span class="w"></span>
test2<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
test2<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>test2<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="nv">R</span><span class="o">.</span><span class="w"></span>

macro<span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="mi">4096</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>std.time<span class="w"> </span>(build<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>{std.set.make<span class="w"> </span>cmp_term} <span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time0</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w">  </span>std.time<span class="w"> </span>(test<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>std.set.mem<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time1</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w">  </span>std.set.elements<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">L</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>std.assert!<span class="w"> </span>({std.length<span class="w"> </span><span class="nv">L</span>} <span class="kd">=</span><span class="w"> </span><span class="kd">@</span>iters<span class="kd">,</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="mi">0</span><span class="kd">|</span><span class="nv">_</span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;elements broken&quot;</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w">  </span>std.time<span class="w"> </span>(test2<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>std.set.remove<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">E</span><span class="o">)</span><span class="w"> </span><span class="nv">Time2</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"></span>
<span class="w">  </span>std.assert!<span class="w"> </span>(std.set.cardinal<span class="w"> </span><span class="nv">E</span><span class="w"> </span><span class="mi">0</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;not empty&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="nv">Time0</span><span class="w"> </span><span class="s2">&quot;+&quot;</span><span class="w"> </span><span class="nv">Time1</span><span class="w"> </span><span class="s2">&quot;+&quot;</span><span class="w"> </span><span class="nv">Time2</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">0.953664 + 0.042078 + 0.647813</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.084</span>

<span class="go">Success:</span>

<span class="go">Time: 1.738</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/shorten.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">namespace</span><span class="w"> </span>b<span class="w"> </span>{

foo<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>true<span class="o">.</span><span class="w"></span>
baz<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>fail<span class="o">.</span><span class="w"></span>

<span class="w">  </span><span class="kd">namespace</span><span class="w"> </span>bar<span class="w"> </span>{
<span class="w">  </span>
<span class="w">  </span>baz<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>foo<span class="o">.</span><span class="w"></span>

<span class="w">  </span>}


<span class="kd">shorten</span><span class="w"> </span>bar.{ baz<span class="w"> </span>}.<span class="w"></span>

}

<span class="kd">namespace</span><span class="w"> </span>a<span class="w"> </span>{

<span class="w">  </span><span class="kd">shorten</span><span class="w"> </span>b.{ foo<span class="w"> </span>}.<span class="w"></span>
<span class="w">  </span><span class="kd">shorten</span><span class="w"> </span>b.bar.{ baz<span class="w"> </span>}.<span class="w"></span>
<span class="w">  </span>
<span class="w">  </span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>foo<span class="kd">,</span><span class="w"> </span>b.foo<span class="kd">,</span><span class="w"> </span>baz<span class="kd">,</span><span class="w"> </span>bar.baz<span class="kd">,</span><span class="w"> </span>b.bar.baz<span class="o">.</span><span class="w"></span>

<span class="w">  </span>bar.baz<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>true<span class="o">.</span><span class="w"></span>

<span class="w">  </span><span class="kd">shorten</span><span class="w"> </span>b.{ baz<span class="w"> </span>}.<span class="w"></span>
<span class="w">  </span>
<span class="w">  </span>baz<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>true<span class="o">.</span><span class="w"></span>
<span class="w">  </span>bar.baz<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>baz<span class="o">.</span><span class="w"></span>

}

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>a.main<span class="o">.</span><span class="w"> </span>
<span class="w">       </span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/shorten.elpi&quot;, line 4, column 0, character 16: Warning:</span>
<span class="go"> constant b.foo has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/shorten.elpi&quot;, line 5, column 0, character 29: Warning:</span>
<span class="go"> constant b.baz has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/shorten.elpi&quot;, line 9, column 3, character 67: Warning:</span>
<span class="go"> constant b.bar.baz has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/shorten.elpi&quot;, line 23, column 3, character 177: Warning:</span>
<span class="go"> constant a.main has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/shorten.elpi&quot;, line 23, column 3, character 177: Warning:</span>
<span class="go"> constant a.bar.baz has no declared type.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.085</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/shorten2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">accumulate</span><span class="w"> </span>shorten_aux<span class="kd">,</span><span class="w"> </span>shorten_aux2<span class="o">.</span><span class="w"></span>

foo<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>true<span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>foo<span class="kd">,</span><span class="w"> </span>bar<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/shorten_aux2.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant foo has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/shorten_aux2.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant bar has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/shorten_aux.elpi&quot;, line 2, column 3, character 17: Warning:</span>
<span class="go"> constant a.foo has no declared type.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.001</span>

<span class="go">Compilation time: 0.001</span>

<span class="go">Typechecking time: 0.074</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/shorten_aux.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">namespace</span><span class="w"> </span>a<span class="w"> </span>{
<span class="w">  </span>foo<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>fail<span class="o">.</span><span class="w"></span>
}

<span class="kd">shorten</span><span class="w"> </span>a.{ foo<span class="w"> </span>}.<span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/shorten_aux.elpi&quot;, line 2, column 3, character 17: Warning:</span>
<span class="go"> constant a.foo has no declared type.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.068</span>
</pre></div>
</div>
<p><strong>../../tests/sources/shorten_aux2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span>bar<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>foo<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/shorten_aux2.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant foo has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/shorten_aux2.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant bar has no declared type.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.072</span>
</pre></div>
</div>
<p><strong>../../tests/sources/shorten_builtin.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">shorten</span><span class="w"> </span>std.string.set.{ empty<span class="w"> </span>}.<span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span>{empty}.<span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">{{  }}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.003</span>

<span class="go">Typechecking time: 0.090</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/shorten_trie.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span>std.list.map _ _.
std.string.concat1 _ _ _.
std.string.escape _ _.

shorten std.{list.map, string.{ concat1, escape }}.

main :- list.map F [], concat1 &quot;a&quot; &quot;b&quot; AB, escape &quot;x y&quot; E.
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/shorten_trie.elpi&quot;, line 3, column 0, character 44: Warning:</span>
<span class="go"> constant std.string.escape has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/shorten_trie.elpi&quot;, line 2, column 0, character 18: Warning:</span>
<span class="go"> constant std.string.concat1 has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/shorten_trie.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant std.list.map has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/shorten_trie.elpi&quot;, line 7, column 0, character 121: Warning:</span>
<span class="go"> E is linear: name it _E (discard) or E_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/shorten_trie.elpi&quot;, line 7, column 0, character 121: Warning:</span>
<span class="go"> AB is linear: name it _AB (discard) or AB_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/shorten_trie.elpi&quot;, line 7, column 0, character 121: Warning:</span>
<span class="go"> F is linear: name it _F (discard) or F_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.091</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/spill_and.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span>kind term type.
type app term -&gt; term -&gt; term.
type lam (term -&gt; term) -&gt; term.
type t term.

pred copy i:term, o:term.
copy (app A B) (app A1 B1) :- copy A A1, copy B B1.
copy (lam F) (lam F1) :- pi x\ copy (F x) (F1 x).
% we omit (copy x x) on purpose

main :-
  T = (lam x\ {copy x t =&gt; ((A x) = x, copy (app (A x) x))}),
  print T,
  T = (lam _\ app t t). 
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">lam c0 \ app t t</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.076</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/spill_impl.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span>kind term type.
type app term -&gt; term -&gt; term.
type lam (term -&gt; term) -&gt; term.
type t term.

pred copy i:term, o:term.
copy (app A B) (app A1 B1) :- copy A A1, copy B B1.
copy (lam F) (lam F1) :- pi x\ copy (F x) (F1 x).
% we omit (copy x x) on purpose

main :-
  T = (lam x\ {copy x t =&gt; copy (app x x)}),
  print T,
  T = (lam _\ app t t). 
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">lam c0 \ app t t</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.076</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/spill_lam.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">pred</span><span class="w"> </span><span class="nf">pp</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">string</span>.<span class="w"></span>
main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">x\</span><span class="w"> </span>print<span class="w"> </span>{pp<span class="w"> </span>x}.<span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/spill_lam.elpi&quot;, line 2, column 0, character 25: Warning:</span>
<span class="go"> X is linear: name it _X (discard) or X_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.073</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/trace.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span>p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">3</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="mi">2</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">Y</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>p<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">Y</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/trace.elpi&quot;, line 2, column 0, character 1: Warning:</span>
<span class="go"> constant p has no declared type. Did you mean std.set.private.set std.set.private.empty std.set.private.node std.set.private.height std.set.private.create std.set.private.bal std.set.private.add std.set.private.mem std.set.private.remove-min-binding std.set.private.min-binding std.set.private.merge std.set.private.remove std.set.private.cardinal std.set.private.elements std.map.private.map std.map.private.empty std.map.private.node std.map.private.height std.map.private.create std.map.private.bal std.map.private.add std.map.private.find std.map.private.remove-min-binding std.map.private.min-binding std.map.private.merge std.map.private.remove std.map.private.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/trace.elpi&quot;, line 6, column 0, character 60: Warning:</span>
<span class="go"> Y is linear: name it _Y (discard) or Y_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/trace.elpi&quot;, line 6, column 0, character 60: Warning:</span>
<span class="go"> X is linear: name it _X (discard) or X_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.003</span>

<span class="go">Typechecking time: 0.092</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/trace2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">Y</span>\<span class="w"> </span>fail<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>true<span class="kd">,</span><span class="w"> </span>fail<span class="o">)).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.074</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/trace_chr.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">constraint</span><span class="w"> </span><span class="nf">even odd </span>{<span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(even<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(odd<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span>(odd<span class="w"> </span>z<span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>true<span class="o">.</span><span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(even<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(odd<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span>(odd<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>z<span class="o">))</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>fail<span class="o">.</span><span class="w"></span>
}<span class="w"></span>
<span class="kd">kind</span><span class="w"> </span><span class="nf">nat</span><span class="w"> </span><span class="kt">type</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">s</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">nat</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">z</span><span class="w"> </span><span class="kt">nat</span>.<span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">even</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">nat</span>.<span class="w"></span>
<span class="kd">pred</span><span class="w"> </span><span class="nf">odd</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">nat</span>.<span class="w"></span>
even<span class="w"> </span>z<span class="o">.</span><span class="w"></span>

odd<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>even<span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>
even<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>odd<span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

even<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>declare_constraint<span class="w"> </span>(even<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>
odd<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>declare_constraint<span class="w"> </span>(odd<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>even<span class="w"> </span><span class="nv">Z</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>declare_constraint<span class="w"> </span>true<span class="w"> </span><span class="nv">Z</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="nv">Z</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>s<span class="w"> </span><span class="nv">W</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>not(even<span class="w"> </span><span class="nv">W</span><span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.076</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>
<span class="go"> odd X0  /* suspended on X0 */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/trace_cut.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">pred</span><span class="w"> </span><span class="nf">p</span>.<span class="w"></span>
p<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>fail<span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>fail<span class="o">.</span><span class="w"></span>
p<span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">q</span>.<span class="w"></span>
q<span class="o">.</span><span class="w"></span>
q<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>p<span class="o">.</span><span class="w"></span>
main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>q<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>(q<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>q<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.074</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/trace_findall.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span>p<span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>
p<span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>p<span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>std.findall<span class="w"> </span>(p<span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">L</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/trace_findall.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant p has no declared type. Did you mean std.set.private.set std.set.private.empty std.set.private.node std.set.private.height std.set.private.create std.set.private.bal std.set.private.add std.set.private.mem std.set.private.remove-min-binding std.set.private.min-binding std.set.private.merge std.set.private.remove std.set.private.cardinal std.set.private.elements std.map.private.map std.map.private.empty std.map.private.node std.map.private.height std.map.private.create std.map.private.bal std.map.private.add std.map.private.find std.map.private.remove-min-binding std.map.private.min-binding std.map.private.merge std.map.private.remove std.map.private.bindings ?</span>
<span class="go">[p 1, p 2, p 3]</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.079</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/trail.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><span class="c">% Query: p X Z.</span>
<span class="c">% Expected outcome: X=ok, Z=ok.</span>

p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>foo<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>r<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span><span class="w"></span>
foo<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="kd">,</span><span class="w"> </span>q<span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span><span class="w"></span>
q<span class="w"> </span>a<span class="o">.</span><span class="w"></span>
q<span class="w"> </span>b<span class="o">.</span><span class="w"></span>
r<span class="w"> </span>b<span class="w"> </span>ok<span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Z</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="kd">,</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/trail.elpi&quot;, line 4, column 0, character 49: Warning:</span>
<span class="go"> constant r has no declared type. Did you mean std.set.private.remove-min-binding std.set.private.remove std.set.remove std.map.private.remove-min-binding std.map.private.remove std.map.remove std.rev rex.replace std.string.map.remove std.int.map.remove std.loc.map.remove std.string.set.remove std.int.set.remove std.loc.set.remove ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/trail.elpi&quot;, line 5, column 0, character 74: Warning:</span>
<span class="go"> constant q has no declared type. Did you mean gc.quick-stat ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/trail.elpi&quot;, line 4, column 0, character 49: Warning:</span>
<span class="go"> constant p has no declared type. Did you mean std.set.private.set std.set.private.empty std.set.private.node std.set.private.height std.set.private.create std.set.private.bal std.set.private.add std.set.private.mem std.set.private.remove-min-binding std.set.private.min-binding std.set.private.merge std.set.private.remove std.set.private.cardinal std.set.private.elements std.map.private.map std.map.private.empty std.map.private.node std.map.private.height std.map.private.create std.map.private.bal std.map.private.add std.map.private.find std.map.private.remove-min-binding std.map.private.min-binding std.map.private.merge std.map.private.remove std.map.private.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/trail.elpi&quot;, line 4, column 0, character 49: Warning:</span>
<span class="go"> constant foo has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/trail.elpi&quot;, line 7, column 0, character 110: Warning:</span>
<span class="go"> constant b has no declared type. Did you mean std.set.private.bal std.map.private.bal std.map.private.bindings std.map.bindings std.string.map.bindings std.int.map.bindings std.loc.map.bindings ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/trail.elpi&quot;, line 6, column 0, character 105: Warning:</span>
<span class="go"> constant a has no declared type. Did you mean std.set.private.add std.set.add std.map.private.add std.map.add std.assert! std.assert-ok! std.append std.appendR std.any-&gt;string std.string.map.add std.int.map.add std.loc.map.add std.string.set.add std.int.set.add std.loc.set.add ?</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.109</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">xx</span><span class="w"> </span><span class="kt">bool</span>.<span class="w"></span>

<span class="kd">namespace</span><span class="w"> </span>foo<span class="w"> </span>{

<span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">xx</span>.<span class="w"></span>
f<span class="w"> </span><span class="nv">_</span><span class="o">.</span><span class="w"></span>

}


main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>foo.f<span class="w"> </span>tt<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.073</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv1.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">t1</span><span class="w"> </span><span class="kt">int</span>.<span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">t1</span>.<span class="w"></span>
f<span class="w"> </span><span class="nv">_</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="w"> </span><span class="mi">3</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.075</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv10.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span>typeabbrev<span class="w"> </span>(bar<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(list<span class="w"> </span><span class="nv">A</span><span class="o">).</span><span class="w"></span>
typeabbrev<span class="w"> </span>(tmp<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(list<span class="w"> </span><span class="nv">A</span><span class="o">).</span><span class="w"></span>
typeabbrev<span class="w"> </span>(foo<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(tmp<span class="w"> </span><span class="nv">A</span><span class="o">).</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">foo</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>.<span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>std.map<span class="w"> </span><span class="mi">3</span><span class="w"> </span>foo<span class="w"> </span><span class="nv">_</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/typeabbrv10.elpi&quot;, line 7, column 0, character 111: Error:</span>
<span class="go"> 3 has type int but is used with type (foo X24)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/typeabbrv10.elpi&quot;, line 7, column 0, character 111: Error:</span>
<span class="go"> 3 has type int but is used with type type</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/typeabbrv10.elpi&quot;, line 7, column 0, character 111: Error:</span>
<span class="go"> 3 has type int but is used with type (std.map.private.map X26 X25)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/typeabbrv10.elpi&quot;, line 7, column 0, character 111: Error:</span>
<span class="go"> 3 has type int but is used with type (foo X27)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/typeabbrv10.elpi&quot;, line 7, column 0, character 111: Error:</span>
<span class="go"> 3 has type int but is used with type (std.map.private.map X29 X28)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.073</span>
<span class="go">Type error. To ignore it, pass -no-tc.</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv11.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">x</span><span class="w"> </span><span class="kt">int</span>.<span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">x</span>.<span class="w"></span>
f<span class="w"> </span><span class="s2">&quot;x&quot;</span><span class="o">.</span><span class="w"></span>

main<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/typeabbrv11.elpi&quot;, line 4, column 0, character 31: Error:</span>
<span class="go"> x has type string but is used with type int</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.081</span>
<span class="go">Type error. To ignore it, pass -no-tc.</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv12.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">y</span><span class="w"> </span><span class="kt">(list</span><span class="w"> </span><span class="kt">int)</span>.<span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">y</span>.<span class="w"></span>
f<span class="w"> </span><span class="s2">&quot;x&quot;</span><span class="o">.</span><span class="w"></span>

main<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/typeabbrv12.elpi&quot;, line 4, column 0, character 38: Error:</span>
<span class="go"> x has type string but is used with type y</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.076</span>
<span class="go">Type error. To ignore it, pass -no-tc.</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">t1</span><span class="w"> </span><span class="kt">int</span>.<span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">t1</span>.<span class="w"></span>
f<span class="w"> </span><span class="nv">_</span><span class="o">.</span><span class="w"></span>

<span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">t1</span><span class="w"> </span><span class="kt">bool</span>.<span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="w"> </span><span class="mi">3</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Fatal error: File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/typeabbrv2.elpi&quot;, line 6, column 0, character 39:duplicate type abbreviation for t1. Previous declaration: File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/typeabbrv2.elpi&quot;, line 1, column 0, character 0:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv3.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span>typeabbrev<span class="w"> </span>(t1<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(pair<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">X</span><span class="o">).</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">t1</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="kt">int</span>.<span class="w"></span>
f<span class="w"> </span><span class="nv">_</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="w"> </span>(pr<span class="w"> </span><span class="mi">2</span><span class="w"> </span>tt<span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.075</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv4.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">t1</span><span class="w"> </span><span class="kt">int</span>.<span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">t1</span>.<span class="w"></span>
f<span class="w"> </span><span class="nv">_</span><span class="o">.</span><span class="w"></span>

<span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">t1</span><span class="w"> </span><span class="kt">int</span>.<span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="w"> </span><span class="mi">3</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.074</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv5.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">x</span><span class="w"> </span><span class="kt">y</span>.<span class="w"></span>
<span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">y</span><span class="w"> </span><span class="kt">x</span>.<span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">x</span>.<span class="w"></span>
f<span class="w"> </span><span class="nv">_</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="w"> </span><span class="mi">0</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>
<span class="go">Fatal error: exception Elpi__Compiler.CompileError(_, &quot;looping while unfolding type abbreviation for x&quot;)</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv6.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">x</span><span class="w"> </span><span class="kt">(option</span><span class="w"> </span><span class="kt">A)</span>.<span class="w"></span>
<span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">x</span>.<span class="w"></span>
f<span class="w"> </span><span class="nv">_</span><span class="o">.</span><span class="w"></span>
main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="w"> </span>(some<span class="w"> </span><span class="mi">3</span><span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Fatal error: File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/typeabbrv6.elpi&quot;, line 1, column 0, character 0:type abbreviation for x has unbound variables</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv7.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">xx</span><span class="w"> </span><span class="kt">bool</span>.<span class="w"></span>

<span class="kd">namespace</span><span class="w"> </span>foo<span class="w"> </span>{

<span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">xx</span>.<span class="w"></span>
f<span class="w"> </span><span class="nv">_</span><span class="o">.</span><span class="w"></span>

}


main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>foo.f<span class="w"> </span>tt<span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.078</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv8.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span>{ <span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">xx</span><span class="w"> </span><span class="kt">bool</span>.<span class="w"> </span>}

<span class="kd">type</span><span class="w"> </span><span class="nf">g</span><span class="w"> </span><span class="kt">xx</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">xx</span>.<span class="w"></span>
{
<span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">xx</span>.<span class="w"></span>
f<span class="w"> </span>(g<span class="w"> </span><span class="nv">_</span><span class="o">).</span><span class="w"></span>

}


main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="w"> </span>(g<span class="w"> </span>tt<span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.074</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv9.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">t</span><span class="w"> </span><span class="kt">int</span>.<span class="w"></span>

<span class="kd">namespace</span><span class="w"> </span>xx<span class="w"> </span>{
<span class="w">    </span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">t</span><span class="w"> </span><span class="kt">int</span>.<span class="w"></span>
}

<span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">t</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">xx.t</span>.<span class="w"></span>
f<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="o">.</span><span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.079</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/uminus.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="nv">X</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="kd">-</span><span class="w"> </span><span class="mi">2</span><span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="kd">-</span><span class="mi">2</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w">  </span><span class="mi">1</span><span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.076</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/uvar_chr.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">type</span><span class="w"> </span><span class="nf">app</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">lam</span><span class="w"> </span><span class="kt">(term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">unsafe-cast</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">B</span>.<span class="w"></span>
unsafe-cast<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">mk-app</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">term</span>.<span class="w"></span>
mk-app<span class="w"> </span><span class="nv">HD</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">HD</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
mk-app<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">K</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">A</span><span class="kd">|</span><span class="nv">Args</span><span class="kd">]</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>unsafe-cast<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">K&#39;</span><span class="kd">,</span><span class="w"> </span>mk-app<span class="w"> </span>(<span class="nv">K&#39;</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="nv">Args</span><span class="w"> </span><span class="nv">R</span><span class="o">.</span><span class="w"></span>
mk-app<span class="w"> </span><span class="nv">HD</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>mk-app<span class="w"> </span>(app<span class="w"> </span><span class="nv">HD</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">copy</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">term</span>.<span class="w"></span>

copy<span class="w"> </span>(app<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>(app<span class="w"> </span><span class="nv">A1</span><span class="w"> </span><span class="nv">B1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">A1</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">B1</span><span class="o">.</span><span class="w"></span>
copy<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">F1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F1</span><span class="w"> </span>x<span class="o">).</span><span class="w"></span>
copy<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>var<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>copy-list<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="kd">,</span><span class="w"> </span>mk-app<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span><span class="w"></span>
copy<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">L1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy-list<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span><span class="w"></span>

copy-list<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span><span class="w"></span>
copy-list<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span><span class="nv">Y</span><span class="kd">|</span><span class="nv">YS</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span>copy-list<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">YS</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">meta-copy</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">term</span>.<span class="w"></span>
<span class="kd">constraint</span><span class="w"> </span><span class="nf">meta-copy </span>{<span class="w"></span>
<span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(meta-copy<span class="w"> </span><span class="nv">I</span><span class="w"> </span><span class="nv">O</span><span class="o">)</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span>(copy<span class="w"> </span><span class="nv">I</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(<span class="nv">O</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X</span><span class="o">).</span><span class="w"></span>
}<span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>copy<span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">T</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">T</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>declare_constraint<span class="w"> </span>(meta-copy<span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">S</span><span class="o">)</span><span class="w"> </span><span class="kd">[],</span><span class="w"> </span>print<span class="w"> </span><span class="nv">S</span><span class="kd">,</span><span class="w"> </span>not(var<span class="w"> </span><span class="nv">S</span><span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/uvar_chr.elpi&quot;, line 17, column 0, character 438: Warning:</span>
<span class="go"> constant copy-list has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/uvar_chr.elpi&quot;, line 28, column 0, character 731: Warning:</span>
<span class="go"> F is linear: name it _F (discard) or F_ (fresh variable)</span>
<span class="go">lam X0</span>
<span class="go">lam c0 \ X0 c0</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.084</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>
<span class="go"> meta-copy (lam c0 \ X0 c0) (lam c0 \ X0 c0)  /* suspended on  */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/var.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span>main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>var<span class="w"> </span><span class="nv">X0</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[],</span><span class="w"></span>
<span class="w">  </span>var<span class="w"> </span><span class="nv">X1</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>var<span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x y</span>\<span class="w"> </span><span class="o">(</span>var<span class="w"> </span><span class="o">(</span><span class="nv">X3</span><span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="kd">[</span>x<span class="kd">,</span>y<span class="kd">]</span><span class="o">))</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x y</span>\<span class="w"> </span><span class="o">(</span>var<span class="w"> </span><span class="o">(</span><span class="nv">X9</span><span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="nv">X9</span><span class="w"> </span><span class="o">(</span><span class="nv">X10</span><span class="w"> </span>x<span class="w"> </span>y<span class="o">)))</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x y</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">X5</span>\<span class="w"> </span><span class="o">(</span>var<span class="w"> </span><span class="nv">X5</span><span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="kd">[</span>x<span class="kd">,</span>y<span class="kd">]</span><span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">           </span>print<span class="w"> </span><span class="nv">X0</span><span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="w"> </span><span class="nv">X5</span><span class="o">).</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/var.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> X10 is linear: name it _X10 (discard) or X10_ (fresh variable)</span>
<span class="go">X0 , X1 , X2 , X3 , X4 , X4 c0 c1</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.075</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/variadic_declare_constraints.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><span class="kd">type</span><span class="w"> </span><span class="nf">foo</span><span class="w"> </span><span class="kt">tm</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">(tm</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tm)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.<span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>declare_constraint<span class="w"> </span>(foo<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">[</span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="nv">Z</span><span class="kd">]</span><span class="o">.</span><span class="w"></span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/variadic_declare_constraints.elpi&quot;, line 3, column 0, character 36:</span>
<span class="go"> Warning: Z is linear: name it _Z (discard) or Z_ (fresh variable)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.002</span>

<span class="go">Typechecking time: 0.077</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>
<span class="go"> foo X0 X1  /* suspended on X0, X1, X2 */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/w.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span>filter<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span><span class="w"></span>
filter<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">YS</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>filter<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">YS</span><span class="o">.</span><span class="w"></span>
filter<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">YS</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>filter<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">YS</span><span class="o">.</span><span class="w"></span>

mem<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">_</span><span class="kd">]</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
mem<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

if<span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">G</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span><span class="w"></span>
if<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">E</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">E</span><span class="o">.</span><span class="w"></span>

<span class="kd">kind</span><span class="w"> </span><span class="nf">term</span><span class="w"> </span><span class="kt">type</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">app</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">lam</span><span class="w"> </span><span class="kt">(term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">let</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">ty</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">(term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>

<span class="kd">kind</span><span class="w"> </span><span class="nf">tye</span><span class="w"> </span><span class="kt">type</span>.<span class="w"></span>
<span class="c">% elpi:skip 2</span>
infixr<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="mi">50</span><span class="o">.</span><span class="w"></span>
infixl<span class="w"> </span>#<span class="w"> </span><span class="mi">60</span><span class="o">.</span><span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">(==&gt;)</span><span class="w"> </span><span class="kt">tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tye</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">(#)</span><span class="w"> </span><span class="kt">tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tye</span>.<span class="w"></span>

<span class="kd">kind</span><span class="w"> </span><span class="nf">ty</span><span class="w"> </span><span class="kt">type</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">all</span><span class="w"> </span><span class="kt">(tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">ty)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">ty</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">mono</span><span class="w"> </span><span class="kt">tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">ty</span>.<span class="w"></span>

<span class="kd">type</span><span class="w"> </span><span class="nf">one</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">plus</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">size</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">empty</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">comma</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>

<span class="kd">type</span><span class="w"> </span><span class="nf">integer</span><span class="w"> </span><span class="kt">tye</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">list</span><span class="w"> </span><span class="kt">tye</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">pair</span><span class="w"> </span><span class="kt">tye</span>.<span class="w"></span>

<span class="c">% constants</span>
w<span class="w"> </span>one<span class="w">    </span>(mono<span class="w"> </span>integer<span class="o">).</span><span class="w"></span>
w<span class="w"> </span>plus<span class="w">   </span>(mono<span class="w"> </span><span class="o">(</span>integer<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>integer<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>integer<span class="o">)).</span><span class="w"></span>
w<span class="w"> </span>size<span class="w">   </span>(all<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>mono<span class="w"> </span><span class="o">(</span>list<span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>integer<span class="o">)).</span><span class="w"></span>
w<span class="w"> </span>empty<span class="w">  </span>(all<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>mono<span class="w"> </span><span class="o">(</span>list<span class="w"> </span>#<span class="w"> </span>x<span class="o">)).</span><span class="w"></span>
w<span class="w"> </span>comma<span class="w">  </span>(all<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>all<span class="w"> </span><span class="nv">y\</span><span class="w"> </span>mono<span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>y<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>pair<span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span>#<span class="w"> </span>y<span class="o">))).</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">w</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">ty</span>.<span class="w"></span>

w<span class="w"> </span>(app<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">R</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>w<span class="w"> </span><span class="nv">F</span><span class="w"> </span>(mono<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="nv">R</span><span class="o">))</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>w<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">A</span><span class="o">).</span><span class="w"></span>

w<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="nv">R</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>w<span class="w"> </span>x<span class="w"> </span>(mono<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>w<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">R</span><span class="o">).</span><span class="w"></span>

w<span class="w"> </span>(let<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">FP</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">TC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>w<span class="w"> </span><span class="nv">F</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">FT</span><span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>declare_constraint<span class="w"> </span>(overbar<span class="w"> </span><span class="o">(</span>mono<span class="w"> </span><span class="nv">FT</span><span class="o">)</span><span class="w"> </span><span class="nv">FP</span><span class="o">)</span><span class="w"> </span><span class="kd">[],</span><span class="w"></span>
<span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>w<span class="w"> </span>x<span class="w"> </span><span class="nv">FP</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>w<span class="w"> </span>(<span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">TC</span><span class="o">).</span><span class="w"></span>

w<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>w<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(all<span class="w"> </span><span class="nv">Poly</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>specialize<span class="w"> </span>(all<span class="w"> </span><span class="nv">Poly</span><span class="o">)</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span><span class="w"></span>

w<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;Error: &quot;</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="s2">&quot;cannot have type&quot;</span><span class="w"> </span><span class="nv">TY</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">specialize</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">ty</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">tye</span>.<span class="w"></span>

specialize<span class="w"> </span>(all<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>specialize<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">FRESH_</span><span class="o">)</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span><span class="w"></span>
specialize<span class="w"> </span>(mono<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">overbar</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">ty</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">ty</span>.<span class="w"></span>

<span class="kd">constraint</span><span class="w"> </span><span class="nf">w overbar </span>{<span class="w"></span>

<span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(<span class="nv">G</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>overbar<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">T1</span><span class="o">)</span><span class="w"></span>
<span class="w">     </span><span class="kd">|</span><span class="w"> </span>(generalize<span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">POLYT</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(<span class="nv">T1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">POLYT</span><span class="o">).</span><span class="w"></span>

<span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(<span class="nv">G</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>overbar<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(print<span class="w"> </span><span class="s2">&quot;overbar&quot;</span><span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="s2">&quot;|-&quot;</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="s2">&quot;failed&quot;</span><span class="kd">,</span><span class="w"> </span>halt<span class="o">).</span><span class="w"></span>

generalize<span class="w"> </span><span class="nv">G</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">ALL</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>free-ty<span class="w"> </span>(mono<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">VT</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>free-gamma<span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">VG</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>filter<span class="w"> </span><span class="nv">VT</span><span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>not<span class="o">(</span>mem<span class="w"> </span><span class="nv">VG</span><span class="w"> </span>x<span class="o">))</span><span class="w"> </span><span class="nv">Q</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>quantify<span class="w"> </span><span class="nv">Q</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">ALL</span><span class="o">.</span><span class="w"></span>

free-ty<span class="w"> </span>(mono<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>free<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span><span class="w"></span>
free-ty<span class="w"> </span>(all<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>free-ty<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span><span class="w"></span>

free-gamma<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L</span><span class="o">.</span><span class="w"></span>
free-gamma<span class="w"> </span><span class="kd">[</span>w<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">T</span><span class="kd">|</span><span class="nv">X</span><span class="kd">]</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L2</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>free-ty<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="kd">,</span><span class="w"> </span>free-gamma<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="nv">L2</span><span class="o">.</span><span class="w"></span>

free<span class="w"> </span>(<span class="nv">A</span><span class="w"> </span>#<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L2</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>free<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="kd">,</span><span class="w"> </span>free<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="nv">L2</span><span class="o">.</span><span class="w"></span>
free<span class="w"> </span>(<span class="nv">A</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L2</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>free<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="kd">,</span><span class="w"> </span>free<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="nv">L2</span><span class="o">.</span><span class="w"></span>
free<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>if<span class="w"> </span>(mem<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(<span class="nv">L1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span>(<span class="nv">L1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">L</span><span class="kd">]</span><span class="o">).</span><span class="w"></span>
free<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L</span><span class="o">.</span><span class="w"></span>

copy-ty<span class="w"> </span>(mono<span class="w"> </span><span class="nv">X1</span><span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">X2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="nv">X2</span><span class="o">.</span><span class="w"></span>
copy-ty<span class="w"> </span>(all<span class="w"> </span><span class="nv">F1</span><span class="o">)</span><span class="w"> </span>(all<span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy-ty<span class="w"> </span>(<span class="nv">F1</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">).</span><span class="w"></span>

copy<span class="w"> </span>(<span class="nv">A</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>(<span class="nv">A1</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="nv">B1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">A1</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">B1</span><span class="o">.</span><span class="w"></span>
copy<span class="w"> </span>(<span class="nv">A</span><span class="w"> </span>#<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>(<span class="nv">A1</span><span class="w"> </span>#<span class="w"> </span><span class="nv">B1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">A1</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">B1</span><span class="o">.</span><span class="w"></span>
copy<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

quantify<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">X1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="o">.</span><span class="w"></span>
quantify<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span>(all<span class="w"> </span><span class="nv">x\</span><span class="w"> </span><span class="nv">T2</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>quantify<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">T1</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy-ty<span class="w"> </span><span class="nv">T1</span><span class="w"> </span>(<span class="nv">T2</span><span class="w"> </span>x<span class="o">).</span><span class="w"></span>

}<span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Test 1&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="nv">P</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>let<span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\</span>x<span class="o">)</span><span class="w"> </span><span class="nv">T_</span><span class="w"> </span>(<span class="nv">id\</span><span class="w"> </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>plus<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>id<span class="w"> </span>one<span class="o">))</span><span class="w"></span>
<span class="w">                                  </span><span class="o">(</span>app<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>id<span class="w"> </span>empty<span class="o">)))</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Typing&quot;</span><span class="w"> </span><span class="nv">P</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>w<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">TP</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;OK&quot;</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="s2">&quot;has type&quot;</span><span class="w"> </span><span class="nv">TP</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Test 2&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>lam<span class="w"> </span>(<span class="nv">x\</span><span class="w"></span>
<span class="w">        </span>let<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">y\</span><span class="w"> </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>comma<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="nv">Y_</span><span class="w"> </span><span class="o">(</span><span class="nv">mk\</span><span class="w"></span>
<span class="w">          </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>comma<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>mk<span class="w"> </span>one<span class="o">))</span><span class="w"> </span><span class="o">(</span>app<span class="w"> </span>mk<span class="w"> </span>x<span class="o">)))</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Typing&quot;</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>w<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XT</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;OK&quot;</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="s2">&quot;has type&quot;</span><span class="w"> </span><span class="nv">XT</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Test 3&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="nv">Q</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>lam<span class="w"> </span>(<span class="nv">id\</span><span class="w"> </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>plus<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>id<span class="w"> </span>one<span class="o">))</span><span class="w"></span>
<span class="w">                                  </span><span class="o">(</span>app<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>id<span class="w"> </span>empty<span class="o">)))</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Typing&quot;</span><span class="w"> </span><span class="nv">Q</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>w<span class="w"> </span><span class="nv">Q</span><span class="w"> </span><span class="nv">TQ</span><span class="o">.</span><span class="w"> </span><span class="c">% should print error</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/w.elpi&quot;, line 76, column 0, character 1561: Warning:</span>
<span class="go"> constant quantify has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/w.elpi&quot;, line 5, column 0, character 105: Warning:</span>
<span class="go"> constant mem has no declared type. Did you mean std.set.private.mem std.set.mem std.mem! std.mem std.string.map.mem std.int.map.mem std.loc.map.mem std.string.set.mem std.int.set.mem std.loc.set.mem ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/w.elpi&quot;, line 76, column 0, character 1561: Warning:</span>
<span class="go"> constant generalize has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/w.elpi&quot;, line 76, column 0, character 1561: Warning:</span>
<span class="go"> constant free-ty has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/w.elpi&quot;, line 76, column 0, character 1561: Warning:</span>
<span class="go"> constant free-gamma has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/w.elpi&quot;, line 82, column 0, character 1693: Warning:</span>
<span class="go"> constant free has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/w.elpi&quot;, line 1, column 0, character 0: Warning:</span>
<span class="go"> constant filter has no declared type. Did you mean std.filter ?</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/w.elpi&quot;, line 93, column 0, character 2038: Warning:</span>
<span class="go"> constant copy-ty has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/w.elpi&quot;, line 93, column 0, character 2038: Warning:</span>
<span class="go"> constant copy has no declared type.</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/w.elpi&quot;, line 91, column 0, character 2025: Warning:</span>
<span class="go"> X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/w.elpi&quot;, line 107, column 0, character 2408: Warning:</span>
<span class="go"> TQ is linear: name it _TQ (discard) or TQ_ (fresh variable)</span>
<span class="go">Test 1</span>
<span class="go">Typing let (lam c0 \ c0) X0 c0 \ app (app plus (app c0 one)) (app size (app c0 empty))</span>
<span class="go">OK let (lam c0 \ c0) (all c0 \ mono (c0 ==&gt; c0)) c0 \ app (app plus (app c0 one)) (app size (app c0 empty)) has type</span>
<span class="go"> mono integer</span>

<span class="go">Test 2</span>
<span class="go">Typing lam c0 \ let (lam c1 \ app (app comma c0) c1) X1 c1 \ app (app comma (app c1 one)) (app c1 c0)</span>
<span class="go">OK</span>
<span class="go"> lam c0 \</span>
<span class="go">  let (lam c1 \ app (app comma c0) c1) (all c1 \ mono (c1 ==&gt; pair # X2 # c1)) c1 \ app (app comma (app c1 one)) (app c1 c0)</span>
<span class="go"> has type mono (X2 ==&gt; pair # (pair # X2 # integer) # (pair # X2 # X2))</span>

<span class="go">Test 3</span>
<span class="go">Typing lam c0 \ app (app plus (app c0 one)) (app size (app c0 empty))</span>
<span class="go">Error:  c0 cannot have type all X3^1</span>
<span class="go">Error:  c0 cannot have type mono (X4^1 ==&gt; list # X5^1)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.002</span>

<span class="go">Compilation time: 0.004</span>

<span class="go">Typechecking time: 0.137</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/w_legacy.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span>filter<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span><span class="w"></span>
filter<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">YS</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>filter<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">YS</span><span class="o">.</span><span class="w"></span>
filter<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">YS</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>filter<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">YS</span><span class="o">.</span><span class="w"></span>

mem<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">_</span><span class="kd">]</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"></span>
mem<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

if<span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">G</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span><span class="w"></span>
if<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">E</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">E</span><span class="o">.</span><span class="w"></span>

<span class="kd">kind</span><span class="w"> </span><span class="nf">term</span><span class="w"> </span><span class="kt">type</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">app</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">lam</span><span class="w"> </span><span class="kt">(term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">let</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">ty</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">(term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>

<span class="kd">kind</span><span class="w"> </span><span class="nf">tye</span><span class="w"> </span><span class="kt">type</span>.<span class="w"></span>
infixr<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="mi">50</span><span class="o">.</span><span class="w"></span>
infixl<span class="w"> </span>#<span class="w"> </span><span class="mi">60</span><span class="o">.</span><span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">(==&gt;)</span><span class="w"> </span><span class="kt">tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tye</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">(#)</span><span class="w"> </span><span class="kt">tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tye</span>.<span class="w"></span>

<span class="kd">kind</span><span class="w"> </span><span class="nf">ty</span><span class="w"> </span><span class="kt">type</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">all</span><span class="w"> </span><span class="kt">(tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">ty)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">ty</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">mono</span><span class="w"> </span><span class="kt">tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">ty</span>.<span class="w"></span>

<span class="kd">type</span><span class="w"> </span><span class="nf">one</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">plus</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">size</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">empty</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">comma</span><span class="w"> </span><span class="kt">term</span>.<span class="w"></span>

<span class="kd">type</span><span class="w"> </span><span class="nf">integer</span><span class="w"> </span><span class="kt">tye</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">list</span><span class="w"> </span><span class="kt">tye</span>.<span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nf">pair</span><span class="w"> </span><span class="kt">tye</span>.<span class="w"></span>

<span class="c">% constants</span>
w<span class="w"> </span>one<span class="w">    </span>(mono<span class="w"> </span>integer<span class="o">).</span><span class="w"></span>
w<span class="w"> </span>plus<span class="w">   </span>(mono<span class="w"> </span><span class="o">(</span>integer<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>integer<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>integer<span class="o">)).</span><span class="w"></span>
w<span class="w"> </span>size<span class="w">   </span>(all<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>mono<span class="w"> </span><span class="o">(</span>list<span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>integer<span class="o">)).</span><span class="w"></span>
w<span class="w"> </span>empty<span class="w">  </span>(all<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>mono<span class="w"> </span><span class="o">(</span>list<span class="w"> </span>#<span class="w"> </span>x<span class="o">)).</span><span class="w"></span>
w<span class="w"> </span>comma<span class="w">  </span>(all<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>all<span class="w"> </span><span class="nv">y\</span><span class="w"> </span>mono<span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>y<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>pair<span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span>#<span class="w"> </span>y<span class="o">))).</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">w</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">ty</span>.<span class="w"></span>

w<span class="w"> </span>(app<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">R</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>w<span class="w"> </span><span class="nv">F</span><span class="w"> </span>(mono<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="nv">R</span><span class="o">))</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>w<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">A</span><span class="o">).</span><span class="w"></span>

w<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="nv">R</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>w<span class="w"> </span>x<span class="w"> </span>(mono<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>w<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">R</span><span class="o">).</span><span class="w"></span>

w<span class="w"> </span>(let<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">FP</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">TC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>w<span class="w"> </span><span class="nv">F</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">FT</span><span class="o">)</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>declare_constraint<span class="w"> </span>(overbar<span class="w"> </span><span class="o">(</span>mono<span class="w"> </span><span class="nv">FT</span><span class="o">)</span><span class="w"> </span><span class="nv">FP</span><span class="o">)</span><span class="w"> </span><span class="kd">[],</span><span class="w"></span>
<span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>w<span class="w"> </span>x<span class="w"> </span><span class="nv">FP</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>w<span class="w"> </span>(<span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">TC</span><span class="o">).</span><span class="w"></span>

w<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>w<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(all<span class="w"> </span><span class="nv">Poly</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>specialize<span class="w"> </span>(all<span class="w"> </span><span class="nv">Poly</span><span class="o">)</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span><span class="w"></span>

w<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;Error: &quot;</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="s2">&quot;cannot have type&quot;</span><span class="w"> </span><span class="nv">TY</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">specialize</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">ty</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">tye</span>.<span class="w"></span>

specialize<span class="w"> </span>(all<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>specialize<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">FRESH_</span><span class="o">)</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span><span class="w"></span>
specialize<span class="w"> </span>(mono<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

<span class="kd">pred</span><span class="w"> </span><span class="nf">overbar</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">ty</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">ty</span>.<span class="w"></span>

<span class="kd">constraint</span><span class="w"> </span><span class="nf">w overbar </span>{<span class="w"></span>

<span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(<span class="nv">G</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>overbar<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">T1</span><span class="o">)</span><span class="w"></span>
<span class="w">     </span><span class="kd">|</span><span class="w"> </span>(generalize<span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">POLYT</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(<span class="nv">T1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">POLYT</span><span class="o">).</span><span class="w"></span>

<span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(<span class="nv">G</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>overbar<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(print<span class="w"> </span><span class="s2">&quot;overbar&quot;</span><span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="s2">&quot;|-&quot;</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="s2">&quot;failed&quot;</span><span class="kd">,</span><span class="w"> </span>halt<span class="o">).</span><span class="w"></span>

generalize<span class="w"> </span><span class="nv">G</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">ALL</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>free-ty<span class="w"> </span>(mono<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">VT</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>free-gamma<span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">VG</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>filter<span class="w"> </span><span class="nv">VT</span><span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>not<span class="o">(</span>mem<span class="w"> </span><span class="nv">VG</span><span class="w"> </span>x<span class="o">))</span><span class="w"> </span><span class="nv">Q</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>quantify<span class="w"> </span><span class="nv">Q</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">ALL</span><span class="o">.</span><span class="w"></span>

free-ty<span class="w"> </span>(mono<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>free<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span><span class="w"></span>
free-ty<span class="w"> </span>(all<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>free-ty<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span><span class="w"></span>

free-gamma<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L</span><span class="o">.</span><span class="w"></span>
free-gamma<span class="w"> </span><span class="kd">[</span>w<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">T</span><span class="kd">|</span><span class="nv">X</span><span class="kd">]</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L2</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>free-ty<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="kd">,</span><span class="w"> </span>free-gamma<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="nv">L2</span><span class="o">.</span><span class="w"></span>

free<span class="w"> </span>(<span class="nv">A</span><span class="w"> </span>#<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L2</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>free<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="kd">,</span><span class="w"> </span>free<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="nv">L2</span><span class="o">.</span><span class="w"></span>
free<span class="w"> </span>(<span class="nv">A</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L2</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>free<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="kd">,</span><span class="w"> </span>free<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="nv">L2</span><span class="o">.</span><span class="w"></span>
free<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>if<span class="w"> </span>(mem<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(<span class="nv">L1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span>(<span class="nv">L1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">L</span><span class="kd">]</span><span class="o">).</span><span class="w"></span>
free<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L</span><span class="o">.</span><span class="w"></span>

copy-ty<span class="w"> </span>(mono<span class="w"> </span><span class="nv">X1</span><span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">X2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="nv">X2</span><span class="o">.</span><span class="w"></span>
copy-ty<span class="w"> </span>(all<span class="w"> </span><span class="nv">F1</span><span class="o">)</span><span class="w"> </span>(all<span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy-ty<span class="w"> </span>(<span class="nv">F1</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">).</span><span class="w"></span>

copy<span class="w"> </span>(<span class="nv">A</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>(<span class="nv">A1</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="nv">B1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">A1</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">B1</span><span class="o">.</span><span class="w"></span>
copy<span class="w"> </span>(<span class="nv">A</span><span class="w"> </span>#<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>(<span class="nv">A1</span><span class="w"> </span>#<span class="w"> </span><span class="nv">B1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">A1</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">B1</span><span class="o">.</span><span class="w"></span>
copy<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"></span>

quantify<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">X1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="o">.</span><span class="w"></span>
quantify<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span>(all<span class="w"> </span><span class="nv">x\</span><span class="w"> </span><span class="nv">T2</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>quantify<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">T1</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy-ty<span class="w"> </span><span class="nv">T1</span><span class="w"> </span>(<span class="nv">T2</span><span class="w"> </span>x<span class="o">).</span><span class="w"></span>

}<span class="w"></span>

main<span class="w"> </span><span class="kd">:-</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Test 1&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="nv">P</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>let<span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\</span>x<span class="o">)</span><span class="w"> </span><span class="nv">T_</span><span class="w"> </span>(<span class="nv">id\</span><span class="w"> </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>plus<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>id<span class="w"> </span>one<span class="o">))</span><span class="w"></span>
<span class="w">                                  </span><span class="o">(</span>app<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>id<span class="w"> </span>empty<span class="o">)))</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Typing&quot;</span><span class="w"> </span><span class="nv">P</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>w<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">TP</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;OK&quot;</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="s2">&quot;has type&quot;</span><span class="w"> </span><span class="nv">TP</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Test 2&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>lam<span class="w"> </span>(<span class="nv">x\</span><span class="w"></span>
<span class="w">        </span>let<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">y\</span><span class="w"> </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>comma<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="nv">Y_</span><span class="w"> </span><span class="o">(</span><span class="nv">mk\</span><span class="w"></span>
<span class="w">          </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>comma<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>mk<span class="w"> </span>one<span class="o">))</span><span class="w"> </span><span class="o">(</span>app<span class="w"> </span>mk<span class="w"> </span>x<span class="o">)))</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Typing&quot;</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>w<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XT</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;OK&quot;</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="s2">&quot;has type&quot;</span><span class="w"> </span><span class="nv">XT</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Test 3&quot;</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span><span class="nv">Q</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>lam<span class="w"> </span>(<span class="nv">id\</span><span class="w"> </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>plus<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>id<span class="w"> </span>one<span class="o">))</span><span class="w"></span>
<span class="w">                                  </span><span class="o">(</span>app<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>id<span class="w"> </span>empty<span class="o">)))</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Typing&quot;</span><span class="w"> </span><span class="nv">Q</span><span class="kd">,</span><span class="w"></span>
<span class="w">  </span>w<span class="w"> </span><span class="nv">Q</span><span class="w"> </span><span class="nv">TQ</span><span class="o">.</span><span class="w"> </span><span class="c">% should print error</span>
</pre></div></td></tr></table></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/gares/LPCIC/elpi/docs/source/../../tests/sources/w_legacy.elpi&quot;, line 17, column 0, character 330:</span>
<span class="go">Mixfix directives are not supported by this parser.</span>

<span class="go">The parser is based on token families.</span>
<span class="go">A family is identified by some starting characters, for example</span>
<span class="go">a token &#39;+--&gt;&#39; belongs to the family of &#39;+&#39;. There is no need</span>
<span class="go">to declare it.</span>

<span class="go">All the tokens of a family are parsed with the same precedence and</span>
<span class="go">associativity, for example &#39;x +--&gt; y *--&gt; z&#39; is parsed as</span>
<span class="go">&#39;x +--&gt; (y *--&gt; z)&#39; since the family of &#39;*&#39; has higher precedence</span>
<span class="go">than the family of &#39;+&#39;.</span>

<span class="go">Here the table of tokens and token families.</span>
<span class="go">Token families are represented by the start symbols followed by &#39;..&#39;.</span>
<span class="go">Tokens of families marked with [*] cannot end with the starting symbol,</span>
<span class="go">eg `foo` is not an infix, while `foo is.</span>
<span class="go">The listing is ordered by increasing precedence.</span>

<span class="go">fixity                     | tokens / token families</span>
<span class="go">-------------------------- + -----------------------------------</span>
<span class="go">Infix   not   associative  | :-  ?-</span>
<span class="go">Infix   right associative  | ;</span>
<span class="go">Infix   right associative  | ,  &amp;</span>
<span class="go">Infix   right associative  | -&gt;</span>
<span class="go">Infix   right associative  | =&gt;</span>
<span class="go">Infix   not   associative  | =  ==  =&lt;  r&lt;  i&lt;  s&lt;  r=&lt;  i=&lt;  s=&lt;</span>
<span class="go">                             &lt;..  r&gt;  i&gt;  s&gt;  r&gt;=  i&gt;=  s&gt;=  &gt;..</span>
<span class="go">                             is</span>
<span class="go">Infix   right associative  | ::</span>
<span class="go">Infix   not   associative  | &#39;.. [*]</span>
<span class="go">Infix   left  associative  | ^..  r+  i+  s+  +..  -  r-  i-  s-</span>
<span class="go">Infix   left  associative  | r*  i*  s*  *..  /  div  mod</span>
<span class="go">Infix   right associative  | --..</span>
<span class="go">Infix   not   associative  | `.. [*]</span>
<span class="go">Infix   right associative  | ==..</span>
<span class="go">Infix   right associative  | ||..</span>
<span class="go">Infix   right associative  | &amp;&amp;..</span>
<span class="go">Infix   left  associative  | #..</span>
<span class="go">Prefix  not   associative  | r~  i~  ~..</span>
<span class="go">Postfix not   associative  | ?..</span>

<span class="go">If the token is a valid mixfix, and you want the file to stay compatible</span>
<span class="go">with Teyjus, you can ask Elpi to skip the directive. Eg:</span>

<span class="gp">% </span>elpi:skip <span class="m">2</span>  // skips the next two lines
<span class="go">infixr ==&gt; 120.</span>
<span class="go">infixr || 120.</span>

<span class="go">As a debugging facility one can ask Elpi to print the AST in order to</span>
<span class="go">verify how the text was parsed. Eg:</span>

<span class="go">echo &#39;MyFormula = a || b ==&gt; c &amp;&amp; d&#39; | elpi -parse-term</span>
</pre></div>
</div>
<p><strong>../../tests/sources/zebra.elpi:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Fatal error: exception Failure(&quot;File /home/gares/LPCIC/elpi/docs/source/../../tests/sources/zebra.elp not found in: /home/gares/LPCIC/elpi/_build/default/../lib/, /home/gares/LPCIC/elpi/_build/default/../lib/ocaml, /home/gares/LPCIC/elpi/_build/install/default/lib, /home/gares/LPCIC/elpi/_build/default&quot;)</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Enrico Tassi.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>